(()=>{var af=Object.create,$=Object.defineProperty,aB=Object.getOwnPropertyDescriptor,av=Object.getOwnPropertyNames,au=Object.getPrototypeOf,ar=Object.prototype.hasOwnProperty,aq=a=>$(a,"__esModule",{value:!0}),aj=(b,a)=>function(){return a||(0,b[Object.keys(b)[0]])((a={exports:{}}).exports,a),a.exports},ai=(b,a,c)=>{if(a&&typeof a=="object"||typeof a=="function")for(let d of av(a))!ar.call(b,d)&&d!=="default"&&$(b,d,{get:()=>a[d],enumerable:!(c=aB(a,d))||c.enumerable});return b},ah=a=>ai(aq($(a!=null?af(au(a)):{},"default",a&&a.__esModule&&"default"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a),ae=aj({"node_modules/papaparse/papaparse.min.js"(a,b){!function(d,c){typeof define=="function"&&define.amd?define([],c):typeof b=="object"&&typeof a!="undefined"?b.exports=c():d.Papa=c()}(a,function v(){"use strict";var c=typeof self!="undefined"?self:typeof window!="undefined"?window:c!==void 0?c:{},f=!c.document&&!!c.postMessage,n=f&&/blob:/i.test((c.location||{}).protocol),m={},u=0,a={parse:function(e,d){var g=(d=d||{}).dynamicTyping||!1,f,h;return(b(g)&&(d.dynamicTypingFunction=g,g={}),d.dynamicTyping=g,d.transform=!!b(d.transform)&&d.transform,d.worker&&a.WORKERS_SUPPORTED)?(f=function(){var f,b,d,e;return!!a.WORKERS_SUPPORTED&&(f=(d=c.URL||c.webkitURL||null,e=v.toString(),a.BLOB_URL||(a.BLOB_URL=d.createObjectURL(new Blob(["(",e,")();"],{type:"text/javascript"})))),b=new c.Worker(f),b.onmessage=t,b.id=u++,m[b.id]=b)}(),f.userStep=d.step,f.userChunk=d.chunk,f.userComplete=d.complete,f.userError=d.error,d.step=b(d.step),d.chunk=b(d.chunk),d.complete=b(d.complete),d.error=b(d.error),delete d.worker,void f.postMessage({input:e,config:d,workerId:f.id})):(h=null,a.NODE_STREAM_INPUT,typeof e=="string"?h=d.download?new j(d):new i(d):e.readable===!0&&b(e.read)&&b(e.on)?h=new l(d):(c.File&&e instanceof File||e instanceof Object)&&(h=new k(d)),h.stream(e))},unparse:function(b,c){var e=!1,n=!0,f=",",j="\r\n",d='"',k=d+d,h=!1,l=null,m=!1,q;if(!function(){if(typeof c!="object")return;if(typeof c.delimiter!="string"||a.BAD_DELIMITERS.filter(function(a){return c.delimiter.indexOf(a)!==-1}).length||(f=c.delimiter),(typeof c.quotes=="boolean"||typeof c.quotes=="function"||Array.isArray(c.quotes))&&(e=c.quotes),typeof c.skipEmptyLines!="boolean"&&typeof c.skipEmptyLines!="string"||(h=c.skipEmptyLines),typeof c.newline=="string"&&(j=c.newline),typeof c.quoteChar=="string"&&(d=c.quoteChar),typeof c.header=="boolean"&&(n=c.header),Array.isArray(c.columns)){if(c.columns.length===0)throw new Error("Option columns is empty");l=c.columns}c.escapeChar!==void 0&&(k=c.escapeChar+d),typeof c.escapeFormulae=="boolean"&&(m=c.escapeFormulae)}(),q=new RegExp(g(d),"g"),typeof b=="string"&&(b=JSON.parse(b)),Array.isArray(b)){{if(!b.length||Array.isArray(b[0]))return i(null,b,h);if(typeof b[0]=="object")return i(l||o(b[0]),b,h)}}else if(typeof b=="object")return typeof b.data=="string"&&(b.data=JSON.parse(b.data)),Array.isArray(b.data)&&(b.fields||(b.fields=b.meta&&b.meta.fields),b.fields||(b.fields=Array.isArray(b.data[0])?b.fields:o(b.data[0])),Array.isArray(b.data[0])||typeof b.data[0]=="object"||(b.data=[b.data])),i(b.fields||[],b.data||[],h);throw new Error("Unable to serialize unrecognized input");function o(b){var a,c;if(typeof b!="object")return[];a=[];for(c in b)a.push(c);return a}function i(c,a,k){var d="",e,r,h,b,m,l,q,o,i,s,g,t;if(typeof c=="string"&&(c=JSON.parse(c)),typeof a=="string"&&(a=JSON.parse(a)),e=Array.isArray(c)&&0<c.length,r=!Array.isArray(a[0]),e&&n){for(h=0;h<c.length;h++)0<h&&(d+=f),d+=p(c[h],h);0<a.length&&(d+=j)}for(b=0;b<a.length;b++){if(m=e?c.length:a[b].length,l=!1,q=e?Object.keys(a[b]).length===0:a[b].length===0,k&&!e&&(l=k==="greedy"?a[b].join("").trim()==="":a[b].length===1&&a[b][0].length===0),k==="greedy"&&e){for(o=[],i=0;i<m;i++)s=r?c[i]:i,o.push(a[b][s]);l=o.join("").trim()===""}if(!l){for(g=0;g<m;g++)0<g&&!q&&(d+=f),t=e&&r?c[g]:g,d+=p(a[b][t],g);b<a.length-1&&(!k||0<m&&!q)&&(d+=j)}}return d}function p(b,g){if(b==null)return"";if(b.constructor===Date)return JSON.stringify(b).slice(1,25);m===!0&&typeof b=="string"&&b.match(/^[=+\-@].*$/)!==null&&(b="'"+b);var c=b.toString().replace(q,k),h=typeof e=="boolean"&&e||typeof e=="function"&&e(b,g)||Array.isArray(e)&&e[g]||function(c,b){for(var a=0;a<b.length;a++)if(-1<c.indexOf(b[a]))return!0;return!1}(c,a.BAD_DELIMITERS)||-1<c.indexOf(f)||c.charAt(0)===" "||c.charAt(c.length-1)===" ";return h?d+c+d:c}}},h;a.RECORD_SEP=String.fromCharCode(30),a.UNIT_SEP=String.fromCharCode(31),a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r","\n",'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!f&&!!c.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=p,a.ParserHandle=s,a.NetworkStreamer=j,a.FileStreamer=k,a.StringStreamer=i,a.ReadableStreamStreamer=l,c.jQuery&&(h=c.jQuery,h.fn.parse=function(d){var i=d.config||{},e=[];return this.each(function(b){if(!(h(this).prop("tagName").toUpperCase()==="INPUT"&&h(this).attr("type").toLowerCase()==="file"&&c.FileReader)||!this.files||this.files.length===0)return!0;for(var a=0;a<this.files.length;a++)e.push({file:this.files[a],inputElem:this,instanceConfig:h.extend({},i)})}),g(),this;function g(){var i,j,k,l,c,g,m;if(e.length!==0){if(c=e[0],b(d.before))if(g=d.before(c.file,c.inputElem),typeof g=="object"){if(g.action==="abort")return i="AbortError",j=c.file,k=c.inputElem,l=g.reason,void(b(d.error)&&d.error({name:i},j,k,l));if(g.action==="skip")return void f();typeof g.config=="object"&&(c.instanceConfig=h.extend(c.instanceConfig,g.config))}else if(g==="skip")return void f();m=c.instanceConfig.complete,c.instanceConfig.complete=function(a){b(m)&&m(a,c.file,c.inputElem),f()},a.parse(c.file,c.instanceConfig)}else b(d.complete)&&d.complete()}function f(){e.splice(0,1),g()}});function d(d){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(b){var a=o(b);a.chunkSize=parseInt(a.chunkSize),b.step||b.chunk||(a.chunkSize=null),this._handle=new s(a),(this._handle.streamer=this)._config=a}.call(this,d),this.parseChunk=function(i,j){var f,g,d,h,e;if(this.isFirstChunk&&b(this._config.beforeFirstChunk)&&(f=this._config.beforeFirstChunk(i),f!==void 0&&(i=f)),this.isFirstChunk=!1,this._halted=!1,g=this._partialLine+i,this._partialLine="",d=this._handle.parse(g,this._baseIndex,!this._finished),!this._handle.paused()&&!this._handle.aborted()){if(h=d.meta.cursor,this._finished||(this._partialLine=g.substring(h-this._baseIndex),this._baseIndex=h),d&&d.data&&(this._rowCount+=d.data.length),e=this._finished||this._config.preview&&this._rowCount>=this._config.preview,n)c.postMessage({results:d,workerId:a.WORKER_ID,finished:e});else if(b(this._config.chunk)&&!j){if(this._config.chunk(d,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);d=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(d.data),this._completeResults.errors=this._completeResults.errors.concat(d.errors),this._completeResults.meta=d.meta),this._completed||!e||!b(this._config.complete)||d&&d.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),e||d&&d.meta.paused||this._nextChunk(),d}this._halted=!0},this._sendError=function(d){b(this._config.error)?this._config.error(d):n&&this._config.error&&c.postMessage({workerId:a.WORKER_ID,error:d,finished:!1})}}function j(c){var b;(c=c||{}).chunkSize||(c.chunkSize=a.RemoteChunkSize),d.call(this,c),this._nextChunk=f?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(a){this._input=a,this._nextChunk()},this._readChunk=function(){var a,c,d;if(this._finished)this._chunkLoaded();else{if(b=new XMLHttpRequest,this._config.withCredentials&&(b.withCredentials=this._config.withCredentials),f||(b.onload=e(this._chunkLoaded,this),b.onerror=e(this._chunkError,this)),b.open(this._config.downloadRequestBody?"POST":"GET",this._input,!f),this._config.downloadRequestHeaders){a=this._config.downloadRequestHeaders;for(c in a)b.setRequestHeader(c,a[c])}this._config.chunkSize&&(d=this._start+this._config.chunkSize-1,b.setRequestHeader("Range","bytes="+this._start+"-"+d));try{b.send(this._config.downloadRequestBody)}catch(a){this._chunkError(a.message)}f&&b.status===0&&this._chunkError()}},this._chunkLoaded=function(){b.readyState===4&&(b.status<200||400<=b.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:b.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(b){var a=b.getResponseHeader("Content-Range");return a===null?-1:parseInt(a.substring(a.lastIndexOf("/")+1))}(b),this.parseChunk(b.responseText)))},this._chunkError=function(a){var c=b.statusText||a;this._sendError(new Error(c))}}function k(c){var b,f,g;(c=c||{}).chunkSize||(c.chunkSize=a.LocalChunkSize),d.call(this,c),g=typeof FileReader!="undefined",this.stream=function(a){this._input=a,f=a.slice||a.webkitSlice||a.mozSlice,g?((b=new FileReader).onload=e(this._chunkLoaded,this),b.onerror=e(this._chunkError,this)):b=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var a=this._input,c,d;this._config.chunkSize&&(c=Math.min(this._start+this._config.chunkSize,this._input.size),a=f.call(a,this._start,c)),d=b.readAsText(a,this._config.encoding),g||this._chunkLoaded({target:{result:d}})},this._chunkLoaded=function(a){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(a.target.result)},this._chunkError=function(){this._sendError(b.error)}}function i(b){var a;d.call(this,b=b||{}),this.stream=function(b){return a=b,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var b,c=this._config.chunkSize;return c?(b=a.substring(0,c),a=a.substring(c)):(b=a,a=""),this._finished=!a,this.parseChunk(b)}}}function l(c){d.call(this,c=c||{});var a=[],b=!0,f=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(a){this._input=a,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){f&&a.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),a.length?this.parseChunk(a.shift()):b=!0},this._streamData=e(function(c){try{a.push(typeof c=="string"?c:c.toString(this._config.encoding)),b&&(b=!1,this._checkIsFinished(),this.parseChunk(a.shift()))}catch(a){this._streamError(a)}},this),this._streamError=e(function(a){this._streamCleanUp(),this._sendError(a)},this),this._streamEnd=e(function(){this._streamCleanUp(),f=!0,this._streamData("")},this),this._streamCleanUp=e(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function s(c){var h,f,i,u=Math.pow(2,53),x=-u,z=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,v=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,j=this,r=0,n=0,k=!1,s=!1,e=[],d={data:[],errors:[],meta:{}},w;b(c.step)&&(w=c.step,c.step=function(a){if(d=a,l())m();else{if(m(),d.data.length===0)return;r+=a.data.length,c.preview&&r>c.preview?f.abort():(d.data=d.data[0],w(d,j))}});function t(a){return c.skipEmptyLines==="greedy"?a.join("").trim()==="":a.length===1&&a[0].length===0}function m(){if(d&&i&&(q("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),i=!1),c.skipEmptyLines)for(var f=0;f<d.data.length;f++)t(d.data[f])&&d.data.splice(f--,1);return l()&&function(){if(!d)return;function f(a,d){b(c.transformHeader)&&(a=c.transformHeader(a,d)),e.push(a)}if(Array.isArray(d.data[0])){for(var a=0;l()&&a<d.data.length;a++)d.data[a].forEach(f);d.data.splice(0,1)}else d.data.forEach(f)}(),function(){if(!d||!c.header&&!c.dynamicTyping&&!c.transform)return d;function a(g,h){var a,f=c.header?{}:[],b,d;for(a=0;a<g.length;a++)b=a,d=g[a],c.header&&(b=a>=e.length?"__parsed_extra":e[a]),c.transform&&(d=c.transform(d,b)),d=y(b,d),b==="__parsed_extra"?(f[b]=f[b]||[],f[b].push(d)):f[b]=d;return c.header&&(a>e.length?q("FieldMismatch","TooManyFields","Too many fields: expected "+e.length+" fields but parsed "+a,n+h):a<e.length&&q("FieldMismatch","TooFewFields","Too few fields: expected "+e.length+" fields but parsed "+a,n+h)),f}var b=1;return!d.data.length||Array.isArray(d.data[0])?(d.data=d.data.map(a),b=d.data.length):d.data=a(d.data,0),c.header&&d.meta&&(d.meta.fields=e),n+=b,d}()}function l(){return c.header&&e.length===0}function y(d,a){return b=d,c.dynamicTypingFunction&&c.dynamicTyping[b]===void 0&&(c.dynamicTyping[b]=c.dynamicTypingFunction(b)),(c.dynamicTyping[b]||c.dynamicTyping)===!0?a==="true"||a==="TRUE"||a!=="false"&&a!=="FALSE"&&(function(a){if(z.test(a)){var b=parseFloat(a);if(x<b&&b<u)return!0}return!1}(a)?parseFloat(a):v.test(a)?new Date(a):a===""?null:a):a;var b}function q(c,e,f,a){var b={type:c,code:e,message:f};a!==void 0&&(b.row=a),d.errors.push(b)}this.parse=function(e,n,q){var r=c.quoteChar||'"',j,l;return c.newline||(c.newline=function(b,i){var f,a,d,h,e,c;if(b=b.substring(0,1048576),f=new RegExp(g(i)+"([^]*?)"+g(i),"gm"),a=(b=b.replace(f,"")).split("\r"),d=b.split("\n"),h=1<d.length&&d[0].length<a[0].length,a.length===1||h)return"\n";for(e=0,c=0;c<a.length;c++)a[c][0]==="\n"&&e++;return e>=a.length/2?"\r\n":"\r"}(e,r)),i=!1,c.delimiter?b(c.delimiter)&&(c.delimiter=c.delimiter(e),d.meta.delimiter=c.delimiter):(j=function(u,s,r,q,g){var j,k,b,m,l,n,i,e,o,d,h,f;g=g||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(l=0;l<g.length;l++){n=g[l],i=0,e=0,o=0,b=void 0;for(d=new p({comments:q,delimiter:n,newline:s,preview:10}).parse(u),h=0;h<d.data.length;h++)r&&t(d.data[h])?o++:(f=d.data[h].length,e+=f,b!==void 0?0<f&&(i+=Math.abs(f-b),b=f):b=f);0<d.data.length&&(e/=d.data.length-o),(k===void 0||i<=k)&&(m===void 0||m<e)&&1.99<e&&(k=i,j=n,m=e)}return{successful:!!(c.delimiter=j),bestDelimiter:j}}(e,c.newline,c.skipEmptyLines,c.comments,c.delimitersToGuess),j.successful?c.delimiter=j.bestDelimiter:(i=!0,c.delimiter=a.DefaultDelimiter),d.meta.delimiter=c.delimiter),l=o(c),c.preview&&c.header&&l.preview++,h=e,f=new p(l),d=f.parse(h,n,q),m(),k?{meta:{paused:!0}}:d||{meta:{paused:!1}}},this.paused=function(){return k},this.pause=function(){k=!0,f.abort(),h=b(c.chunk)?"":h.substring(f.getCharIndex())},this.resume=function(){j.streamer._halted?(k=!1,j.streamer.parseChunk(h,!0)):setTimeout(j.resume,3)},this.aborted=function(){return s},this.abort=function(){s=!0,f.abort(),d.meta.aborted=!0,b(c.complete)&&c.complete(d),h=""}}function g(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function p(h){var e,d=(h=h||{}).delimiter,f=h.newline,i=h.comments,m=h.step,j=h.preview,n=h.fastMode,k=e=h.quoteChar===void 0?'"':h.quoteChar,c,l;if(h.escapeChar!==void 0&&(k=h.escapeChar),(typeof d!="string"||-1<a.BAD_DELIMITERS.indexOf(d))&&(d=","),i===d)throw new Error("Comment character same as delimiter");i===!0?i="#":(typeof i!="string"||-1<a.BAD_DELIMITERS.indexOf(i))&&(i=!1),f!=="\n"&&f!=="\r"&&f!=="\r\n"&&(f="\n"),c=0,l=!1,this.parse=function(a,N,G){var E,B,u,I,v,s,w,q,H,y,t,o,p,C,h,x,F,A;if(typeof a!="string")throw new Error("Input must be a string");if(E=a.length,B=d.length,u=f.length,I=i.length,v=b(m),s=[],w=[],q=[],H=c=0,!a)return r();if(n||n!==!1&&a.indexOf(e)===-1){for(y=a.split(f),t=0;t<y.length;t++){if(q=y[t],c+=q.length,t!==y.length-1)c+=f.length;else if(G)return r();if(!i||q.substring(0,I)!==i){if(v){if(s=[],z(q.split(d)),D(),l)return r()}else z(q.split(d));if(j&&j<=t)return s=s.slice(0,j),r(!0)}}return r()}for(o=a.indexOf(d,c),p=a.indexOf(f,c),C=new RegExp(g(k)+g(e),"g"),h=a.indexOf(e,c);;)if(a[c]!==e){if(i&&q.length===0&&a.substring(c,c+I)===i){if(p===-1)return r();c=p+u,p=a.indexOf(f,c),o=a.indexOf(d,c)}else{if(o!==-1&&(o<p||p===-1)){if(!(o<h)){q.push(a.substring(c,o)),c=o+B,o=a.indexOf(d,c);continue}if(x=M(o,h,p),x&&x.nextDelim!==void 0){o=x.nextDelim,h=x.quoteSearch,q.push(a.substring(c,o)),c=o+B,o=a.indexOf(d,c);continue}}if(p===-1)break;if(q.push(a.substring(c,p)),K(p+u),v&&(D(),l))return r();if(j&&s.length>=j)return r(!0)}}else for(h=c,c++;;){if((h=a.indexOf(e,h+1))===-1)return G||w.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:s.length,index:c}),J();if(h===E-1)return J(a.substring(c,h).replace(C,e));if(e!==k||a[h+1]!==k){if(e===k||h===0||a[h-1]!==k){if(o!==-1&&o<h+1&&(o=a.indexOf(d,h+1)),p!==-1&&p<h+1&&(p=a.indexOf(f,h+1)),F=L(p===-1?o:Math.min(o,p)),a[h+1+F]===d){q.push(a.substring(c,h).replace(C,e)),a[c=h+1+F+B]!==e&&(h=a.indexOf(e,c)),o=a.indexOf(d,c),p=a.indexOf(f,c);break}if(A=L(p),a.substring(h+1+A,h+1+A+u)===f){if(q.push(a.substring(c,h).replace(C,e)),K(h+1+A+u),o=a.indexOf(d,c),h=a.indexOf(e,c),v&&(D(),l))return r();if(j&&s.length>=j)return r(!0);break}w.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:s.length,index:c}),h++}}else h++}return J();function z(a){s.push(a),H=c}function L(c){var d=0,b;return c!==-1&&(b=a.substring(h+1,c),b&&b.trim()===""&&(d=b.length)),d}function J(b){return G||(b===void 0&&(b=a.substring(c)),q.push(b),c=E,z(q),v&&D()),r()}function K(b){c=b,z(q),q=[],p=a.indexOf(f,c)}function r(a){return{data:s,errors:w,meta:{delimiter:d,linebreak:f,aborted:l,truncated:!!a,cursor:H+(N||0)}}}function D(){m(r()),s=[],w=[]}function M(f,g,h){var c={nextDelim:void 0,quoteSearch:void 0},b=a.indexOf(e,g+1),i;if(g<f&&f<b&&(b<h||h===-1)){if(i=a.indexOf(d,b),i===-1)return c;b<i&&(b=a.indexOf(e,b+1)),c=M(i,b,h)}else c={nextDelim:f,quoteSearch:g};return c}},this.abort=function(){l=!0},this.getCharIndex=function(){return c}}function t(g){var a=g.data,c=m[a.workerId],d=!1,f,e;if(a.error)c.userError(a.error,a.file);else if(a.results&&a.results.data)if(f={abort:function(){d=!0,q(a.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:r,resume:r},b(c.userStep)){for(e=0;e<a.results.data.length&&(c.userStep({data:a.results.data[e],errors:a.results.errors,meta:a.results.meta},f),!d);e++);delete a.results}else b(c.userChunk)&&(c.userChunk(a.results,f,a.file),delete a.results);a.finished&&!d&&q(a.workerId,a.results)}function q(c,d){var a=m[c];b(a.userComplete)&&a.userComplete(d),a.terminate(),delete m[c]}function r(){throw new Error("Not implemented.")}function o(a){var b,c;if(typeof a!="object"||a===null)return a;b=Array.isArray(a)?[]:{};for(c in a)b[c]=o(a[c]);return b}function e(a,b){return function(){a.apply(b,arguments)}}function b(a){return typeof a=="function"}return n&&(c.onmessage=function(e){var b=e.data,d;a.WORKER_ID===void 0&&b&&(a.WORKER_ID=b.workerId),typeof b.input=="string"?c.postMessage({workerId:a.WORKER_ID,results:a.parse(b.input,b.config),finished:!0}):(c.File&&b.input instanceof File||b.input instanceof Object)&&(d=a.parse(b.input,b.config),d&&c.postMessage({workerId:a.WORKER_ID,results:d,finished:!0}))}),(j.prototype=Object.create(d.prototype)).constructor=j,(k.prototype=Object.create(d.prototype)).constructor=k,(i.prototype=Object.create(i.prototype)).constructor=i,(l.prototype=Object.create(d.prototype)).constructor=l,a})}}),ag=ah(ae()),b,h,l,d,c,v,k,f,q,j,I,a,V,B,X,U,p,Q,r,D,s,S,A,ab,Z,u,o,H,E,K,y,g,t,G,R,M,z,J,n,N,m,x,T,L,Y,aa,_,C,w,F,O,al,ac,W,aC;"use strict",b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(d){var b,e,f,a,c;if(this==null)throw new TypeError('"this" is null or not defined');if(b=Object(this),e=b.length>>>0,typeof d!="function")throw new TypeError("predicate must be a function");for(f=arguments[1],a=0;a<e;){if(c=b[a],d.call(f,c,a,b))return a;a++}return-1}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(d){var b,e,f,a,c;if(this==null)throw new TypeError('"this" is null or not defined');if(b=Object(this),e=b.length>>>0,typeof d!="function")throw new TypeError("predicate must be a function");for(f=arguments[1],a=0;a<e;){if(c=b[a],d.call(f,c,a,b))return c;a++}}}),String.prototype.includes||(String.prototype.includes=function(b,a){"use strict";if(b instanceof RegExp)throw TypeError("first argument must not be a RegExp");return a===void 0&&(a=0),this.indexOf(b,a)!==-1}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,f){var d,b,c,a;if(this==null)throw new TypeError('"this" is null or not defined');if(d=Object(this),b=d.length>>>0,b===0)return!1;c=f|0,a=Math.max(c>=0?c:b-Math.abs(c),0);function g(a,b){return a===b||typeof a=="number"&&typeof b=="number"&&isNaN(a)&&isNaN(b)}while(a<b){if(g(d[a],e))return!0;a++}return!1}}),typeof Object.assign!="function"&&Object.defineProperty(Object,"assign",{value:function(d,f){"use strict";var e,c,a,b;if(d===null||d===void 0)throw new TypeError("Cannot convert undefined or null to object");e=Object(d);for(c=1;c<arguments.length;c++)if(a=arguments[c],a!==null&&a!==void 0)for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&(e[b]=a[b]);return e},writable:!0,configurable:!0}),h=function(a){this.table=a,this.blockHozScrollEvent=!1,this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.rowManager=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.element.insertBefore(this.headersElement,this.element.firstChild)},h.prototype.createHeadersElement=function(){var a=document.createElement("div");return a.classList.add("tabulator-headers"),a},h.prototype.createHeaderElement=function(){var a=document.createElement("div");return a.classList.add("tabulator-header"),this.table.options.headerVisible||a.classList.add("tabulator-header-hidden"),a},h.prototype.initialize=function(){var a=this},h.prototype.setRowManager=function(a){this.rowManager=a},h.prototype.getElement=function(){return this.element},h.prototype.getHeadersElement=function(){return this.headersElement},h.prototype.scrollHorizontal=function(a){var b=0,c=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=a,a>c?(b=a-c,this.element.style.marginLeft=-b+"px"):this.element.style.marginLeft=0,this.scrollLeft=a,this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.scrollHorizontal()},h.prototype.generateColumnsFromRowData=function(f){var d=[],a=this.table.options.autoColumnsDefinitions,g,c,h,i,e;if(f&&f.length){g=f[0];for(h in g){switch(i={field:h,title:h},e=g[h],typeof e=="undefined"?"undefined":b(e)){case"undefined":c="string";break;case"boolean":c="boolean";break;case"object":Array.isArray(e)?c="array":c="string";break;default:!isNaN(e)&&e!==""?c="number":e.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?c="alphanum":c="string";break}i.sorter=c,d.push(i)}if(a)switch(typeof a=="undefined"?"undefined":b(a)){case"function":this.table.options.columns=a.call(this.table,d);break;case"object":Array.isArray(a)?d.forEach(function(b){var c=a.find(function(a){return a.field===b.field});c&&Object.assign(b,c)}):d.forEach(function(b){a[b.field]&&Object.assign(b,a[b.field])}),this.table.options.columns=d;break}else this.table.options.columns=d;this.setColumns(this.table.options.columns)}},h.prototype.setColumns=function(b,c){for(var a=this;a.headersElement.firstChild;)a.headersElement.removeChild(a.headersElement.firstChild);a.columns=[],a.columnsByIndex=[],a.columnsByField={},a.table.modExists("frozenColumns")&&a.table.modules.frozenColumns.reset(),b.forEach(function(b,c){a._addColumn(b)}),a._reIndexColumns(),a.table.options.responsiveLayout&&a.table.modExists("responsiveLayout",!0)&&a.table.modules.responsiveLayout.initialize(),this.table.options.virtualDomHoz&&this.table.vdomHoz.reinitialize(!1,!0),a.redraw(!0)},h.prototype._addColumn=function(i,g,b){var a=new d(i,this),f=a.getElement(),h=b&&this.findColumnIndex(b),e,c;return b&&h>-1?(e=this.columns.indexOf(b.getTopColumn()),c=b.getElement(),g?(this.columns.splice(e,0,a),c.parentNode.insertBefore(f,c)):(this.columns.splice(e+1,0,a),c.parentNode.insertBefore(f,c.nextSibling))):(g?(this.columns.unshift(a),this.headersElement.insertBefore(a.getElement(),this.headersElement.firstChild)):(this.columns.push(a),this.headersElement.appendChild(a.getElement())),a.columnRendered()),a},h.prototype.registerColumnField=function(a){a.definition.field&&(this.columnsByField[a.definition.field]=a)},h.prototype.registerColumnPosition=function(a){this.columnsByIndex.push(a)},h.prototype._reIndexColumns=function(){this.columnsByIndex=[],this.columns.forEach(function(a){a.reRegisterPosition()})},h.prototype._verticalAlignHeaders=function(){var a=this,b=0;a.columns.forEach(function(c){var a;c.clearVerticalAlign(),a=c.getHeight(),a>b&&(b=a)}),a.columns.forEach(function(c){c.verticalAlign(a.table.options.columnHeaderVertAlign,b)}),a.rowManager.adjustTableSize()},h.prototype.findColumn=function(a){var c=this,e;if((typeof a=="undefined"?"undefined":b(a))=="object"){{if(a instanceof d)return a;if(a instanceof l)return a._getSelf()||!1;if(typeof HTMLElement!="undefined"&&a instanceof HTMLElement)return e=c.columns.find(function(b){return b.element===a}),e||!1}}else return this.columnsByField[a]||!1;return!1},h.prototype.getColumnByField=function(a){return this.columnsByField[a]},h.prototype.getColumnsByFieldRoot=function(b){var c=this,a=[];return Object.keys(this.columnsByField).forEach(function(d){var e=d.split(".")[0];e===b&&a.push(c.columnsByField[d])}),a},h.prototype.getColumnByIndex=function(a){return this.columnsByIndex[a]},h.prototype.getFirstVisibileColumn=function(a){var a=this.columnsByIndex.findIndex(function(a){return a.visible});return a>-1&&this.columnsByIndex[a]},h.prototype.getColumns=function(){return this.columns},h.prototype.findColumnIndex=function(a){return this.columnsByIndex.findIndex(function(b){return a===b})},h.prototype.getRealColumns=function(){return this.columnsByIndex},h.prototype.traverse=function(a){var b=this;b.columnsByIndex.forEach(function(b,c){a(b,c)})},h.prototype.getDefinitions=function(a){var c=this,b=[];return c.columnsByIndex.forEach(function(c){(!a||a&&c.visible)&&b.push(c.getDefinition())}),b},h.prototype.getDefinitionTree=function(){var b=this,a=[];return b.columns.forEach(function(b){a.push(b.getDefinition(!0))}),a},h.prototype.getComponents=function(c){var a=this,b=[],d=c?a.columns:a.columnsByIndex;return d.forEach(function(a){b.push(a.getComponent())}),b},h.prototype.getWidth=function(){var a=0;return this.columnsByIndex.forEach(function(b){b.visible&&(a+=b.getWidth())}),a},h.prototype.moveColumn=function(b,a,c){this.moveColumnActual(b,a,c),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows),a.element.parentNode.insertBefore(b.element,a.element),c&&a.element.parentNode.insertBefore(a.element,b.element),this._verticalAlignHeaders(),this.table.rowManager.reinitialize()},h.prototype.moveColumnActual=function(a,b,c){a.parent.isGroup?this._moveColumnInArray(a.parent.columns,a,b,c):this._moveColumnInArray(this.columns,a,b,c),this._moveColumnInArray(this.columnsByIndex,a,b,c,!0),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this.table.options.virtualDomHoz&&this.table.vdomHoz.reinitialize(!0),this.table.options.columnMoved&&this.table.options.columnMoved.call(this.table,a.getComponent(),this.table.columnManager.getComponents()),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns")},h.prototype._moveColumnInArray=function(c,e,i,f,g){var h=this,d=c.indexOf(e),b=[],a;d>-1&&(c.splice(d,1),a=c.indexOf(i),a>-1?f&&(a=a+1):a=d,c.splice(a,0,e),g&&(this.table.options.dataTree&&this.table.modExists("dataTree",!0)&&this.table.rowManager.rows.forEach(function(a){b=b.concat(h.table.modules.dataTree.getTreeChildren(a,!1,!0))}),b=b.concat(this.table.rowManager.rows),b.forEach(function(b){if(b.cells.length){var c=b.cells.splice(d,1)[0];b.cells.splice(a,0,c)}})))},h.prototype.scrollToColumn=function(h,g,e){var a=this,b=0,f=0,d=0,c=h.getElement();return new Promise(function(i,j){if(typeof g=="undefined"&&(g=a.table.options.scrollToColumnPosition),typeof e=="undefined"&&(e=a.table.options.scrollToColumnIfVisible),h.visible){switch(g){case"middle":case"center":d=-a.element.clientWidth/2;break;case"right":d=c.clientWidth-a.headersElement.clientWidth;break}if(!e)if(f=c.offsetLeft,f>0&&f+c.offsetWidth<a.element.clientWidth)return!1;b=c.offsetLeft+d,b=Math.max(Math.min(b,a.table.rowManager.element.scrollWidth-a.table.rowManager.element.clientWidth),0),a.table.rowManager.scrollHorizontal(b),a.scrollHorizontal(b),i()}else console.warn("Scroll Error - Column not visible"),j("Scroll Error - Column not visible")})},h.prototype.generateCells=function(b){var c=this,a=[];return c.columnsByIndex.forEach(function(c){a.push(c.generateCell(b))}),a},h.prototype.getFlexBaseWidth=function(){var a=this,b=a.table.element.clientWidth,c=0;return a.rowManager.element.scrollHeight>a.rowManager.element.clientHeight&&(b-=a.rowManager.element.offsetWidth-a.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(f){var d,g,e;f.visible&&(d=f.definition.width||0,g=typeof f.minWidth=="undefined"?a.table.options.columnMinWidth:parseInt(f.minWidth),typeof d=="string"?d.indexOf("%")>-1?e=b/100*parseInt(d):e=parseInt(d):e=d,c+=e>g?e:g)}),c},h.prototype.addColumn=function(b,c,d){var a=this;return new Promise(function(f,g){var e=a._addColumn(b,c,d);a._reIndexColumns(),a.table.options.responsiveLayout&&a.table.modExists("responsiveLayout",!0)&&a.table.modules.responsiveLayout.initialize(),a.table.modExists("columnCalcs")&&a.table.modules.columnCalcs.recalc(a.table.rowManager.activeRows),a.redraw(!0),a.table.modules.layout.getMode()!="fitColumns"&&e.reinitializeWidth(),a._verticalAlignHeaders(),a.table.rowManager.reinitialize(),a.table.options.virtualDomHoz&&a.table.vdomHoz.reinitialize(),f(e)})},h.prototype.deregisterColumn=function(b){var c=b.getField(),a;c&&delete this.columnsByField[c],a=this.columnsByIndex.indexOf(b),a>-1&&this.columnsByIndex.splice(a,1),a=this.columns.indexOf(b),a>-1&&this.columns.splice(a,1),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this._verticalAlignHeaders(),this.redraw()},h.prototype.redraw=function(b){b&&(a.prototype.helpers.elVisible(this.element)&&this._verticalAlignHeaders(),this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),["fitColumns","fitDataStretch"].indexOf(this.table.modules.layout.getMode())>-1?this.table.modules.layout.layout():b?this.table.modules.layout.layout():this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout(),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows),b&&(this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns"),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.redraw()),this.table.footerManager.redraw()},l=function(a){this._column=a,this.type="ColumnComponent"},l.prototype.getElement=function(){return this._column.getElement()},l.prototype.getDefinition=function(){return this._column.getDefinition()},l.prototype.getField=function(){return this._column.getField()},l.prototype.getCells=function(){var a=[];return this._column.cells.forEach(function(b){a.push(b.getComponent())}),a},l.prototype.getVisibility=function(){return console.warn("getVisibility function is deprecated, you should now use the isVisible function"),this._column.visible},l.prototype.isVisible=function(){return this._column.visible},l.prototype.show=function(){this._column.isGroup?this._column.columns.forEach(function(a){a.show()}):this._column.show()},l.prototype.hide=function(){this._column.isGroup?this._column.columns.forEach(function(a){a.hide()}):this._column.hide()},l.prototype.toggle=function(){this._column.visible?this.hide():this.show()},l.prototype.delete=function(){return this._column.delete()},l.prototype.getSubColumns=function(){var a=[];return this._column.columns.length&&this._column.columns.forEach(function(b){a.push(b.getComponent())}),a},l.prototype.getParentColumn=function(){return this._column.parent instanceof d&&this._column.parent.getComponent()},l.prototype._getSelf=function(){return this._column},l.prototype.scrollTo=function(){return this._column.table.columnManager.scrollToColumn(this._column)},l.prototype.getTable=function(){return this._column.table},l.prototype.headerFilterFocus=function(){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.setHeaderFilterFocus(this._column)},l.prototype.reloadHeaderFilter=function(){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.reloadHeaderFilter(this._column)},l.prototype.getHeaderFilterValue=function(){if(this._column.table.modExists("filter",!0))return this._column.table.modules.filter.getHeaderFilterValue(this._column)},l.prototype.setHeaderFilterValue=function(a){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.setHeaderFilterValue(this._column,a)},l.prototype.move=function(b,c){var a=this._column.table.columnManager.findColumn(b);a?this._column.table.columnManager.moveColumn(this._column,a,c):console.warn("Move Error - No matching column found:",a)},l.prototype.getNextColumn=function(){var a=this._column.nextColumn();return!!a&&a.getComponent()},l.prototype.getPrevColumn=function(){var a=this._column.prevColumn();return!!a&&a.getComponent()},l.prototype.updateDefinition=function(a){return this._column.updateDefinition(a)},l.prototype.getWidth=function(){return this._column.getWidth()},l.prototype.setWidth=function(b){var a;return b===!0?a=this._column.reinitializeWidth(!0):a=this._column.setWidth(b),this._column.table.options.virtualDomHoz&&this._column.table.vdomHoz.reinitialize(!0),a},l.prototype.validate=function(){return this._column.validate()},d=function d(a,b){var c=this;this.table=b.table,this.definition=a,this.parent=b,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleFormatterRendered=!1,this.setField(this.definition.field),this.table.options.invalidOptionWarnings&&this.checkDefinition(),this.modules={},this.cellEvents={cellClick:!1,cellDblClick:!1,cellContext:!1,cellTap:!1,cellDblTap:!1,cellTapHold:!1,cellMouseEnter:!1,cellMouseLeave:!1,cellMouseOver:!1,cellMouseOut:!1,cellMouseMove:!1},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this._mapDepricatedFunctionality(),a.columns?(this.isGroup=!0,a.columns.forEach(function(a,e){var b=new d(a,c);c.attachColumn(b)}),c.checkColumnVisibility()):b.registerColumnField(this),a.rowHandle&&this.table.options.movableRows!==!1&&this.table.modExists("moveRow")&&this.table.modules.moveRow.setHandle(!0),this._buildHeader(),this.bindModuleColumns()},d.prototype.createElement=function(){var a=document.createElement("div");return a.classList.add("tabulator-col"),a.setAttribute("role","columnheader"),a.setAttribute("aria-sort","none"),a},d.prototype.createGroupElement=function(){var a=document.createElement("div");return a.classList.add("tabulator-col-group-cols"),a},d.prototype.checkDefinition=function(){var a=this;Object.keys(this.definition).forEach(function(b){a.defaultOptionList.indexOf(b)===-1&&console.warn("Invalid column definition option in '"+(a.field||a.definition.title)+"' column:",b)})},d.prototype.setField=function(a){this.field=a,this.fieldStructure=a?this.table.options.nestedFieldSeparator?a.split(this.table.options.nestedFieldSeparator):[a]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData},d.prototype.registerColumnPosition=function(a){this.parent.registerColumnPosition(a)},d.prototype.registerColumnField=function(a){this.parent.registerColumnField(a)},d.prototype.reRegisterPosition=function(){this.isGroup?this.columns.forEach(function(a){a.reRegisterPosition()}):this.registerColumnPosition(this)},d.prototype._mapDepricatedFunctionality=function(){typeof this.definition.hideInHtml!="undefined"&&(this.definition.htmlOutput=!this.definition.hideInHtml,console.warn("hideInHtml column definition property is deprecated, you should now use htmlOutput")),typeof this.definition.align!="undefined"&&(this.definition.hozAlign=this.definition.align,console.warn("align column definition property is deprecated, you should now use hozAlign")),typeof this.definition.downloadTitle!="undefined"&&(this.definition.titleDownload=this.definition.downloadTitle,console.warn("downloadTitle definition property is deprecated, you should now use titleDownload"))},d.prototype.setTooltip=function(){var a=this,c=a.definition,b=c.headerTooltip||c.tooltip===!1?c.headerTooltip:a.table.options.tooltipsHeader;b?b===!0?c.field?a.table.modules.localize.bind("columns|"+c.field,function(b){a.element.setAttribute("title",b||c.title)}):a.element.setAttribute("title",c.title):(typeof b=="function"&&(b=b(a.getComponent()),b===!1&&(b="")),a.element.setAttribute("title",b)):a.element.setAttribute("title","")},d.prototype._buildHeader=function(){for(var a=this,b=a.definition;a.element.firstChild;)a.element.removeChild(a.element.firstChild);b.headerVertical&&(a.element.classList.add("tabulator-col-vertical"),b.headerVertical==="flip"&&a.element.classList.add("tabulator-col-vertical-flip")),a.contentElement=a._bindEvents(),a.contentElement=a._buildColumnHeaderContent(),a.element.appendChild(a.contentElement),a.isGroup?a._buildGroupHeader():a._buildColumnHeader(),a.setTooltip(),a.table.options.resizableColumns&&a.table.modExists("resizeColumns")&&a.table.modules.resizeColumns.initializeColumn("header",a,a.element),b.headerFilter&&a.table.modExists("filter")&&a.table.modExists("edit")&&(typeof b.headerFilterPlaceholder!="undefined"&&b.field&&a.table.modules.localize.setHeaderFilterColumnPlaceholder(b.field,b.headerFilterPlaceholder),a.table.modules.filter.initializeColumn(a)),a.table.modExists("frozenColumns")&&a.table.modules.frozenColumns.initializeColumn(a),a.table.options.movableColumns&&!a.isGroup&&a.table.modExists("moveColumn")&&a.table.modules.moveColumn.initializeColumn(a),(b.topCalc||b.bottomCalc)&&a.table.modExists("columnCalcs")&&a.table.modules.columnCalcs.initializeColumn(a),a.table.modExists("persistence")&&a.table.modules.persistence.config.columns&&a.table.modules.persistence.initializeColumn(a),a.element.addEventListener("mouseenter",function(b){a.setTooltip()})},d.prototype._bindEvents=function(){var b=this,a=b.definition,c,d,e;typeof a.headerClick=="function"&&b.element.addEventListener("click",function(c){a.headerClick(c,b.getComponent())}),typeof a.headerDblClick=="function"&&b.element.addEventListener("dblclick",function(c){a.headerDblClick(c,b.getComponent())}),typeof a.headerContext=="function"&&b.element.addEventListener("contextmenu",function(c){a.headerContext(c,b.getComponent())}),typeof a.headerTap=="function"&&(e=!1,b.element.addEventListener("touchstart",function(a){e=!0},{passive:!0}),b.element.addEventListener("touchend",function(c){e&&a.headerTap(c,b.getComponent()),e=!1})),typeof a.headerDblTap=="function"&&(c=null,b.element.addEventListener("touchend",function(d){c?(clearTimeout(c),c=null,a.headerDblTap(d,b.getComponent())):c=setTimeout(function(){clearTimeout(c),c=null},300)})),typeof a.headerTapHold=="function"&&(d=null,b.element.addEventListener("touchstart",function(c){clearTimeout(d),d=setTimeout(function(){clearTimeout(d),d=null,e=!1,a.headerTapHold(c,b.getComponent())},1e3)},{passive:!0}),b.element.addEventListener("touchend",function(a){clearTimeout(d),d=null})),typeof a.cellClick=="function"&&(b.cellEvents.cellClick=a.cellClick),typeof a.cellDblClick=="function"&&(b.cellEvents.cellDblClick=a.cellDblClick),typeof a.cellContext=="function"&&(b.cellEvents.cellContext=a.cellContext),typeof a.cellMouseEnter=="function"&&(b.cellEvents.cellMouseEnter=a.cellMouseEnter),typeof a.cellMouseLeave=="function"&&(b.cellEvents.cellMouseLeave=a.cellMouseLeave),typeof a.cellMouseOver=="function"&&(b.cellEvents.cellMouseOver=a.cellMouseOver),typeof a.cellMouseOut=="function"&&(b.cellEvents.cellMouseOut=a.cellMouseOut),typeof a.cellMouseMove=="function"&&(b.cellEvents.cellMouseMove=a.cellMouseMove),typeof a.cellTap=="function"&&(b.cellEvents.cellTap=a.cellTap),typeof a.cellDblTap=="function"&&(b.cellEvents.cellDblTap=a.cellDblTap),typeof a.cellTapHold=="function"&&(b.cellEvents.cellTapHold=a.cellTapHold),typeof a.cellEdited=="function"&&(b.cellEvents.cellEdited=a.cellEdited),typeof a.cellEditing=="function"&&(b.cellEvents.cellEditing=a.cellEditing),typeof a.cellEditCancelled=="function"&&(b.cellEvents.cellEditCancelled=a.cellEditCancelled)},d.prototype._buildColumnHeader=function(){var d=this,a=this.definition,c=this.table,f,e;c.modExists("sort")&&c.modules.sort.initializeColumn(this,this.titleHolderElement),(a.headerContextMenu||a.headerClickMenu||a.headerMenu)&&c.modExists("menu")&&c.modules.menu.initializeColumnHeader(this),c.modExists("format")&&c.modules.format.initializeColumn(this),typeof a.editor!="undefined"&&c.modExists("edit")&&c.modules.edit.initializeColumn(this),typeof a.validator!="undefined"&&c.modExists("validate")&&c.modules.validate.initializeColumn(this),c.modExists("mutator")&&c.modules.mutator.initializeColumn(this),c.modExists("accessor")&&c.modules.accessor.initializeColumn(this),b(c.options.responsiveLayout)&&c.modExists("responsiveLayout")&&c.modules.responsiveLayout.initializeColumn(this),typeof a.visible!="undefined"&&(a.visible?this.show(!0):this.hide(!0)),a.cssClass&&(e=a.cssClass.split(" "),e.forEach(function(a){d.element.classList.add(a)})),a.field&&this.element.setAttribute("tabulator-field",a.field),this.setMinWidth(typeof a.minWidth=="undefined"?this.table.options.columnMinWidth:parseInt(a.minWidth)),(a.maxWidth||this.table.options.columnMaxWidth)&&a.maxWidth!==!1&&this.setMaxWidth(typeof a.maxWidth=="undefined"?this.table.options.columnMaxWidth:parseInt(a.maxWidth)),this.reinitializeWidth(),this.tooltip=this.definition.tooltip||this.definition.tooltip===!1?this.definition.tooltip:this.table.options.tooltips,this.hozAlign=typeof this.definition.hozAlign=="undefined"?this.table.options.cellHozAlign:this.definition.hozAlign,this.vertAlign=typeof this.definition.vertAlign=="undefined"?this.table.options.cellVertAlign:this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign||this.table.options.headerHozAlign},d.prototype._buildColumnHeaderContent=function(){var b=this.definition,c=this.table,a=document.createElement("div");return a.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),a.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),a},d.prototype._buildColumnHeaderTitle=function(){var c=this,a=c.definition,e=c.table,d=document.createElement("div"),f,b;return d.classList.add("tabulator-col-title"),a.editableTitle?(b=document.createElement("input"),b.classList.add("tabulator-title-editor"),b.addEventListener("click",function(a){a.stopPropagation(),b.focus()}),b.addEventListener("change",function(){a.title=b.value,e.options.columnTitleChanged.call(c.table,c.getComponent())}),d.appendChild(b),a.field?e.modules.localize.bind("columns|"+a.field,function(c){b.value=c||a.title||"&nbsp;"}):b.value=a.title||"&nbsp;"):a.field?e.modules.localize.bind("columns|"+a.field,function(b){c._formatColumnHeaderTitle(d,b||a.title||"&nbsp;")}):c._formatColumnHeaderTitle(d,a.title||"&nbsp;"),d},d.prototype._formatColumnHeaderTitle=function(c,e){var i=this,f,a,d,g,h;if(this.definition.titleFormatter&&this.table.modExists("format"))switch(f=this.table.modules.format.getFormatter(this.definition.titleFormatter),h=function(a){i.titleFormatterRendered=a},g={getValue:function(){return e},getElement:function(){return c}},d=this.definition.titleFormatterParams||{},d=typeof d=="function"?d():d,a=f.call(this.table.modules.format,g,d,h),typeof a=="undefined"?"undefined":b(a)){case"object":a instanceof Node?c.appendChild(a):(c.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",a));break;case"undefined":case"null":c.innerHTML="";break;default:c.innerHTML=a}else c.innerHTML=e},d.prototype._buildGroupHeader=function(){var a=this,b;this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass&&(b=this.definition.cssClass.split(" "),b.forEach(function(b){a.element.classList.add(b)})),(this.definition.headerContextMenu||this.definition.headerMenu)&&this.table.modExists("menu")&&this.table.modules.menu.initializeColumnHeader(this),this.titleElement.style.textAlign=this.definition.headerHozAlign||this.table.options.headerHozAlign,this.element.appendChild(this.groupElement)},d.prototype._getFlatData=function(a){return a[this.field]},d.prototype._getNestedData=function(e){for(var a=e,c=this.fieldStructure,f=c.length,b=0,d;b<f;b++)if(a=a[c[b]],d=a,!a)break;return d},d.prototype._setFlatData=function(a,b){this.field&&(a[this.field]=b)},d.prototype._setNestedData=function(f,d){for(var b=f,c=this.fieldStructure,e=c.length,a=0;a<e;a++)if(a==e-1)b[c[a]]=d;else{if(!b[c[a]])if(typeof d!="undefined")b[c[a]]={};else break;b=b[c[a]]}},d.prototype.attachColumn=function(b){var a=this;a.groupElement?(a.columns.push(b),a.groupElement.appendChild(b.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")},d.prototype.verticalAlign=function(a,c){var b=this.parent.isGroup?this.parent.getGroupElement().clientHeight:c||this.parent.getHeadersElement().clientHeight;this.element.style.height=b+"px",this.isGroup&&(this.groupElement.style.minHeight=b-this.contentElement.offsetHeight+"px"),!this.isGroup&&a!=="top"&&(a==="bottom"?this.element.style.paddingTop=this.element.clientHeight-this.contentElement.offsetHeight+"px":this.element.style.paddingTop=(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach(function(b){b.verticalAlign(a)})},d.prototype.clearVerticalAlign=function(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(a){a.clearVerticalAlign()})},d.prototype.bindModuleColumns=function(){this.definition.formatter=="rownum"&&(this.table.rowManager.rowNumColumn=this)},d.prototype.getElement=function(){return this.element},d.prototype.getGroupElement=function(){return this.groupElement},d.prototype.getField=function(){return this.field},d.prototype.getFirstColumn=function(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this},d.prototype.getLastColumn=function(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this},d.prototype.getColumns=function(){return this.columns},d.prototype.getCells=function(){return this.cells},d.prototype.getTopColumn=function(){return this.parent.isGroup?this.parent.getTopColumn():this},d.prototype.getDefinition=function(b){var a=[];return this.isGroup&&b&&(this.columns.forEach(function(b){a.push(b.getDefinition(!0))}),this.definition.columns=a),this.definition},d.prototype.checkColumnVisibility=function(){var a=!1;this.columns.forEach(function(b){b.visible&&(a=!0)}),a?(this.show(),this.parent.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!1)):this.hide()},d.prototype.show=function(a,b){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(a){a.show()}),!this.isGroup&&this.width===null&&this.reinitializeWidth(),this.table.columnManager._verticalAlignHeaders(),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns"),!b&&this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.updateColumnVisibility(this,this.visible),a||this.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),!this.silent&&this.table.options.virtualDomHoz&&this.table.vdomHoz.reinitialize())},d.prototype.hide=function(a,b){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager._verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(a){a.hide()}),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns"),!b&&this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.updateColumnVisibility(this,this.visible),a||this.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),!this.silent&&this.table.options.virtualDomHoz&&this.table.vdomHoz.reinitialize())},d.prototype.matchChildWidths=function(){var a=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(b){b.visible&&(a+=b.getWidth())}),this.contentElement.style.maxWidth=a-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())},d.prototype.removeChild=function(b){var a=this.columns.indexOf(b);a>-1&&this.columns.splice(a,1),this.columns.length||this.delete()},d.prototype.setWidth=function(a){this.widthFixed=!0,this.setWidthActual(a)},d.prototype.setWidthActual=function(a){isNaN(a)&&(a=Math.floor(this.table.element.clientWidth/100*parseInt(a))),a=Math.max(this.minWidth,a),this.maxWidth&&(a=Math.min(this.maxWidth,a)),this.width=a,this.widthStyled=a?a+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(a){a.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()},d.prototype.checkCellHeights=function(){var a=[];this.cells.forEach(function(b){b.row.heightInitialized&&(b.row.getElement().offsetParent!==null?(a.push(b.row),b.row.clearCellHeight()):b.row.heightInitialized=!1)}),a.forEach(function(a){a.calcHeight()}),a.forEach(function(a){a.setCellHeight()})},d.prototype.getWidth=function(){var a=0;return this.isGroup?this.columns.forEach(function(b){b.visible&&(a+=b.getWidth())}):a=this.width,a},d.prototype.getHeight=function(){return this.element.offsetHeight},d.prototype.setMinWidth=function(a){this.minWidth=a,this.minWidthStyled=a?a+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(a){a.setMinWidth()})},d.prototype.setMaxWidth=function(a){this.maxWidth=a,this.maxWidthStyled=a?a+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(a){a.setMaxWidth()})},d.prototype.delete=function(){var a=this;return new Promise(function(c,e){var f,d,b;a.isGroup&&a.columns.forEach(function(a){a.delete()}),a.table.modExists("edit")&&a.table.modules.edit.currentCell.column===a&&a.table.modules.edit.cancelEdit(),d=a.cells.length;for(b=0;b<d;b++)a.cells[0].delete();a.element.parentNode&&a.element.parentNode.removeChild(a.element),a.element=!1,a.contentElement=!1,a.titleElement=!1,a.groupElement=!1,a.parent.isGroup&&a.parent.removeChild(a),a.table.columnManager.deregisterColumn(a),a.table.options.virtualDomHoz&&a.table.vdomHoz.reinitialize(!0),c()})},d.prototype.columnRendered=function(){this.titleFormatterRendered&&this.titleFormatterRendered()},d.prototype.validate=function(){var a=[];return this.cells.forEach(function(b){b.validate()||a.push(b.getComponent())}),!a.length||a},d.prototype.generateCell=function(b){var c=this,a=new j(c,b);return this.cells.push(a),a},d.prototype.nextColumn=function(){var a=this.table.columnManager.findColumnIndex(this);return a>-1&&this._nextVisibleColumn(a+1)},d.prototype._nextVisibleColumn=function(b){var a=this.table.columnManager.getColumnByIndex(b);return!a||a.visible?a:this._nextVisibleColumn(b+1)},d.prototype.prevColumn=function(){var a=this.table.columnManager.findColumnIndex(this);return a>-1&&this._prevVisibleColumn(a-1)},d.prototype._prevVisibleColumn=function(b){var a=this.table.columnManager.getColumnByIndex(b);return!a||a.visible?a:this._prevVisibleColumn(b-1)},d.prototype.reinitializeWidth=function(a){this.widthFixed=!1,typeof this.definition.width!="undefined"&&!a&&this.setWidth(this.definition.width),this.table.modExists("filter")&&this.table.modules.filter.hideHeaderFilterElements(),this.fitToData(),this.table.modExists("filter")&&this.table.modules.filter.showHeaderFilterElements()},d.prototype.fitToData=function(){var a=this,b;this.widthFixed||(this.element.style.width="",a.cells.forEach(function(a){a.clearWidth()})),b=this.element.offsetWidth,(!a.width||!this.widthFixed)&&(a.cells.forEach(function(c){var a=c.getWidth();a>b&&(b=a)}),b&&a.setWidthActual(b+1))},d.prototype.updateDefinition=function(b){var a=this;return new Promise(function(e,d){var c;a.isGroup?(console.warn("Column Update Error - The updateDefinition function is only available on ungrouped columns"),d("Column Update Error - The updateDefinition function is only available on columns, not column groups")):a.parent.isGroup?(console.warn("Column Update Error - The updateDefinition function is only available on ungrouped columns"),d("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(c=Object.assign({},a.getDefinition()),c=Object.assign(c,b),a.table.columnManager.addColumn(c,!1,a).then(function(b){c.field==a.field&&(a.field=!1),a.delete().then(function(){e(b.getComponent())}).catch(function(a){d(a)})}).catch(function(a){d(a)}))})},d.prototype.deleteCell=function(b){var a=this.cells.indexOf(b);a>-1&&this.cells.splice(a,1)},d.prototype.defaultOptionList=["title","field","columns","visible","align","hozAlign","vertAlign","width","minWidth","maxWidth","widthGrow","widthShrink","resizable","frozen","responsive","tooltip","cssClass","rowHandle","hideInHtml","print","htmlOutput","sorter","sorterParams","formatter","formatterParams","variableHeight","editable","editor","editorParams","validator","mutator","mutatorParams","mutatorData","mutatorDataParams","mutatorEdit","mutatorEditParams","mutatorClipboard","mutatorClipboardParams","accessor","accessorParams","accessorData","accessorDataParams","accessorDownload","accessorDownloadParams","accessorClipboard","accessorClipboardParams","accessorPrint","accessorPrintParams","accessorHtmlOutput","accessorHtmlOutputParams","clipboard","download","downloadTitle","topCalc","topCalcParams","topCalcFormatter","topCalcFormatterParams","bottomCalc","bottomCalcParams","bottomCalcFormatter","bottomCalcFormatterParams","cellClick","cellDblClick","cellContext","cellTap","cellDblTap","cellTapHold","cellMouseEnter","cellMouseLeave","cellMouseOver","cellMouseOut","cellMouseMove","cellEditing","cellEdited","cellEditCancelled","headerSort","headerSortStartingDir","headerSortTristate","headerClick","headerDblClick","headerContext","headerTap","headerDblTap","headerTapHold","headerTooltip","headerVertical","headerHozAlign","editableTitle","titleFormatter","titleFormatterParams","headerFilter","headerFilterPlaceholder","headerFilterParams","headerFilterEmptyCheck","headerFilterFunc","headerFilterFuncParams","headerFilterLiveFilter","print","headerContextMenu","headerMenu","contextMenu","clickMenu","formatterPrint","formatterPrintParams","formatterClipboard","formatterClipboardParams","formatterHtmlOutput","formatterHtmlOutputParams","titlePrint","titleClipboard","titleHtmlOutput","titleDownload"],d.prototype.getComponent=function(){return this.component||(this.component=new l(this)),this.component},c=function(a){this.table=a,this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.columnManager=null,this.height=0,this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[],this.rowNumColumn=!1,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRederInPosition=!1},c.prototype.createHolderElement=function(){var a=document.createElement("div");return a.classList.add("tabulator-tableHolder"),a.setAttribute("tabindex",0),a},c.prototype.createTableElement=function(){var a=document.createElement("div");return a.classList.add("tabulator-table"),a},c.prototype.getElement=function(){return this.element},c.prototype.getTableElement=function(){return this.tableElement},c.prototype.getRowPosition=function(a,b){return b?this.activeRows.indexOf(a):this.rows.indexOf(a)},c.prototype.setColumnManager=function(a){this.columnManager=a},c.prototype.initialize=function(){var a=this;a.setRenderMode(),a.element.appendChild(a.tableElement),a.firstRender=!0,a.element.addEventListener("scroll",function(){var b=a.element.scrollLeft;a.scrollLeft!=b&&(a.columnManager.scrollHorizontal(b),a.table.options.groupBy&&a.table.modules.groupRows.scrollHeaders(b),a.table.modExists("columnCalcs")&&a.table.modules.columnCalcs.scrollHorizontal(b),a.table.options.scrollHorizontal(b)),a.scrollLeft=b}),this.renderMode==="virtual"&&a.element.addEventListener("scroll",function(){var b=a.element.scrollTop,c=a.scrollTop>b;a.scrollTop!=b?(a.scrollTop=b,a.scrollVertical(c),a.table.options.ajaxProgressiveLoad=="scroll"&&a.table.modules.ajax.nextPage(a.element.scrollHeight-a.element.clientHeight-b),a.table.options.scrollVertical(b)):a.scrollTop=b})},c.prototype.findRow=function(a){var c=this,d,e;if((typeof a=="undefined"?"undefined":b(a))=="object"){{if(a instanceof f)return a;if(a instanceof k)return a._getSelf()||!1;if(typeof HTMLElement!="undefined"&&a instanceof HTMLElement)return d=c.rows.find(function(b){return b.getElement()===a}),d||!1}}else return!(typeof a=="undefined"||a===null)&&(e=c.rows.find(function(b){return b.data[c.table.options.index]==a}),e||!1);return!1},c.prototype.getRowFromDataObject=function(a){var b=this.rows.find(function(b){return b.data===a});return b||!1},c.prototype.getRowFromPosition=function(a,b){return b?this.activeRows[a]:this.rows[a]},c.prototype.scrollToRow=function(i,d,g){var b=this,e=this.getDisplayRows().indexOf(i),c=i.getElement(),h=0,f;return new Promise(function(i,j){if(e>-1){if(typeof d=="undefined"&&(d=b.table.options.scrollToRowPosition),typeof g=="undefined"&&(g=b.table.options.scrollToRowIfVisible),d==="nearest")switch(b.renderMode){case"classic":f=a.prototype.helpers.elOffset(c).top,d=Math.abs(b.element.scrollTop-f)>Math.abs(b.element.scrollTop+b.element.clientHeight-f)?"bottom":"top";break;case"virtual":d=Math.abs(b.vDomTop-e)>Math.abs(b.vDomBottom-e)?"bottom":"top";break}if(!g)if(a.prototype.helpers.elVisible(c))if(h=a.prototype.helpers.elOffset(c).top-a.prototype.helpers.elOffset(b.element).top,h>0&&h<b.element.clientHeight-c.offsetHeight)return!1;switch(b.renderMode){case"classic":b.element.scrollTop=a.prototype.helpers.elOffset(c).top-a.prototype.helpers.elOffset(b.element).top+b.element.scrollTop;break;case"virtual":b._virtualRenderFill(e,!0);break}switch(d){case"middle":case"center":b.element.scrollHeight-b.element.scrollTop==b.element.clientHeight?b.element.scrollTop=b.element.scrollTop+(c.offsetTop-b.element.scrollTop)-(b.element.scrollHeight-c.offsetTop)/2:b.element.scrollTop=b.element.scrollTop-b.element.clientHeight/2;break;case"bottom":b.element.scrollHeight-b.element.scrollTop==b.element.clientHeight?b.element.scrollTop=b.element.scrollTop-(b.element.scrollHeight-c.offsetTop)+c.offsetHeight:b.element.scrollTop=b.element.scrollTop-b.element.clientHeight+c.offsetHeight;break}i()}else console.warn("Scroll Error - Row not visible"),j("Scroll Error - Row not visible")})},c.prototype.setData=function(b,d,e){var a=this,c=this;return new Promise(function(f,g){d&&a.getDisplayRows().length?c.table.options.pagination?c._setDataActual(b,!0):a.reRenderInPosition(function(){c._setDataActual(b)}):(a.table.options.autoColumns&&e&&a.table.columnManager.generateColumnsFromRowData(b),a.resetScroll(),a._setDataActual(b)),f()})},c.prototype._setDataActual=function(a,d){var c=this;c.table.options.dataLoading.call(this.table,a),this._wipeElements(),this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.clear(),Array.isArray(a)?(this.table.modExists("selectRow")&&this.table.modules.selectRow.clearSelectionData(),this.table.options.reactiveData&&this.table.modExists("reactiveData",!0)&&this.table.modules.reactiveData.watchData(a),a.forEach(function(a,e){if(a&&(typeof a=="undefined"?"undefined":b(a))==="object"){var d=new f(a,c);c.rows.push(d)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",a)}),c.refreshActiveData(!1,!1,d),c.table.options.dataLoaded.call(this.table,a)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",typeof a=="undefined"?"undefined":b(a),"\nData:     ",a)},c.prototype._wipeElements=function(){this.rows.forEach(function(a){a.wipe()}),this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.wipe(),this.rows=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.adjustTableSize()},c.prototype.deleteRow=function(a,d){var b=this.rows.indexOf(a),c=this.activeRows.indexOf(a);c>-1&&this.activeRows.splice(c,1),b>-1&&this.rows.splice(b,1),this.setActiveRows(this.activeRows),this.displayRowIterator(function(b){var c=b.indexOf(a);c>-1&&b.splice(c,1)}),d||this.reRenderInPosition(),this.regenerateRowNumbers(),this.table.options.rowDeleted.call(this.table,a.getComponent()),this.table.options.dataChanged&&this.table.options.dataChanged.call(this.table,this.getData()),this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.updateGroupRows(!0):this.table.options.pagination&&this.table.modExists("page")?this.refreshActiveData(!1,!1,!0):this.table.options.pagination&&this.table.modExists("page")&&this.refreshActiveData("page")},c.prototype.addRow=function(a,b,c,e){var d=this.addRowActual(a,b,c,e);return this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("rowAdd",d,{data:a,pos:b,index:c}),d},c.prototype.addRows=function(b,c,d){var a=this,f=this,g=0,e=[];return new Promise(function(h,i){c=a.findAddRowPos(c),Array.isArray(b)||(b=[b]),g=b.length-1,(typeof d=="undefined"&&c||typeof d!="undefined"&&!c)&&b.reverse(),b.forEach(function(a,g){var b=f.addRow(a,c,d,!0);e.push(b)}),a.table.options.groupBy&&a.table.modExists("groupRows")?a.table.modules.groupRows.updateGroupRows(!0):a.table.options.pagination&&a.table.modExists("page")?a.refreshActiveData(!1,!1,!0):a.reRenderInPosition(),a.table.modExists("columnCalcs")&&a.table.modules.columnCalcs.recalc(a.table.rowManager.activeRows),a.regenerateRowNumbers(),h(e)})},c.prototype.findAddRowPos=function(a){return typeof a=="undefined"&&(a=this.table.options.addRowPos),a==="pos"&&(a=!0),a==="bottom"&&(a=!1),a},c.prototype.addRowActual=function(i,j,b,k){var a=i instanceof f?i:new f(i||{},this),c=this.findAddRowPos(j),g=-1,h,e,d;return!b&&this.table.options.pagination&&this.table.options.paginationAddRow=="page"&&(e=this.getDisplayRows(),c?e.length?b=e[0]:this.activeRows.length&&(b=this.activeRows[this.activeRows.length-1],c=!1):e.length&&(b=e[e.length-1],c=!(e.length<this.table.modules.page.getPageSize()))),typeof b!="undefined"&&(b=this.findRow(b)),this.table.options.groupBy&&this.table.modExists("groupRows")&&(this.table.modules.groupRows.assignRowToGroup(a),d=a.getGroup().rows,d.length>1&&(!b||b&&d.indexOf(b)==-1?c?d[0]!==a&&(b=d[0],this._moveRowInArray(a.getGroup().rows,a,b,!c)):d[d.length-1]!==a&&(b=d[d.length-1],this._moveRowInArray(a.getGroup().rows,a,b,!c)):this._moveRowInArray(a.getGroup().rows,a,b,!c))),b&&(g=this.rows.indexOf(b)),b&&g>-1?(h=this.activeRows.indexOf(b),this.displayRowIterator(function(e){var d=e.indexOf(b);d>-1&&e.splice(c?d:d+1,0,a)}),h>-1&&this.activeRows.splice(c?h:h+1,0,a),this.rows.splice(c?g:g+1,0,a)):c?(this.displayRowIterator(function(b){b.unshift(a)}),this.activeRows.unshift(a),this.rows.unshift(a)):(this.displayRowIterator(function(b){b.push(a)}),this.activeRows.push(a),this.rows.push(a)),this.setActiveRows(this.activeRows),this.table.options.rowAdded.call(this.table,a.getComponent()),this.table.options.dataChanged&&this.table.options.dataChanged.call(this.table,this.getData()),k||this.reRenderInPosition(),a},c.prototype.moveRow=function(a,b,c){this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("rowMove",a,{posFrom:this.getRowPosition(a),posTo:this.getRowPosition(b),to:b,after:c}),this.moveRowActual(a,b,c),this.regenerateRowNumbers(),this.table.options.rowMoved.call(this.table,a.getComponent())},c.prototype.moveRowActual=function(b,a,c){var f=this,d,e;this._moveRowInArray(this.rows,b,a,c),this._moveRowInArray(this.activeRows,b,a,c),this.displayRowIterator(function(d){f._moveRowInArray(d,b,a,c)}),this.table.options.groupBy&&this.table.modExists("groupRows")&&(!c&&a instanceof g&&(a=this.table.rowManager.prevDisplayRow(b)||a),d=a.getGroup(),e=b.getGroup(),d===e?this._moveRowInArray(d.rows,b,a,c):(e&&e.removeRow(b),d.insertRow(b,a,c)))},c.prototype._moveRowInArray=function(a,d,h,i){var b,c,f,g,e;if(d!==h)if(b=a.indexOf(d),b>-1&&(a.splice(b,1),c=a.indexOf(h),c>-1?i?a.splice(c+1,0,d):a.splice(c,0,d):a.splice(b,0,d)),a===this.getDisplayRows()){f=b<c?b:c,g=c>b?c:b+1;for(e=f;e<=g;e++)a[e]&&this.styleRow(a[e],e)}},c.prototype.clearData=function(){this.setData([])},c.prototype.getRowIndex=function(a){return this.findRowIndex(a,this.rows)},c.prototype.getDisplayRowIndex=function(b){var a=this.getDisplayRows().indexOf(b);return a>-1&&a},c.prototype.nextDisplayRow=function(c,d){var b=this.getDisplayRowIndex(c),a=!1;return b!==!1&&b<this.displayRowsCount-1&&(a=this.getDisplayRows()[b+1]),a&&(!(a instanceof f)||a.type!="row")?this.nextDisplayRow(a,d):a},c.prototype.prevDisplayRow=function(d,b){var c=this.getDisplayRowIndex(d),a=!1;return c&&(a=this.getDisplayRows()[c-1]),b&&a&&(!(a instanceof f)||a.type!="row")?this.prevDisplayRow(a,b):a},c.prototype.findRowIndex=function(a,c){var b;if(a=this.findRow(a),a)if(b=c.indexOf(a),b>-1)return b;return!1},c.prototype.getData=function(b,c){var a=[],d=this.getRows(b);return d.forEach(function(b){b.type=="row"&&a.push(b.getData(c||"data"))}),a},c.prototype.getComponents=function(b){var a=[],c=this.getRows(b);return c.forEach(function(b){a.push(b.getComponent())}),a},c.prototype.getDataCount=function(a){var b=this.getRows(a);return b.length},c.prototype._genRemoteRequest=function(){var e=this,a=this.table,c=a.options,b={},d,f;a.modExists("page")&&(c.ajaxSorting&&(d=this.table.modules.sort.getSort(),d.forEach(function(a){delete a.column}),b[this.table.modules.page.paginationDataSentNames.sorters]=d),c.ajaxFiltering&&(f=this.table.modules.filter.getFilters(!0,!0),b[this.table.modules.page.paginationDataSentNames.filters]=f),this.table.modules.ajax.setParams(b,!0)),a.modules.ajax.sendRequest().then(function(a){e._setDataActual(a,!0)}).catch(function(a){})},c.prototype.filterRefresh=function(){var a=this.table,b=a.options,c=this.scrollLeft;b.ajaxFiltering?b.pagination=="remote"&&a.modExists("page")?(a.modules.page.reset(!0),a.modules.page.setPage(1).then(function(){}).catch(function(){})):b.ajaxProgressiveLoad?a.modules.ajax.loadData().then(function(){}).catch(function(){}):this._genRemoteRequest():this.refreshActiveData("filter"),this.scrollHorizontal(c)},c.prototype.sorterRefresh=function(c){var a=this.table,b=this.table.options,d=this.scrollLeft;b.ajaxSorting?(b.pagination=="remote"||b.progressiveLoad)&&a.modExists("page")?(a.modules.page.reset(!0),a.modules.page.setPage(1).then(function(){}).catch(function(){})):b.ajaxProgressiveLoad?a.modules.ajax.loadData().then(function(){}).catch(function(){}):this._genRemoteRequest():this.refreshActiveData(c?"filter":"sort"),this.scrollHorizontal(d)},c.prototype.scrollHorizontal=function(a){this.scrollLeft=a,this.element.scrollLeft=a,this.table.options.groupBy&&this.table.modules.groupRows.scrollHeaders(a),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.scrollHorizontal(a)},c.prototype.refreshActiveData=function(f,e,g){var d=this,b=this.table,h=["all","filter","sort","display","freeze","group","tree","page"],c;if(this.redrawBlock){(!this.redrawBlockRestoreConfig||h.indexOf(f)<h.indexOf(this.redrawBlockRestoreConfig.stage))&&(this.redrawBlockRestoreConfig={stage:f,skipStage:e,renderInPosition:g});return}switch(d.table.modExists("edit")&&d.table.modules.edit.cancelEdit(),f||(f="all"),b.options.selectable&&!b.options.selectablePersistence&&b.modExists("selectRow")&&b.modules.selectRow.deselectRows(),f){case"all":case"filter":e?e=!1:b.modExists("filter")?d.setActiveRows(b.modules.filter.filter(d.rows)):d.setActiveRows(d.rows.slice(0));case"sort":e?e=!1:b.modExists("sort")&&b.modules.sort.sort(this.activeRows),this.regenerateRowNumbers();case"display":this.resetDisplayRows();case"freeze":e?e=!1:this.table.modExists("frozenRows")&&b.modules.frozenRows.isFrozen()&&(b.modules.frozenRows.getDisplayIndex()||b.modules.frozenRows.setDisplayIndex(this.getNextDisplayIndex()),c=b.modules.frozenRows.getDisplayIndex(),c=d.setDisplayRows(b.modules.frozenRows.getRows(this.getDisplayRows(c-1)),c),c!==!0&&b.modules.frozenRows.setDisplayIndex(c));case"group":e?e=!1:b.options.groupBy&&b.modExists("groupRows")&&(b.modules.groupRows.getDisplayIndex()||b.modules.groupRows.setDisplayIndex(this.getNextDisplayIndex()),c=b.modules.groupRows.getDisplayIndex(),c=d.setDisplayRows(b.modules.groupRows.getRows(this.getDisplayRows(c-1)),c),c!==!0&&b.modules.groupRows.setDisplayIndex(c));case"tree":e?e=!1:b.options.dataTree&&b.modExists("dataTree")&&(b.modules.dataTree.getDisplayIndex()||b.modules.dataTree.setDisplayIndex(this.getNextDisplayIndex()),c=b.modules.dataTree.getDisplayIndex(),c=d.setDisplayRows(b.modules.dataTree.getRows(this.getDisplayRows(c-1)),c),c!==!0&&b.modules.dataTree.setDisplayIndex(c)),b.options.pagination&&b.modExists("page")&&!g&&b.modules.page.getMode()=="local"&&b.modules.page.reset();case"page":e?e=!1:b.options.pagination&&b.modExists("page")&&(b.modules.page.getDisplayIndex()||b.modules.page.setDisplayIndex(this.getNextDisplayIndex()),c=b.modules.page.getDisplayIndex(),b.modules.page.getMode()=="local"&&b.modules.page.setMaxRows(this.getDisplayRows(c-1).length),c=d.setDisplayRows(b.modules.page.getRows(this.getDisplayRows(c-1)),c),c!==!0&&b.modules.page.setDisplayIndex(c))}a.prototype.helpers.elVisible(d.element)&&(g?d.reRenderInPosition():(f==="all"&&this.table.options.virtualDomHoz&&this.table.vdomHoz.dataChange(),d.renderTable(),b.options.layoutColumnsOnNewData&&d.table.columnManager.redraw(!0))),b.modExists("columnCalcs")&&b.modules.columnCalcs.recalc(this.activeRows)},c.prototype.regenerateRowNumbers=function(){var a=this;this.rowNumColumn&&this.activeRows.forEach(function(c){var b=c.getCell(a.rowNumColumn);b&&b._generateContents()})},c.prototype.setActiveRows=function(a){this.activeRows=a,this.activeRowsCount=this.activeRows.length},c.prototype.resetDisplayRows=function(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length,this.table.modExists("frozenRows")&&this.table.modules.frozenRows.setDisplayIndex(0),this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.setDisplayIndex(0),this.table.options.pagination&&this.table.modExists("page")&&this.table.modules.page.setDisplayIndex(0)},c.prototype.getNextDisplayIndex=function(){return this.displayRows.length},c.prototype.setDisplayRows=function(c,a){var b=!0;return a&&typeof this.displayRows[a]!="undefined"?(this.displayRows[a]=c,b=!0):(this.displayRows.push(c),b=a=this.displayRows.length-1),a==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),b},c.prototype.getDisplayRows=function(a){return typeof a=="undefined"?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[a]||[]},c.prototype.getVisibleRows=function(h){var g=this.element.scrollTop,e=this.element.clientHeight+g,f=!1,d=0,c=0,b=this.getDisplayRows(),a;if(h){{this.getDisplayRows();for(a=this.vDomTop;a<=this.vDomBottom;a++)if(b[a])if(f)if(e-b[a].getElement().offsetTop>=0)c=a;else break;else if(g-b[a].getElement().offsetTop>=0)d=a;else if(f=!0,e-b[a].getElement().offsetTop>=0)c=a;else break}}else d=this.vDomTop,c=this.vDomBottom;return b.slice(d,c+1)},c.prototype.displayRowIterator=function(a){this.displayRows.forEach(a),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length},c.prototype.getRows=function(b){var a;switch(b){case"active":a=this.activeRows;break;case"display":a=this.table.rowManager.getDisplayRows();break;case"visible":a=this.getVisibleRows(!0);break;case"selected":a=this.table.modules.selectRow.selectedRows;break;default:a=this.rows}return a},c.prototype.reRenderInPosition=function(a){var h,d,c,g,f,b,e;if(this.getRenderMode()=="virtual")if(this.redrawBlock)a?a():this.redrawBlockRederInPosition=!0;else{h=this.element.scrollTop,d=!1,c=!1,g=this.scrollLeft,f=this.getDisplayRows();for(b=this.vDomTop;b<=this.vDomBottom;b++)if(f[b])if(e=h-f[b].getElement().offsetTop,c===!1||Math.abs(e)<c)c=e,d=b;else break;a&&a(),this._virtualRenderFill(d===!1?this.displayRowsCount-1:d,!0,c||0),this.scrollHorizontal(g)}else this.renderTable(),a&&a()},c.prototype.setRenderMode=function(){this.table.options.virtualDom?(this.renderMode="virtual",this.table.element.clientHeight||this.table.options.height?this.fixedHeight=!0:this.fixedHeight=!1):this.renderMode="classic"},c.prototype.getRenderMode=function(){return this.renderMode},c.prototype.renderTable=function(){switch(this.table.options.renderStarted.call(this.table),this.element.scrollTop=0,this.renderMode){case"classic":this._simpleRender();break;case"virtual":this._virtualRenderFill();break}this.firstRender&&(this.displayRowsCount?(this.firstRender=!1,this.table.modules.layout.layout()):this.renderEmptyScroll()),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout(),this.displayRowsCount||this.table.options.placeholder&&(this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.table.options.placeholder),this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px"),this.table.options.renderComplete.call(this.table)},c.prototype._simpleRender=function(){this._clearVirtualDom(),this.displayRowsCount?this.checkClassicModeGroupHeaderWidth():this.renderEmptyScroll()},c.prototype.checkClassicModeGroupHeaderWidth=function(){var a=this,b=this.tableElement,c=!0;a.getDisplayRows().forEach(function(d,e){a.styleRow(d,e),b.appendChild(d.getElement()),d.initialize(!0),d.type!=="group"&&(c=!1)}),c?b.style.minWidth=a.table.columnManager.getWidth()+"px":b.style.minWidth=""},c.prototype.renderEmptyScroll=function(){this.table.options.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"},c.prototype._clearVirtualDom=function(){var a=this.tableElement;for(this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder);a.firstChild;)a.removeChild(a.firstChild);a.style.paddingTop="",a.style.paddingBottom="",a.style.minWidth="",a.style.minHeight="",a.style.display="",a.style.visibility="",this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0},c.prototype.styleRow=function(b,c){var a=b.getElement();c%2?(a.classList.add("tabulator-row-even"),a.classList.remove("tabulator-row-odd")):(a.classList.add("tabulator-row-odd"),a.classList.remove("tabulator-row-even"))},c.prototype._virtualRenderFill=function(c,l,i){var b=this,d=b.tableElement,p=b.element,k=0,g=0,f=0,j=0,m=!0,q=b.getDisplayRows(),n,o,e,h;if(c=c||0,i=i||0,c){while(d.firstChild)d.removeChild(d.firstChild);n=(b.displayRowsCount-c+1)*b.vDomRowHeight,n<b.height&&(c-=Math.ceil((b.height-n)/b.vDomRowHeight),c<0&&(c=0)),k=Math.min(Math.max(Math.floor(b.vDomWindowBuffer/b.vDomRowHeight),b.vDomWindowMinMarginRows),c),c-=k}else b._clearVirtualDom();if(b.displayRowsCount&&a.prototype.helpers.elVisible(b.element)){for(b.vDomTop=c,b.vDomBottom=c-1;(g<=b.height+b.vDomWindowBuffer||j<b.vDomWindowMinTotalRows)&&b.vDomBottom<b.displayRowsCount-1;)o=b.vDomBottom+1,e=q[o],h=0,b.styleRow(e,o),d.appendChild(e.getElement()),e.initialize(),e.heightInitialized||e.normalizeHeight(!0),h=e.getHeight(),j<k?f+=h:g+=h,h>this.vDomWindowBuffer&&(this.vDomWindowBuffer=h*2),e.type!=="group"&&(m=!1),b.vDomBottom++,j++;c?(b.vDomTopPad=l?b.vDomRowHeight*this.vDomTop+i:b.scrollTop-f,b.vDomBottomPad=b.vDomBottom==b.displayRowsCount-1?0:Math.max(b.vDomScrollHeight-b.vDomTopPad-g-f,0)):(this.vDomTopPad=0,b.vDomRowHeight=Math.floor((g+f)/j),b.vDomBottomPad=b.vDomRowHeight*(b.displayRowsCount-b.vDomBottom-1),b.vDomScrollHeight=f+g+b.vDomBottomPad-b.height),d.style.paddingTop=b.vDomTopPad+"px",d.style.paddingBottom=b.vDomBottomPad+"px",l&&(this.scrollTop=b.vDomTopPad+f+i-(this.element.scrollWidth>this.element.clientWidth?this.element.offsetHeight-this.element.clientHeight:0)),this.scrollTop=Math.min(this.scrollTop,this.element.scrollHeight-this.height),this.element.scrollWidth>this.element.offsetWidth&&l&&(this.scrollTop+=this.element.offsetHeight-this.element.clientHeight),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,p.scrollTop=this.scrollTop,d.style.minWidth=m?b.table.columnManager.getWidth()+"px":"",b.table.options.groupBy&&b.table.modules.layout.getMode()!="fitDataFill"&&b.displayRowsCount==b.table.modules.groupRows.countGroups()&&(b.tableElement.style.minWidth=b.table.columnManager.getWidth())}else this.renderEmptyScroll();this.fixedHeight||this.adjustTableSize()},c.prototype.scrollVertical=function(d){var a=this.scrollTop-this.vDomScrollPosTop,b=this.scrollTop-this.vDomScrollPosBottom,c=this.vDomWindowBuffer*2,e;-a>c||b>c?(e=this.scrollLeft,this._virtualRenderFill(Math.floor(this.element.scrollTop/this.element.scrollHeight*this.displayRowsCount)),this.scrollHorizontal(e)):d?(a<0&&this._addTopRow(-a),b<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(-b):this.vDomScrollPosBottom=this.scrollTop)):(a>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(a):this.vDomScrollPosTop=this.scrollTop),b>=0&&this._addBottomRow(b))},c.prototype._addTopRow=function(b){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,d=this.tableElement,g=this.getDisplayRows(),c,a,e;this.vDomTop&&(c=this.vDomTop-1,a=g[c],e=a.getHeight()||this.vDomRowHeight,b>=e&&(this.styleRow(a,c),d.insertBefore(a.getElement(),d.firstChild),(!a.initialized||!a.heightInitialized)&&(this.vDomTopNewRows.push(a),a.heightInitialized||a.clearCellHeight()),a.initialize(),this.vDomTopPad-=e,this.vDomTopPad<0&&(this.vDomTopPad=c*this.vDomRowHeight),c||(this.vDomTopPad=0),d.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=e,this.vDomTop--),b=-(this.scrollTop-this.vDomScrollPosTop),a.getHeight()>this.vDomWindowBuffer&&(this.vDomWindowBuffer=a.getHeight()*2),f<this.vDomMaxRenderChain&&this.vDomTop&&b>=(g[this.vDomTop-1].getHeight()||this.vDomRowHeight)?this._addTopRow(b,f+1):this._quickNormalizeRowHeight(this.vDomTopNewRows))},c.prototype._removeTopRow=function(b){var e=this.tableElement,c=this.getDisplayRows()[this.vDomTop],a=c.getHeight()||this.vDomRowHeight,d;b>=a&&(d=c.getElement(),d.parentNode.removeChild(d),this.vDomTopPad+=a,e.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?a:a+this.vDomWindowBuffer,this.vDomTop++,b=this.scrollTop-this.vDomScrollPosTop,this._removeTopRow(b))},c.prototype._addBottomRow=function(b){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,f=this.tableElement,g=this.getDisplayRows(),c,a,d;this.vDomBottom<this.displayRowsCount-1&&(c=this.vDomBottom+1,a=g[c],d=a.getHeight()||this.vDomRowHeight,b>=d&&(this.styleRow(a,c),f.appendChild(a.getElement()),(!a.initialized||!a.heightInitialized)&&(this.vDomBottomNewRows.push(a),a.heightInitialized||a.clearCellHeight()),a.initialize(),this.vDomBottomPad-=d,(this.vDomBottomPad<0||c==this.displayRowsCount-1)&&(this.vDomBottomPad=0),f.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=d,this.vDomBottom++),b=this.scrollTop-this.vDomScrollPosBottom,a.getHeight()>this.vDomWindowBuffer&&(this.vDomWindowBuffer=a.getHeight()*2),e<this.vDomMaxRenderChain&&this.vDomBottom<this.displayRowsCount-1&&b>=(g[this.vDomBottom+1].getHeight()||this.vDomRowHeight)?this._addBottomRow(b,e+1):this._quickNormalizeRowHeight(this.vDomBottomNewRows))},c.prototype._removeBottomRow=function(a){var e=this.tableElement,d=this.getDisplayRows()[this.vDomBottom],b=d.getHeight()||this.vDomRowHeight,c;a>=b&&(c=d.getElement(),c.parentNode&&c.parentNode.removeChild(c),this.vDomBottomPad+=b,this.vDomBottomPad<0&&(this.vDomBottomPad=0),e.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=b,this.vDomBottom--,a=-(this.scrollTop-this.vDomScrollPosBottom),this._removeBottomRow(a))},c.prototype._quickNormalizeRowHeight=function(a){a.forEach(function(a){a.calcHeight()}),a.forEach(function(a){a.setCellHeight()}),a.length=0},c.prototype.normalizeHeight=function(){this.activeRows.forEach(function(a){a.normalizeHeight()})},c.prototype.adjustTableSize=function(){var c=this.element.clientHeight,b,a;this.renderMode==="virtual"&&(a=Math.floor(this.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0)),this.fixedHeight?(this.element.style.minHeight="calc(100% - "+a+"px)",this.element.style.height="calc(100% - "+a+"px)",this.element.style.maxHeight="calc(100% - "+a+"px)"):(this.element.style.height="",this.element.style.height=this.table.element.clientHeight-a+"px",this.element.scrollTop=this.scrollTop),this.height=this.element.clientHeight,this.vDomWindowBuffer=this.table.options.virtualDomBuffer||this.height,!this.fixedHeight&&c!=this.element.clientHeight&&(b=this.table.modExists("resizeTable"),(b&&!this.table.modules.resizeTable.autoResize||!b)&&this.redraw()))},c.prototype.reinitialize=function(){this.rows.forEach(function(a){a.reinitialize(!0)})},c.prototype.blockRedraw=function(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1},c.prototype.restoreRedraw=function(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.stage,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRederInPosition&&this.reRenderInPosition(),this.redrawBlockRederInPosition=!1},c.prototype.redraw=function(a){var c=0,b=this.scrollLeft;this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,a?this.renderTable():(this.renderMode=="classic"?this.table.options.groupBy?this.refreshActiveData("group",!1,!1):this._simpleRender():(this.reRenderInPosition(),this.scrollHorizontal(b)),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))},c.prototype.resetScroll=function(){if(this.element.scrollLeft=0,this.element.scrollTop=0,this.table.browser==="ie"){var a=document.createEvent("Event");a.initEvent("scroll",!1,!0),this.element.dispatchEvent(a)}else this.element.dispatchEvent(new Event("scroll"))},v=function(a){this.table=a,this.element=this.table.rowManager.tableElement,this.holderEl=this.table.rowManager.element,this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.window=200,this.initialized=!1,this.columns=[],this.compatabilityCheck()&&this.initialize()},v.prototype.compatabilityCheck=function(){var b=this.table.options,c=!1,a=!0;return b.layout=="fitDataTable"&&(console.warn("Horizontal Vitrual DOM is not compatible with fitDataTable layout mode"),a=!1),b.responsiveLayout&&(console.warn("Horizontal Vitrual DOM is not compatible with responsive columns"),a=!1),this.table.rtl&&(console.warn("Horizontal Vitrual DOM is not currently compatible with RTL text direction"),a=!1),b.columns&&(c=b.columns.find(function(a){return a.frozen}),c&&(console.warn("Horizontal Vitrual DOM is not compatible with frozen columns"),a=!1)),a||(b.virtualDomHoz=!1),a},v.prototype.initialize=function(){var a=this;this.holderEl.addEventListener("scroll",function(){var b=a.holderEl.scrollLeft;a.scrollLeft!=b&&(a.scrollLeft=b,a.scroll(b-(a.vDomScrollPosLeft+a.window)))})},v.prototype.deinitialize=function(){this.initialized=!1},v.prototype.clear=function(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0},v.prototype.dataChange=function(){var d=!1,e=0,a=0,g,b,c,f;if(this.table.options.layout==="fitData"){if(this.table.columnManager.columnsByIndex.forEach(function(a){!a.definition.width&&a.visible&&(d=!0)}),d)if(d&&this.table.rowManager.getDisplayRows().length)if(this.vDomScrollPosRight=this.scrollLeft+this.holderEl.clientWidth+this.window,this.table.options.groupBy?(g=this.table.modules.groupRows.getGroups(!1)[0],b=g.getRows(!1)[0]):b=this.table.rowManager.getDisplayRows()[0],b){c=b.getElement(),b.generateCells(),this.element.appendChild(c);for(a=0;a<b.cells.length;a++)if(f=b.cells[a],c.appendChild(f.getElement()),f.column.reinitializeWidth(),e+=f.column.getWidth(),e>this.vDomScrollPosRight)break;c.parentNode.removeChild(c),this.fitDataColAvg=Math.floor(e/(a+1));for(a;a<this.table.columnManager.columnsByIndex.length;a++)this.table.columnManager.columnsByIndex[a].setWidth(this.fitDataColAvg);this.reinitialize(!1,!0)}}else this.table.options.layout==="fitColumns"&&(this.table.modules.layout.layout(),this.table.vdomHoz.reinitialize(!1,!0))},v.prototype.fitDataLayoutOverride=function(){for(var a=this.leftCol;a<=this.rightCol;a++)this.columns[a].reinitializeWidth()},v.prototype.reinitialize=function(c,d){var a=this,e={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol},b;if(c&&!this.initialized)return;this.clear(),this.scrollLeft=this.holderEl.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.window,this.vDomScrollPosRight=this.scrollLeft+this.holderEl.clientWidth+this.window,b=0,this.table.columnManager.columnsByIndex.forEach(function(c){var e={},d;c.visible&&(d=c.getWidth(),e.leftPos=b,e.rightPos=b+d,b+d>a.vDomScrollPosLeft&&b<a.vDomScrollPosRight?(a.leftCol==-1&&(a.leftCol=a.columns.length,a.vDomPadLeft=b),a.rightCol=a.columns.length):a.leftCol!==-1&&(a.vDomPadRight+=d),a.columns.push(c),c.modules.vdomHoz=e,b+=d)}),this.element.style.paddingLeft=this.vDomPadLeft+"px",this.element.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,d||(!c||this.reinitChanged(e))&&this.renitializeRows(),this.holderEl.scrollLeft=this.scrollLeft},v.prototype.reinitChanged=function(a){var c=this,b=!0;return!!(a.cols.length!==this.columns.length||a.leftCol!==this.leftCol||a.rightCol!==this.rightCol)||(a.cols.forEach(function(a,d){a!==c.columns[d]&&(b=!1)}),!b)},v.prototype.renitializeRows=function(){var a=this,b=this.table.rowManager.getVisibleRows();b.forEach(function(b){a.reinitializeRow(b,!0)})},v.prototype.scroll=function(a){this.vDomScrollPosLeft+=a,this.vDomScrollPosRight+=a,a>this.holderEl.clientWidth*.8?this.reinitialize():a>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())},v.prototype.colPositionAdjust=function(d,e,b){for(var a=d,c;a<e;a++)c=this.columns[a],c.modules.vdomHoz.leftPos-=b,c.modules.vdomHoz.rightPos-=b},v.prototype.addColRight=function(){var a=this.columns[this.rightCol+1],d,c,b;a&&a.modules.vdomHoz.leftPos<=this.vDomScrollPosRight&&(d=this.table.rowManager.getVisibleRows(),d.forEach(function(b){if(b.type!=="group"){var c=b.getCell(a);b.getElement().appendChild(c.getElement()),c.cellRendered()}}),this.fitDataColAvg&&(c=a.getWidth(),c===this.fitDataColAvg&&(a.reinitializeWidth(),b=c-a.getWidth(),b&&(a.modules.vdomHoz.rightPos-=b,this.colPositionAdjust(this.rightCol+1,this.columns.length,b)))),this.rightCol++,this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=a.getWidth(),this.element.style.paddingRight=this.vDomPadRight+"px",this.addColRight())},v.prototype.addColLeft=function(){var a=this.columns[this.leftCol-1],b;a&&a.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft&&(b=this.table.rowManager.getVisibleRows(),b.forEach(function(b){if(b.type!=="group"){var c=b.getCell(a);b.getElement().prepend(c.getElement()),c.cellRendered()}}),this.leftCol?this.vDomPadLeft-=a.getWidth():this.vDomPadLeft=0,this.element.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol--,this.addColLeft())},v.prototype.removeColRight=function(a){var a=this.columns[this.rightCol],b;a&&a.modules.vdomHoz.leftPos>this.vDomScrollPosRight&&(b=this.table.rowManager.getVisibleRows(),a.modules.vdomHoz.visible=!1,b.forEach(function(b){if(b.type!=="group"){var c=b.getCell(a);b.getElement().removeChild(c.getElement())}}),this.vDomPadRight+=a.getWidth(),this.element.style.paddingRight=this.vDomPadRight+"px",this.rightCol--,this.removeColRight())},v.prototype.removeColLeft=function(){var a=this.columns[this.leftCol],b;a&&a.modules.vdomHoz.rightPos<this.vDomScrollPosLeft&&(b=this.table.rowManager.getVisibleRows(),b.forEach(function(b){if(b.type!=="group"){var c=b.getCell(a);b.getElement().removeChild(c.getElement())}}),this.vDomPadLeft+=a.getWidth(),this.element.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol++,this.removeColLeft())},v.prototype.initializeRow=function(a){var b,c,d;if(a.type!=="group"){a.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol};for(b=this.leftCol;b<=this.rightCol;b++)c=this.columns[b],c&&c.visible&&(d=a.getCell(c),a.getElement().appendChild(d.getElement()),d.cellRendered())}},v.prototype.reinitializeRow=function(a,c){if(a.type!=="group")if(c||!a.modules.vdomHoz||a.modules.vdomHoz.leftCol!==this.leftCol||a.modules.vdomHoz.rightCol!==this.rightCol){for(var b=a.getElement();b.firstChild;)b.removeChild(b.firstChild);this.initializeRow(a)}},k=function(a){this._row=a},k.prototype.getData=function(a){return this._row.getData(a)},k.prototype.getElement=function(){return this._row.getElement()},k.prototype.getCells=function(){var a=[];return this._row.getCells().forEach(function(b){a.push(b.getComponent())}),a},k.prototype.getCell=function(b){var a=this._row.getCell(b);return!!a&&a.getComponent()},k.prototype.getIndex=function(){return this._row.getData("data")[this._row.table.options.index]},k.prototype.getPosition=function(a){return this._row.table.rowManager.getRowPosition(this._row,a)},k.prototype.delete=function(){return this._row.delete()},k.prototype.scrollTo=function(){return this._row.table.rowManager.scrollToRow(this._row)},k.prototype.pageTo=function(){if(this._row.table.modExists("page",!0))return this._row.table.modules.page.setPageToRow(this._row)},k.prototype.move=function(a,b){this._row.moveToRow(a,b)},k.prototype.update=function(a){return this._row.updateData(a)},k.prototype.normalizeHeight=function(){this._row.normalizeHeight(!0)},k.prototype.select=function(){this._row.table.modules.selectRow.selectRows(this._row)},k.prototype.deselect=function(){this._row.table.modules.selectRow.deselectRows(this._row)},k.prototype.toggleSelect=function(){this._row.table.modules.selectRow.toggleRow(this._row)},k.prototype.isSelected=function(){return this._row.table.modules.selectRow.isRowSelected(this._row)},k.prototype._getSelf=function(){return this._row},k.prototype.validate=function(){return this._row.validate()},k.prototype.freeze=function(){this._row.table.modExists("frozenRows",!0)&&this._row.table.modules.frozenRows.freezeRow(this._row)},k.prototype.unfreeze=function(){this._row.table.modExists("frozenRows",!0)&&this._row.table.modules.frozenRows.unfreezeRow(this._row)},k.prototype.isFrozen=function(){if(this._row.table.modExists("frozenRows",!0)){var a=this._row.table.modules.frozenRows.rows.indexOf(this._row);return a>-1}return!1},k.prototype.treeCollapse=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.collapseRow(this._row)},k.prototype.treeExpand=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.expandRow(this._row)},k.prototype.treeToggle=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.toggleRow(this._row)},k.prototype.getTreeParent=function(){return!!this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.getTreeParent(this._row)},k.prototype.getTreeChildren=function(){return!!this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.getTreeChildren(this._row,!0)},k.prototype.addTreeChild=function(a,b,c){return!!this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.addTreeChildRow(this._row,a,b,c)},k.prototype.reformat=function(){return this._row.reinitialize()},k.prototype.getGroup=function(){return this._row.getGroup().getComponent()},k.prototype.getTable=function(){return this._row.table},k.prototype.getNextRow=function(){var a=this._row.nextRow();return a&&a.getComponent()},k.prototype.getPrevRow=function(){var a=this._row.prevRow();return a&&a.getComponent()},f=function(b,a){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"row";this.table=a.table,this.parent=a,this.data={},this.type=c,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.component=null,this.created=!1,this.setData(b)},f.prototype.create=function(){this.created||(this.created=!0,this.generateElement())},f.prototype.createElement=function(){var a=document.createElement("div");a.classList.add("tabulator-row"),a.setAttribute("role","row"),this.element=a},f.prototype.getElement=function(){return this.create(),this.element},f.prototype.detachElement=function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)},f.prototype.generateElement=function(){var a=this,b,c,d;this.createElement(),a.table.options.selectable!==!1&&a.table.modExists("selectRow")&&a.table.modules.selectRow.initializeRow(this),a.table.options.movableRows!==!1&&a.table.modExists("moveRow")&&a.table.modules.moveRow.initializeRow(this),a.table.options.dataTree!==!1&&a.table.modExists("dataTree")&&a.table.modules.dataTree.initializeRow(this),a.table.options.responsiveLayout==="collapse"&&a.table.modExists("responsiveLayout")&&a.table.modules.responsiveLayout.initializeRow(this),(a.table.options.rowContextMenu||a.table.options.rowClickMenu)&&this.table.modExists("menu")&&a.table.modules.menu.initializeRow(this),a.table.options.rowClick&&a.element.addEventListener("click",function(b){a.table.options.rowClick(b,a.getComponent())}),a.table.options.rowDblClick&&a.element.addEventListener("dblclick",function(b){a.table.options.rowDblClick(b,a.getComponent())}),a.table.options.rowContext&&a.element.addEventListener("contextmenu",function(b){a.table.options.rowContext(b,a.getComponent())}),a.table.options.rowMouseEnter&&a.element.addEventListener("mouseenter",function(b){a.table.options.rowMouseEnter(b,a.getComponent())}),a.table.options.rowMouseLeave&&a.element.addEventListener("mouseleave",function(b){a.table.options.rowMouseLeave(b,a.getComponent())}),a.table.options.rowMouseOver&&a.element.addEventListener("mouseover",function(b){a.table.options.rowMouseOver(b,a.getComponent())}),a.table.options.rowMouseOut&&a.element.addEventListener("mouseout",function(b){a.table.options.rowMouseOut(b,a.getComponent())}),a.table.options.rowMouseMove&&a.element.addEventListener("mousemove",function(b){a.table.options.rowMouseMove(b,a.getComponent())}),a.table.options.rowTap&&(d=!1,a.element.addEventListener("touchstart",function(a){d=!0},{passive:!0}),a.element.addEventListener("touchend",function(b){d&&a.table.options.rowTap(b,a.getComponent()),d=!1})),a.table.options.rowDblTap&&(b=null,a.element.addEventListener("touchend",function(c){b?(clearTimeout(b),b=null,a.table.options.rowDblTap(c,a.getComponent())):b=setTimeout(function(){clearTimeout(b),b=null},300)})),a.table.options.rowTapHold&&(c=null,a.element.addEventListener("touchstart",function(b){clearTimeout(c),c=setTimeout(function(){clearTimeout(c),c=null,d=!1,a.table.options.rowTapHold(b,a.getComponent())},1e3)},{passive:!0}),a.element.addEventListener("touchend",function(a){clearTimeout(c),c=null}))},f.prototype.generateCells=function(){this.cells=this.table.columnManager.generateCells(this)},f.prototype.initialize=function(a){var b=this;if(this.create(),!this.initialized||a){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layoutRow(this),this.generateCells(),this.table.options.virtualDomHoz&&this.table.vdomHoz.initialized?this.table.vdomHoz.initializeRow(this):this.cells.forEach(function(a){b.element.appendChild(a.getElement()),a.cellRendered()}),a&&this.normalizeHeight(),this.table.options.dataTree&&this.table.modExists("dataTree")&&this.table.modules.dataTree.layoutRow(this),this.table.options.responsiveLayout==="collapse"&&this.table.modExists("responsiveLayout")&&this.table.modules.responsiveLayout.layoutRow(this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.table.options.resizableRows&&this.table.modExists("resizeRows")&&this.table.modules.resizeRows.initializeRow(this),this.initialized=!0}else this.table.options.virtualDomHoz&&this.table.vdomHoz.reinitializeRow(this)},f.prototype.reinitializeHeight=function(){this.heightInitialized=!1,this.element&&this.element.offsetParent!==null&&this.normalizeHeight(!0)},f.prototype.reinitialize=function(a){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&this.element.offsetParent!==null&&this.initialize(!0),this.table.options.dataTree&&this.table.modExists("dataTree",!0)&&this.table.modules.dataTree.getTreeChildren(this,!1,!0).forEach(function(a){a.reinitialize(!0)})},f.prototype.calcHeight=function(c){var a=0,b=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach(function(c){var b=c.getHeight();b>a&&(a=b)}),c?this.height=Math.max(a,b):this.height=this.manualHeight?this.height:Math.max(a,b),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight},f.prototype.setCellHeight=function(){this.cells.forEach(function(a){a.setHeight()}),this.heightInitialized=!0},f.prototype.clearCellHeight=function(){this.cells.forEach(function(a){a.clearHeight()})},f.prototype.normalizeHeight=function(a){a&&this.clearCellHeight(),this.calcHeight(a),this.setCellHeight()},f.prototype.setHeight=function(a,b){(this.height!=a||b)&&(this.manualHeight=!0,this.height=a,this.heightStyled=a?a+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight)},f.prototype.getHeight=function(){return this.outerHeight},f.prototype.getWidth=function(){return this.element.offsetWidth},f.prototype.deleteCell=function(b){var a=this.cells.indexOf(b);a>-1&&this.cells.splice(a,1)},f.prototype.setData=function(a){this.table.modExists("mutator")&&(a=this.table.modules.mutator.transformRow(a,"data")),this.data=a,this.table.options.reactiveData&&this.table.modExists("reactiveData",!0)&&this.table.modules.reactiveData.watchRow(this)},f.prototype.updateData=function(c){var b=this,f=this.element&&a.prototype.helpers.elVisible(this.element),d={},e;return new Promise(function(h,i){var a,g;typeof c=="string"&&(c=JSON.parse(c)),b.table.options.reactiveData&&b.table.modExists("reactiveData",!0)&&b.table.modules.reactiveData.block(),b.table.modExists("mutator")?(d=Object.assign(d,b.data),d=Object.assign(d,c),e=b.table.modules.mutator.transformRow(d,"data",c)):e=c;for(a in e)b.data[a]=e[a];b.table.options.reactiveData&&b.table.modExists("reactiveData",!0)&&b.table.modules.reactiveData.unblock();for(a in c)g=b.table.columnManager.getColumnsByFieldRoot(a),g.forEach(function(c){var a=b.getCell(c.getField()),d;a&&(d=c.getFieldValue(e),a.getValue()!=d&&(a.setValueProcessData(d),f&&a.cellRendered()))});b.table.options.groupUpdateOnCellEdit&&b.table.options.groupBy&&b.table.modExists("groupRows")&&b.table.modules.groupRows.reassignRowToGroup(b.row),f?(b.normalizeHeight(!0),b.table.options.rowFormatter&&b.table.options.rowFormatter(b.getComponent())):(b.initialized=!1,b.height=0,b.heightStyled=""),b.table.options.dataTree!==!1&&b.table.modExists("dataTree")&&b.table.modules.dataTree.redrawNeeded(c)&&(b.table.modules.dataTree.initializeRow(b),f&&(b.table.modules.dataTree.layoutRow(b),b.table.rowManager.refreshActiveData("tree",!1,!0))),b.table.options.rowUpdated.call(b.table,b.getComponent()),b.table.options.dataChanged&&b.table.options.dataChanged.call(b.table,b.table.rowManager.getData()),h()})},f.prototype.getData=function(a){if(a)if(this.table.modExists("accessor"))return this.table.modules.accessor.transformRow(this,a);return this.data},f.prototype.getCell=function(a){var b=!1;return a=this.table.columnManager.findColumn(a),b=this.cells.find(function(b){return b.column===a}),b},f.prototype.getCellIndex=function(a){return this.cells.findIndex(function(b){return b===a})},f.prototype.findNextEditableCell=function(d){var e=!1,c,b,f;if(d<this.cells.length-1)for(c=d+1;c<this.cells.length;c++)if(b=this.cells[c],b.column.modules.edit&&a.prototype.helpers.elVisible(b.getElement()))if(f=!0,typeof b.column.modules.edit.check=="function"&&(f=b.column.modules.edit.check(b.getComponent())),f){e=b;break}return e},f.prototype.findPrevEditableCell=function(d){var e=!1,c,b,f;if(d>0)for(c=d-1;c>=0;c--)if(b=this.cells[c],f=!0,b.column.modules.edit&&a.prototype.helpers.elVisible(b.getElement()))if(typeof b.column.modules.edit.check=="function"&&(f=b.column.modules.edit.check(b.getComponent())),f){e=b;break}return e},f.prototype.getCells=function(){return this.cells},f.prototype.nextRow=function(){var a=this.table.rowManager.nextDisplayRow(this,!0);return a||!1},f.prototype.prevRow=function(){var a=this.table.rowManager.prevDisplayRow(this,!0);return a||!1},f.prototype.moveToRow=function(a,c){var b=this.table.rowManager.findRow(a);b?(this.table.rowManager.moveRowActual(this,b,!c),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",a)},f.prototype.validate=function(){var a=[];return this.cells.forEach(function(b){b.validate()||a.push(b.getComponent())}),!a.length||a},f.prototype.delete=function(){var a=this;return new Promise(function(d,e){var b,c;a.table.options.history&&a.table.modExists("history")&&(a.table.options.groupBy&&a.table.modExists("groupRows")?(c=a.getGroup().rows,b=c.indexOf(a),b&&(b=c[b-1])):(b=a.table.rowManager.getRowIndex(a),b&&(b=a.table.rowManager.rows[b-1])),a.table.modules.history.action("rowDelete",a,{data:a.getData(),pos:!b,index:b})),a.deleteActual(),d()})},f.prototype.deleteActual=function(a){var b=this.table.rowManager.getRowIndex(this);this.detatchModules(),this.table.options.reactiveData&&this.table.modExists("reactiveData",!0),this.modules.group&&this.modules.group.removeRow(this),this.table.rowManager.deleteRow(this,a),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.table.options.dataTree&&this.table.modExists("dataTree",!0)&&this.table.modules.dataTree.rowDelete(this),this.table.modExists("columnCalcs")&&(this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.columnCalcs.recalcRowGroup(this):this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows))},f.prototype.detatchModules=function(){this.table.modExists("selectRow")&&this.table.modules.selectRow._deselectRow(this,!0),this.table.modExists("edit")&&this.table.modules.edit.currentCell.row===this&&this.table.modules.edit.cancelEdit(),this.table.modExists("frozenRows")&&this.table.modules.frozenRows.detachRow(this)},f.prototype.deleteCells=function(){for(var b=this.cells.length,a=0;a<b;a++)this.cells[0].delete()},f.prototype.wipe=function(){if(this.detatchModules(),this.deleteCells(),this.element){while(this.element.firstChild)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}},f.prototype.getGroup=function(){return this.modules.group||!1},f.prototype.getComponent=function(){return this.component||(this.component=new k(this)),this.component},q=function(a){this._cell=a},q.prototype.getValue=function(){return this._cell.getValue()},q.prototype.getOldValue=function(){return this._cell.getOldValue()},q.prototype.getInitialValue=function(){return this._cell.initialValue},q.prototype.getElement=function(){return this._cell.getElement()},q.prototype.getRow=function(){return this._cell.row.getComponent()},q.prototype.getData=function(){return this._cell.row.getData()},q.prototype.getField=function(){return this._cell.column.getField()},q.prototype.getColumn=function(){return this._cell.column.getComponent()},q.prototype.setValue=function(b,a){typeof a=="undefined"&&(a=!0),this._cell.setValue(b,a)},q.prototype.restoreOldValue=function(){this._cell.setValueActual(this._cell.getOldValue())},q.prototype.restoreInitialValue=function(){this._cell.setValueActual(this._cell.initialValue)},q.prototype.edit=function(a){return this._cell.edit(a)},q.prototype.cancelEdit=function(){this._cell.cancelEdit()},q.prototype.isEdited=function(){return!!this._cell.modules.edit&&this._cell.modules.edit.edited},q.prototype.clearEdited=function(){self.table.modExists("edit",!0)&&this._cell.table.modules.edit.clearEdited(this._cell)},q.prototype.isValid=function(){return!this._cell.modules.validate||!this._cell.modules.validate.invalid},q.prototype.validate=function(){return this._cell.validate()},q.prototype.clearValidation=function(){this._cell.table.modExists("validate",!0)&&this._cell.table.modules.validate.clearValidation(this._cell)},q.prototype.nav=function(){return this._cell.nav()},q.prototype.checkHeight=function(){this._cell.checkHeight()},q.prototype.getTable=function(){return this._cell.table},q.prototype._getSelf=function(){return this._cell},j=function(a,b){this.table=a.table,this.column=a,this.row=b,this.element=null,this.value=null,this.initialValue,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()},j.prototype.build=function(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value},j.prototype.generateElement=function(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element},j.prototype._configureCell=function(){var a=this,c=a.column.cellEvents,b=a.element,d=this.column.getField(),e={top:"flex-start",bottom:"flex-end",middle:"center"},f={left:"flex-start",right:"flex-end",center:"center"},g;b.style.textAlign=a.column.hozAlign,a.column.vertAlign&&(b.style.display="inline-flex",b.style.alignItems=e[a.column.vertAlign]||"",a.column.hozAlign&&(b.style.justifyContent=f[a.column.hozAlign]||"")),d&&b.setAttribute("tabulator-field",d),a.column.definition.cssClass&&(g=a.column.definition.cssClass.split(" "),g.forEach(function(a){b.classList.add(a)})),this.table.options.tooltipGenerationMode==="hover"&&b.addEventListener("mouseenter",function(b){a._generateTooltip()}),a._bindClickEvents(c),a._bindTouchEvents(c),a._bindMouseEvents(c),a.column.modules.edit&&a.table.modules.edit.bindEditor(a),a.column.definition.rowHandle&&a.table.options.movableRows!==!1&&a.table.modExists("moveRow")&&a.table.modules.moveRow.initializeCell(a),a.column.visible||a.hide()},j.prototype._bindClickEvents=function(b){var a=this,c=a.element;(b.cellClick||a.table.options.cellClick)&&c.addEventListener("click",function(c){var d=a.getComponent();b.cellClick&&b.cellClick.call(a.table,c,d),a.table.options.cellClick&&a.table.options.cellClick.call(a.table,c,d)}),b.cellDblClick||this.table.options.cellDblClick?c.addEventListener("dblclick",function(c){var d=a.getComponent();b.cellDblClick&&b.cellDblClick.call(a.table,c,d),a.table.options.cellDblClick&&a.table.options.cellDblClick.call(a.table,c,d)}):c.addEventListener("dblclick",function(c){var b;if(a.table.modExists("edit"))if(a.table.modules.edit.currentCell===a)return;c.preventDefault();try{document.selection?(b=document.body.createTextRange(),b.moveToElementText(a.element),b.select()):window.getSelection&&(b=document.createRange(),b.selectNode(a.element),window.getSelection().removeAllRanges(),window.getSelection().addRange(b))}catch(a){}}),(b.cellContext||this.table.options.cellContext)&&c.addEventListener("contextmenu",function(c){var d=a.getComponent();b.cellContext&&b.cellContext.call(a.table,c,d),a.table.options.cellContext&&a.table.options.cellContext.call(a.table,c,d)})},j.prototype._bindMouseEvents=function(b){var a=this,c=a.element;(b.cellMouseEnter||a.table.options.cellMouseEnter)&&c.addEventListener("mouseenter",function(c){var d=a.getComponent();b.cellMouseEnter&&b.cellMouseEnter.call(a.table,c,d),a.table.options.cellMouseEnter&&a.table.options.cellMouseEnter.call(a.table,c,d)}),(b.cellMouseLeave||a.table.options.cellMouseLeave)&&c.addEventListener("mouseleave",function(c){var d=a.getComponent();b.cellMouseLeave&&b.cellMouseLeave.call(a.table,c,d),a.table.options.cellMouseLeave&&a.table.options.cellMouseLeave.call(a.table,c,d)}),(b.cellMouseOver||a.table.options.cellMouseOver)&&c.addEventListener("mouseover",function(c){var d=a.getComponent();b.cellMouseOver&&b.cellMouseOver.call(a.table,c,d),a.table.options.cellMouseOver&&a.table.options.cellMouseOver.call(a.table,c,d)}),(b.cellMouseOut||a.table.options.cellMouseOut)&&c.addEventListener("mouseout",function(c){var d=a.getComponent();b.cellMouseOut&&b.cellMouseOut.call(a.table,c,d),a.table.options.cellMouseOut&&a.table.options.cellMouseOut.call(a.table,c,d)}),(b.cellMouseMove||a.table.options.cellMouseMove)&&c.addEventListener("mousemove",function(c){var d=a.getComponent();b.cellMouseMove&&b.cellMouseMove.call(a.table,c,d),a.table.options.cellMouseMove&&a.table.options.cellMouseMove.call(a.table,c,d)})},j.prototype._bindTouchEvents=function(b){var a=this,e=a.element,c,d,f;(b.cellTap||this.table.options.cellTap)&&(f=!1,e.addEventListener("touchstart",function(a){f=!0},{passive:!0}),e.addEventListener("touchend",function(c){if(f){var d=a.getComponent();b.cellTap&&b.cellTap.call(a.table,c,d),a.table.options.cellTap&&a.table.options.cellTap.call(a.table,c,d)}f=!1})),(b.cellDblTap||this.table.options.cellDblTap)&&(c=null,e.addEventListener("touchend",function(d){if(c){clearTimeout(c),c=null;var e=a.getComponent();b.cellDblTap&&b.cellDblTap.call(a.table,d,e),a.table.options.cellDblTap&&a.table.options.cellDblTap.call(a.table,d,e)}else c=setTimeout(function(){clearTimeout(c),c=null},300)})),(b.cellTapHold||this.table.options.cellTapHold)&&(d=null,e.addEventListener("touchstart",function(c){clearTimeout(d),d=setTimeout(function(){clearTimeout(d),d=null,f=!1;var e=a.getComponent();b.cellTapHold&&b.cellTapHold.call(a.table,c,e),a.table.options.cellTapHold&&a.table.options.cellTapHold.call(a.table,c,e)},1e3)},{passive:!0}),e.addEventListener("touchend",function(a){clearTimeout(d),d=null}))},j.prototype._generateContents=function(){var a;switch(this.table.modExists("format")?a=this.table.modules.format.formatValue(this):a=this.element.innerHTML=this.value,typeof a=="undefined"?"undefined":b(a)){case"object":if(a instanceof Node){while(this.element.firstChild)this.element.removeChild(this.element.firstChild);this.element.appendChild(a)}else this.element.innerHTML="",a!=null&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",a);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=a}},j.prototype.cellRendered=function(){this.table.modExists("format")&&this.table.modules.format.cellRendered&&this.table.modules.format.cellRendered(this)},j.prototype._generateTooltip=function(){var a=this.column.tooltip;a?(a===!0?a=this.value:typeof a=="function"&&(a=a(this.getComponent()),a===!1&&(a="")),typeof a=="undefined"&&(a=""),this.element.setAttribute("title",a)):this.element.setAttribute("title","")},j.prototype.getElement=function(a){return this.loaded||(this.loaded=!0,a||this.layoutElement()),this.element},j.prototype.getValue=function(){return this.value},j.prototype.getOldValue=function(){return this.oldValue},j.prototype.setValue=function(b,c){var d=this.setValueProcessData(b,c),a;d&&(this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("cellEdit",this,{oldValue:this.oldValue,newValue:this.value}),a=this.getComponent(),this.column.cellEvents.cellEdited&&this.column.cellEvents.cellEdited.call(this.table,a),this.table.options.groupUpdateOnCellEdit&&this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.reassignRowToGroup(this.row),this.cellRendered(),this.table.options.cellEdited.call(this.table,a),this.table.options.dataChanged&&this.table.options.dataChanged.call(this.table,this.table.rowManager.getData()))},j.prototype.setValueProcessData=function(a,c){var b=!1;return this.value!=a&&(b=!0,c&&this.column.modules.mutate&&(a=this.table.modules.mutator.transformCell(this,a))),this.setValueActual(a),b&&this.table.modExists("columnCalcs")&&(this.column.definition.topCalc||this.column.definition.bottomCalc)&&(this.table.options.groupBy&&this.table.modExists("groupRows")?((this.table.options.columnCalcs=="table"||this.table.options.columnCalcs=="both")&&this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows),this.table.options.columnCalcs!="table"&&this.table.modules.columnCalcs.recalcRowGroup(this.row)):this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows)),b},j.prototype.setValueActual=function(a){this.oldValue=this.value,this.value=a,this.table.options.reactiveData&&this.table.modExists("reactiveData")&&this.table.modules.reactiveData.block(),this.column.setFieldValue(this.row.data,a),this.table.options.reactiveData&&this.table.modExists("reactiveData")&&this.table.modules.reactiveData.unblock(),this.loaded&&this.layoutElement()},j.prototype.layoutElement=function(){this._generateContents(),this._generateTooltip(),this.table.options.resizableColumns&&this.table.modExists("resizeColumns")&&this.row.type==="row"&&this.table.modules.resizeColumns.initializeColumn("cell",this.column,this.element),(this.column.definition.contextMenu||this.column.definition.clickMenu)&&this.table.modExists("menu")&&this.table.modules.menu.initializeCell(this),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layoutElement(this.element,this.column)},j.prototype.setWidth=function(){this.width=this.column.width,this.element.style.width=this.column.widthStyled},j.prototype.clearWidth=function(){this.width="",this.element.style.width=""},j.prototype.getWidth=function(){return this.width||this.element.offsetWidth},j.prototype.setMinWidth=function(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled},j.prototype.setMaxWidth=function(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled},j.prototype.checkHeight=function(){this.row.reinitializeHeight()},j.prototype.clearHeight=function(){this.element.style.height="",this.height=null},j.prototype.setHeight=function(){this.height=this.row.height,this.element.style.height=this.row.heightStyled},j.prototype.getHeight=function(){return this.height||this.element.offsetHeight},j.prototype.show=function(){this.element.style.display=this.column.vertAlign?"inline-flex":""},j.prototype.hide=function(){this.element.style.display="none"},j.prototype.edit=function(a){if(this.table.modExists("edit",!0))return this.table.modules.edit.editCell(this,a)},j.prototype.cancelEdit=function(){if(this.table.modExists("edit",!0)){var a=this.table.modules.edit.getCurrentCell();a&&a._getSelf()===this?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}},j.prototype.validate=function(){if(this.column.modules.validate&&this.table.modExists("validate",!0)){var a=this.table.modules.validate.validate(this.column.modules.validate,this,this.getValue());return a===!0}return!0},j.prototype.delete=function(){!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.modules.validate&&this.modules.validate.invalid&&this.table.modules.validate.clearValidation(this),this.modules.edit&&this.modules.edit.edited&&this.table.modules.edit.clearEdited(this),this.table.options.history&&this.table.modules.history.clearComponentHistory(this),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}},j.prototype.nav=function(){var a=this,b=!1,c=this.row.getCellIndex(this);return{next:function(){var b=this.right(),c;if(b)return!0;else if(c=a.table.rowManager.nextDisplayRow(a.row,!0),c)if(b=c.findNextEditableCell(-1),b)return b.edit(),!0;return!1},prev:function(){var b=this.left(),c;if(b)return!0;else if(c=a.table.rowManager.prevDisplayRow(a.row,!0),c)if(b=c.findPrevEditableCell(c.cells.length),b)return b.edit(),!0;return!1},left:function(){return!!(b=a.row.findPrevEditableCell(c),b)&&(b.edit(),!0)},right:function(){return!!(b=a.row.findNextEditableCell(c),b)&&(b.edit(),!0)},up:function(){var b=a.table.rowManager.prevDisplayRow(a.row,!0);b&&b.cells[c].edit()},down:function(){var b=a.table.rowManager.nextDisplayRow(a.row,!0);b&&b.cells[c].edit()}}},j.prototype.getIndex=function(){this.row.getCellIndex(this)},j.prototype.getComponent=function(){return this.component||(this.component=new q(this)),this.component},I=function(a){this.table=a,this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this._initialize()},I.prototype.createElement=function(){var a=document.createElement("div");return a.classList.add("tabulator-footer"),a},I.prototype._initialize=function(a){if(this.table.options.footerElement)switch(b(this.table.options.footerElement)){case"string":this.table.options.footerElement[0]==="<"?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement));break;default:this.element=this.table.options.footerElement;break}},I.prototype.getElement=function(){return this.element},I.prototype.append=function(a,b){this.activate(b),this.element.appendChild(a),this.table.rowManager.adjustTableSize()},I.prototype.prepend=function(a,b){this.activate(b),this.element.insertBefore(a,this.element.firstChild),this.table.rowManager.adjustTableSize()},I.prototype.remove=function(a){a.parentNode.removeChild(a),this.deactivate()},I.prototype.deactivate=function(a){(!this.element.firstChild||a)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)},I.prototype.activate=function(a){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),a&&this.links.push(a)},I.prototype.redraw=function(){this.links.forEach(function(a){a.footerRedraw()})},a=function a(b,c){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.vdomHoz=null,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.modules={},this.initializeElement(b)&&(this.initializeOptions(c||{}),this._create()),a.prototype.comms.register(this)},a.prototype.defaultOptions={height:!1,minHeight:!1,maxHeight:!1,layout:"fitData",layoutColumnsOnNewData:!1,columnMinWidth:40,columnMaxWidth:!1,columnHeaderVertAlign:"top",columnVertAlign:!1,resizableColumns:!0,resizableRows:!1,autoResize:!0,columns:[],cellHozAlign:"",cellVertAlign:"",headerHozAlign:"",data:[],autoColumns:!1,autoColumnsDefinitions:!1,reactiveData:!1,nestedFieldSeparator:".",tooltips:!1,tooltipsHeader:!1,tooltipGenerationMode:"load",initialSort:!1,initialFilter:!1,initialHeaderFilter:!1,columnHeaderSortMulti:!0,sortOrderReverse:!1,headerSort:!0,headerSortTristate:!1,headerSortElement:"<div class='tabulator-arrow'></div>",footerElement:!1,index:"id",textDirection:"auto",keybindings:[],tabEndNewRow:!1,invalidOptionWarnings:!0,clipboard:!1,clipboardCopyStyled:!0,clipboardCopyConfig:!1,clipboardCopyFormatter:!1,clipboardCopyRowRange:"active",clipboardPasteParser:"table",clipboardPasteAction:"insert",clipboardCopied:function(){},clipboardPasted:function(){},clipboardPasteError:function(){},downloadDataFormatter:!1,downloadReady:function(c,a){return a},downloadComplete:!1,downloadConfig:{},downloadRowRange:"active",dataTree:!1,dataTreeFilter:!0,dataTreeSort:!0,dataTreeElementColumn:!1,dataTreeBranchElement:!0,dataTreeChildIndent:9,dataTreeChildField:"_children",dataTreeCollapseElement:!1,dataTreeExpandElement:!1,dataTreeStartExpanded:!1,dataTreeRowExpanded:function(){},dataTreeRowCollapsed:function(){},dataTreeChildColumnCalcs:!1,dataTreeSelectPropagate:!1,printAsHtml:!1,printFormatter:!1,printHeader:!1,printFooter:!1,printCopyStyle:!0,printStyled:!0,printVisibleRows:!0,printRowRange:"visible",printConfig:{},addRowPos:"bottom",selectable:"highlight",selectableRangeMode:"drag",selectableRollingSelection:!0,selectablePersistence:!0,selectableCheck:function(b,c){return!0},headerFilterLiveFilterDelay:300,headerFilterPlaceholder:!1,headerVisible:!0,history:!1,locale:!1,langs:{},virtualDom:!0,virtualDomBuffer:0,virtualDomHoz:!1,persistentLayout:!1,persistentSort:!1,persistentFilter:!1,persistenceID:"",persistenceMode:!0,persistenceReaderFunc:!1,persistenceWriterFunc:!1,persistence:!1,responsiveLayout:!1,responsiveLayoutCollapseStartOpen:!0,responsiveLayoutCollapseUseFormatters:!0,responsiveLayoutCollapseFormatter:!1,pagination:!1,paginationSize:!1,paginationInitialPage:1,paginationButtonCount:5,paginationSizeSelector:!1,paginationElement:!1,paginationDataSent:{},paginationDataReceived:{},paginationAddRow:"page",ajaxURL:!1,ajaxURLGenerator:!1,ajaxParams:{},ajaxConfig:"get",ajaxContentType:"form",ajaxRequestFunc:!1,ajaxLoader:!0,ajaxLoaderLoading:!1,ajaxLoaderError:!1,ajaxFiltering:!1,ajaxSorting:!1,ajaxProgressiveLoad:!1,ajaxProgressiveLoadDelay:0,ajaxProgressiveLoadScrollMargin:0,groupBy:!1,groupStartOpen:!0,groupValues:!1,groupUpdateOnCellEdit:!1,groupHeader:!1,groupHeaderPrint:null,groupHeaderClipboard:null,groupHeaderHtmlOutput:null,groupHeaderDownload:null,htmlOutputConfig:!1,movableColumns:!1,movableRows:!1,movableRowsConnectedTables:!1,movableRowsConnectedElements:!1,movableRowsSender:!1,movableRowsReceiver:"insert",movableRowsSendingStart:function(){},movableRowsSent:function(){},movableRowsSentFailed:function(){},movableRowsSendingStop:function(){},movableRowsReceivingStart:function(){},movableRowsReceived:function(){},movableRowsReceivedFailed:function(){},movableRowsReceivingStop:function(){},movableRowsElementDrop:function(){},scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,tableBuilding:function(){},tableBuilt:function(){},renderStarted:function(){},renderComplete:function(){},rowClick:!1,rowDblClick:!1,rowContext:!1,rowTap:!1,rowDblTap:!1,rowTapHold:!1,rowMouseEnter:!1,rowMouseLeave:!1,rowMouseOver:!1,rowMouseOut:!1,rowMouseMove:!1,rowContextMenu:!1,rowClickMenu:!1,rowAdded:function(){},rowDeleted:function(){},rowMoved:function(){},rowUpdated:function(){},rowSelectionChanged:function(){},rowSelected:function(){},rowDeselected:function(){},rowResized:function(){},cellClick:!1,cellDblClick:!1,cellContext:!1,cellTap:!1,cellDblTap:!1,cellTapHold:!1,cellMouseEnter:!1,cellMouseLeave:!1,cellMouseOver:!1,cellMouseOut:!1,cellMouseMove:!1,cellEditing:function(){},cellEdited:function(){},cellEditCancelled:function(){},columnMoved:!1,columnResized:function(){},columnTitleChanged:function(){},columnVisibilityChanged:function(){},htmlImporting:function(){},htmlImported:function(){},dataLoading:function(){},dataLoaded:function(){},dataEdited:!1,dataChanged:!1,ajaxRequesting:function(){},ajaxResponse:!1,ajaxError:function(){},dataFiltering:!1,dataFiltered:!1,dataSorting:function(){},dataSorted:function(){},groupToggleElement:"arrow",groupClosedShowCalcs:!1,dataGrouping:function(){},dataGrouped:!1,groupVisibilityChanged:function(){},groupClick:!1,groupDblClick:!1,groupContext:!1,groupContextMenu:!1,groupClickMenu:!1,groupTap:!1,groupDblTap:!1,groupTapHold:!1,columnCalcs:!0,pageLoaded:function(){},localized:function(){},validationMode:"blocking",validationFailed:function(){},historyUndo:function(){},historyRedo:function(){},scrollHorizontal:function(){},scrollVertical:function(){}},a.prototype.initializeOptions=function(c){var a;if(c.invalidOptionWarnings!==!1)for(a in c)typeof this.defaultOptions[a]=="undefined"&&console.warn("Invalid table constructor option:",a);for(a in this.defaultOptions)a in c?this.options[a]=c[a]:Array.isArray(this.defaultOptions[a])?this.options[a]=Object.assign([],this.defaultOptions[a]):b(this.defaultOptions[a])==="object"&&this.defaultOptions[a]!==null?this.options[a]=Object.assign({},this.defaultOptions[a]):this.options[a]=this.defaultOptions[a]},a.prototype.initializeElement=function(a){return typeof HTMLElement!="undefined"&&a instanceof HTMLElement?(this.element=a,!0):typeof a=="string"?!!(this.element=document.querySelector(a),this.element)||(console.error("Tabulator Creation Error - no element found matching selector: ",a),!1):(console.error("Tabulator Creation Error - Invalid element provided:",a),!1)},a.prototype.rtlCheck=function(){var a=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if(a.direction!=="rtl")break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}},a.prototype._mapDepricatedFunctionality=function(){(this.options.persistentLayout||this.options.persistentSort||this.options.persistentFilter)&&(this.options.persistence||(this.options.persistence={})),this.options.dataEdited&&(console.warn("DEPRECATION WARNING - dataEdited option has been deprecated, please use the dataChanged option instead"),this.options.dataChanged=this.options.dataEdited),this.options.downloadDataFormatter&&console.warn("DEPRECATION WARNING - downloadDataFormatter option has been deprecated"),typeof this.options.clipboardCopyHeader!="undefined"&&(this.options.columnHeaders=this.options.clipboardCopyHeader,console.warn("DEPRECATION WARNING - clipboardCopyHeader option has been deprecated, please use the columnHeaders property on the clipboardCopyConfig option")),this.options.printVisibleRows!==!0&&(console.warn("printVisibleRows option is deprecated, you should now use the printRowRange option"),this.options.persistence.printRowRange="active"),this.options.printCopyStyle!==!0&&(console.warn("printCopyStyle option is deprecated, you should now use the printStyled option"),this.options.persistence.printStyled=this.options.printCopyStyle),this.options.persistentLayout&&(console.warn("persistentLayout option is deprecated, you should now use the persistence option"),this.options.persistence!==!0&&typeof this.options.persistence.columns=="undefined"&&(this.options.persistence.columns=!0)),this.options.persistentSort&&(console.warn("persistentSort option is deprecated, you should now use the persistence option"),this.options.persistence!==!0&&typeof this.options.persistence.sort=="undefined"&&(this.options.persistence.sort=!0)),this.options.persistentFilter&&(console.warn("persistentFilter option is deprecated, you should now use the persistence option"),this.options.persistence!==!0&&typeof this.options.persistence.filter=="undefined"&&(this.options.persistence.filter=!0)),this.options.columnVertAlign&&(console.warn("columnVertAlign option is deprecated, you should now use the columnHeaderVertAlign option"),this.options.columnHeaderVertAlign=this.options.columnVertAlign)},a.prototype._clearSelection=function(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")},a.prototype._create=function(){this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.bindModules(),this.rtlCheck(),this.element.tagName==="TABLE"&&this.modExists("htmlTableImport",!0)&&this.modules.htmlTableImport.parseTable(),this.columnManager=new h(this),this.rowManager=new c(this),this.footerManager=new I(this),this.columnManager.setRowManager(this.rowManager),this.rowManager.setColumnManager(this.columnManager),this.options.virtualDomHoz&&(this.vdomHoz=new v(this)),this._buildElement(),this._loadInitialData()},a.prototype._clearObjectPointers=function(){this.options.columns=this.options.columns.slice(0),this.options.reactiveData||(this.options.data=this.options.data.slice(0))},a.prototype._buildElement=function(){var i=this,c=this.element,b=this.modules,a=this.options,h,f,g,d,e;for(a.tableBuilding.call(this),c.classList.add("tabulator"),c.setAttribute("role","grid");c.firstChild;)c.removeChild(c.firstChild);a.height&&(a.height=isNaN(a.height)?a.height:a.height+"px",c.style.height=a.height),a.minHeight!==!1&&(a.minHeight=isNaN(a.minHeight)?a.minHeight:a.minHeight+"px",c.style.minHeight=a.minHeight),a.maxHeight!==!1&&(a.maxHeight=isNaN(a.maxHeight)?a.maxHeight:a.maxHeight+"px",c.style.maxHeight=a.maxHeight),this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser(),this.modExists("layout",!0)&&b.layout.initialize(a.layout),b.localize.initialize(),a.headerFilterPlaceholder!==!1&&b.localize.setHeaderFilterPlaceholder(a.headerFilterPlaceholder);for(h in a.langs)b.localize.installLang(h,a.langs[h]);b.localize.setLocale(a.locale),typeof a.placeholder=="string"&&(f=document.createElement("div"),f.classList.add("tabulator-placeholder"),g=document.createElement("span"),g.innerHTML=a.placeholder,f.appendChild(g),a.placeholder=f),c.appendChild(this.columnManager.getElement()),c.appendChild(this.rowManager.getElement()),a.footerElement&&this.footerManager.activate(),a.persistence&&this.modExists("persistence",!0)&&b.persistence.initialize(),a.movableRows&&this.modExists("moveRow")&&b.moveRow.initialize(),a.autoColumns&&this.options.data&&this.columnManager.generateColumnsFromRowData(this.options.data),this.modExists("columnCalcs")&&b.columnCalcs.initialize(),this.columnManager.setColumns(a.columns),a.dataTree&&this.modExists("dataTree",!0)&&b.dataTree.initialize(),this.modExists("frozenRows")&&this.modules.frozenRows.initialize(),(a.persistence&&this.modExists("persistence",!0)&&b.persistence.config.sort||a.initialSort)&&this.modExists("sort",!0)&&(d=[],a.persistence&&this.modExists("persistence",!0)&&b.persistence.config.sort?(d=b.persistence.load("sort"),d===!1&&a.initialSort&&(d=a.initialSort)):a.initialSort&&(d=a.initialSort),b.sort.setSort(d)),(a.persistence&&this.modExists("persistence",!0)&&b.persistence.config.filter||a.initialFilter)&&this.modExists("filter",!0)&&(e=[],a.persistence&&this.modExists("persistence",!0)&&b.persistence.config.filter?(e=b.persistence.load("filter"),e===!1&&a.initialFilter&&(e=a.initialFilter)):a.initialFilter&&(e=a.initialFilter),b.filter.setFilter(e)),a.initialHeaderFilter&&this.modExists("filter",!0)&&a.initialHeaderFilter.forEach(function(a){var c=i.columnManager.findColumn(a.field);if(c)b.filter.setHeaderFilterValue(c,a.value);else return console.warn("Column Filter Error - No matching column found:",a.field),!1}),this.modExists("ajax")&&b.ajax.initialize(),a.pagination&&this.modExists("page",!0)&&b.page.initialize(),a.groupBy&&this.modExists("groupRows",!0)&&b.groupRows.initialize(),this.modExists("keybindings")&&b.keybindings.initialize(),this.modExists("selectRow")&&b.selectRow.clearSelectionData(!0),a.autoResize&&this.modExists("resizeTable")&&b.resizeTable.initialize(),this.modExists("clipboard")&&b.clipboard.initialize(),a.printAsHtml&&this.modExists("print")&&b.print.initialize(),a.tableBuilt.call(this)},a.prototype._loadInitialData=function(){var a=this;if(a.options.pagination&&a.modExists("page"))if(a.modules.page.reset(!0,!0),a.options.pagination=="local"){if(a.options.data.length)a.rowManager.setData(a.options.data,!1,!0);else{if((a.options.ajaxURL||a.options.ajaxURLGenerator)&&a.modExists("ajax")){a.modules.ajax.loadData(!1,!0).then(function(){}).catch(function(){a.options.paginationInitialPage&&a.modules.page.setPage(a.options.paginationInitialPage)});return}a.rowManager.setData(a.options.data,!1,!0)}a.options.paginationInitialPage&&a.modules.page.setPage(a.options.paginationInitialPage)}else a.options.ajaxURL?a.modules.page.setPage(a.options.paginationInitialPage).then(function(){}).catch(function(){}):a.rowManager.setData([],!1,!0);else a.options.data.length?a.rowManager.setData(a.options.data):(a.options.ajaxURL||a.options.ajaxURLGenerator)&&a.modExists("ajax")?a.modules.ajax.loadData(!1,!0).then(function(){}).catch(function(){}):a.rowManager.setData(a.options.data,!1,!0)},a.prototype.destroy=function(){var b=this.element;for(a.prototype.comms.deregister(this),this.options.reactiveData&&this.modExists("reactiveData",!0)&&this.modules.reactiveData.unwatchData(),this.rowManager.rows.forEach(function(a){a.wipe()}),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[],this.options.autoResize&&this.modExists("resizeTable")&&this.modules.resizeTable.clearBindings(),this.modExists("keybindings")&&this.modules.keybindings.clearBindings();b.firstChild;)b.removeChild(b.firstChild);b.classList.remove("tabulator")},a.prototype._detectBrowser=function(){var a=navigator.userAgent||navigator.vendor||window.opera;a.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):a.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):a.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))},a.prototype.blockRedraw=function(){return this.rowManager.blockRedraw()},a.prototype.restoreRedraw=function(){return this.rowManager.restoreRedraw()},a.prototype.setDataFromLocalFile=function(a){var b=this;return new Promise(function(d,e){var c=document.createElement("input");c.type="file",c.accept=a||".json,application/json",c.addEventListener("change",function(h){var g=c.files[0],a=new FileReader,f;a.readAsText(g),a.onload=function(c){try{f=JSON.parse(a.result)}catch(a){console.warn("File Load Error - File contents is invalid JSON",a),e(a);return}b.setData(f).then(function(a){d(a)}).catch(function(a){d(a)})},a.onerror=function(a){console.warn("File Load Error - Unable to read file"),e()}}),c.click()})},a.prototype.setData=function(a,b,c){return this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this._setData(a,b,c,!1,!0)},a.prototype._setData=function(b,e,f,c,d){var a=this;if(typeof b=="string"){{if(b.indexOf("{")==0||b.indexOf("[")==0)return a.rowManager.setData(JSON.parse(b),c,d);if(a.modExists("ajax",!0))return e&&a.modules.ajax.setParams(e),f&&a.modules.ajax.setConfig(f),a.modules.ajax.setUrl(b),a.options.pagination=="remote"&&a.modExists("page",!0)?(a.modules.page.reset(!0,!0),a.modules.page.setPage(1)):a.modules.ajax.loadData(c,d)}}else return b?a.rowManager.setData(b,c,d):a.modExists("ajax")&&(a.modules.ajax.getUrl||a.options.ajaxURLGenerator)?a.options.pagination=="remote"&&a.modExists("page",!0)?(a.modules.page.reset(!0,!0),a.modules.page.setPage(1)):a.modules.ajax.loadData(c,d):a.rowManager.setData([],c,d)},a.prototype.clearData=function(){this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this.rowManager.clearData()},a.prototype.getData=function(a){return a===!0&&(console.warn("passing a boolean to the getData function is deprecated, you should now pass the string 'active'"),a="active"),this.rowManager.getData(a)},a.prototype.getDataCount=function(a){return a===!0&&(console.warn("passing a boolean to the getDataCount function is deprecated, you should now pass the string 'active'"),a="active"),this.rowManager.getDataCount(a)},a.prototype.searchRows=function(a,b,c){if(this.modExists("filter",!0))return this.modules.filter.search("rows",a,b,c)},a.prototype.searchData=function(a,b,c){if(this.modExists("filter",!0))return this.modules.filter.search("data",a,b,c)},a.prototype.getHtml=function(a,b,c){if(this.modExists("export",!0))return this.modules.export.getHtml(a,b,c)},a.prototype.print=function(a,b,c){if(this.modExists("print",!0))return this.modules.print.printFullscreen(a,b,c)},a.prototype.getAjaxUrl=function(){if(this.modExists("ajax",!0))return this.modules.ajax.getUrl()},a.prototype.replaceData=function(a,b,c){return this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this._setData(a,b,c,!0)},a.prototype.updateData=function(a){var c=this,d=this,b=0;return new Promise(function(e,f){c.modExists("ajax")&&c.modules.ajax.blockActiveRequest(),typeof a=="string"&&(a=JSON.parse(a)),a?a.forEach(function(a){var c=d.rowManager.findRow(a[d.options.index]);c&&(b++,c.updateData(a).then(function(){b--,b||e()}))}):(console.warn("Update Error - No data provided"),f("Update Error - No data provided"))})},a.prototype.addData=function(a,c,d){var b=this;return new Promise(function(e,f){b.modExists("ajax")&&b.modules.ajax.blockActiveRequest(),typeof a=="string"&&(a=JSON.parse(a)),a?b.rowManager.addRows(a,c,d).then(function(b){var a=[];b.forEach(function(b){a.push(b.getComponent())}),e(a)}):(console.warn("Update Error - No data provided"),f("Update Error - No data provided"))})},a.prototype.updateOrAddData=function(a){var e=this,d=this,c=[],b=0;return new Promise(function(f,g){e.modExists("ajax")&&e.modules.ajax.blockActiveRequest(),typeof a=="string"&&(a=JSON.parse(a)),a?a.forEach(function(a){var e=d.rowManager.findRow(a[d.options.index]);b++,e?e.updateData(a).then(function(){b--,c.push(e.getComponent()),b||f(c)}):d.rowManager.addRows(a).then(function(a){b--,c.push(a[0].getComponent()),b||f(c)})}):(console.warn("Update Error - No data provided"),g("Update Error - No data provided"))})},a.prototype.getRow=function(a){var b=this.rowManager.findRow(a);return b?b.getComponent():(console.warn("Find Error - No matching row found:",a),!1)},a.prototype.getRowFromPosition=function(a,c){var b=this.rowManager.getRowFromPosition(a,c);return b?b.getComponent():(console.warn("Find Error - No matching row found:",a),!1)},a.prototype.deleteRow=function(a){var b=this;return new Promise(function(i,e){var h=b,f=0,g=0,d=[];function c(){f++,f==a.length&&g&&(h.rowManager.reRenderInPosition(),i())}Array.isArray(a)||(a=[a]),a.forEach(function(a){var f=b.rowManager.findRow(a,!0);f?d.push(f):(console.warn("Delete Error - No matching row found:",a),e("Delete Error - No matching row found"),c())}),d.sort(function(a,c){return b.rowManager.rows.indexOf(a)>b.rowManager.rows.indexOf(c)?1:-1}),d.forEach(function(a){a.delete().then(function(){g++,c()}).catch(function(a){c(),e(a)})})})},a.prototype.addRow=function(a,c,d){var b=this;return new Promise(function(e,f){typeof a=="string"&&(a=JSON.parse(a)),b.rowManager.addRows(a,c,d).then(function(a){b.modExists("columnCalcs")&&b.modules.columnCalcs.recalc(b.rowManager.activeRows),e(a[0].getComponent())})})},a.prototype.updateOrAddRow=function(c,b){var a=this;return new Promise(function(e,f){var d=a.rowManager.findRow(c);typeof b=="string"&&(b=JSON.parse(b)),d?d.updateData(b).then(function(){a.modExists("columnCalcs")&&a.modules.columnCalcs.recalc(a.rowManager.activeRows),e(d.getComponent())}).catch(function(a){f(a)}):d=a.rowManager.addRows(b).then(function(b){a.modExists("columnCalcs")&&a.modules.columnCalcs.recalc(a.rowManager.activeRows),e(b[0].getComponent())}).catch(function(a){f(a)})})},a.prototype.updateRow=function(b,a){var c=this;return new Promise(function(f,e){var d=c.rowManager.findRow(b);typeof a=="string"&&(a=JSON.parse(a)),d?d.updateData(a).then(function(){f(d.getComponent())}).catch(function(a){e(a)}):(console.warn("Update Error - No matching row found:",b),e("Update Error - No matching row found"))})},a.prototype.scrollToRow=function(a,c,d){var b=this;return new Promise(function(g,e){var f=b.rowManager.findRow(a);f?b.rowManager.scrollToRow(f,c,d).then(function(){g()}).catch(function(a){e(a)}):(console.warn("Scroll Error - No matching row found:",a),e("Scroll Error - No matching row found"))})},a.prototype.moveRow=function(a,c,d){var b=this.rowManager.findRow(a);b?b.moveToRow(c,d):console.warn("Move Error - No matching row found:",a)},a.prototype.getRows=function(a){return a===!0&&(console.warn("passing a boolean to the getRows function is deprecated, you should now pass the string 'active'"),a="active"),this.rowManager.getComponents(a)},a.prototype.getRowPosition=function(a,c){var b=this.rowManager.findRow(a);return b?this.rowManager.getRowPosition(b,c):(console.warn("Position Error - No matching row found:",a),!1)},a.prototype.copyToClipboard=function(a){this.modExists("clipboard",!0)&&this.modules.clipboard.copy(a)},a.prototype.setColumns=function(a){this.columnManager.setColumns(a)},a.prototype.getColumns=function(a){return this.columnManager.getComponents(a)},a.prototype.getColumn=function(a){var b=this.columnManager.findColumn(a);return b?b.getComponent():(console.warn("Find Error - No matching column found:",a),!1)},a.prototype.getColumnDefinitions=function(){return this.columnManager.getDefinitionTree()},a.prototype.getColumnLayout=function(){if(this.modExists("persistence",!0))return this.modules.persistence.parseColumns(this.columnManager.getColumns())},a.prototype.setColumnLayout=function(a){return!!this.modExists("persistence",!0)&&(this.columnManager.setColumns(this.modules.persistence.mergeDefinition(this.options.columns,a)),!0)},a.prototype.showColumn=function(a){var b=this.columnManager.findColumn(a);if(b)b.show(),this.options.responsiveLayout&&this.modExists("responsiveLayout",!0)&&this.modules.responsiveLayout.update();else return console.warn("Column Show Error - No matching column found:",a),!1},a.prototype.hideColumn=function(a){var b=this.columnManager.findColumn(a);if(b)b.hide(),this.options.responsiveLayout&&this.modExists("responsiveLayout",!0)&&this.modules.responsiveLayout.update();else return console.warn("Column Hide Error - No matching column found:",a),!1},a.prototype.toggleColumn=function(b){var a=this.columnManager.findColumn(b);if(a)a.visible?a.hide():a.show();else return console.warn("Column Visibility Toggle Error - No matching column found:",b),!1},a.prototype.addColumn=function(b,c,d){var a=this;return new Promise(function(e,f){var g=a.columnManager.findColumn(d);a.columnManager.addColumn(b,c,g).then(function(a){e(a.getComponent())}).catch(function(a){f(a)})})},a.prototype.deleteColumn=function(a){var b=this;return new Promise(function(e,c){var d=b.columnManager.findColumn(a);d?d.delete().then(function(){e()}).catch(function(a){c(a)}):(console.warn("Column Delete Error - No matching column found:",a),c())})},a.prototype.updateColumnDefinition=function(a,b){var c=this;return new Promise(function(f,d){var e=c.columnManager.findColumn(a);e?e.updateDefinition(b).then(function(a){f(a)}).catch(function(a){d(a)}):(console.warn("Column Update Error - No matching column found:",a),d())})},a.prototype.moveColumn=function(b,d,e){var c=this.columnManager.findColumn(b),a=this.columnManager.findColumn(d);c?a?this.columnManager.moveColumn(c,a,e):console.warn("Move Error - No matching column found:",a):console.warn("Move Error - No matching column found:",b)},a.prototype.scrollToColumn=function(a,c,d){var b=this;return new Promise(function(g,e){var f=b.columnManager.findColumn(a);f?b.columnManager.scrollToColumn(f,c,d).then(function(){g()}).catch(function(a){e(a)}):(console.warn("Scroll Error - No matching column found:",a),e("Scroll Error - No matching column found"))})},a.prototype.setLocale=function(a){this.modules.localize.setLocale(a)},a.prototype.getLocale=function(){return this.modules.localize.getLocale()},a.prototype.getLang=function(a){return this.modules.localize.getLang(a)},a.prototype.redraw=function(a){this.columnManager.redraw(a),this.rowManager.redraw(a)},a.prototype.setHeight=function(a){this.rowManager.renderMode!=="classic"?(this.options.height=isNaN(a)?a:a+"px",this.element.style.height=this.options.height,this.rowManager.setRenderMode(),this.rowManager.redraw()):console.warn("setHeight function is not available in classic render mode")},a.prototype.setSort=function(a,b){this.modExists("sort",!0)&&(this.modules.sort.setSort(a,b),this.rowManager.sorterRefresh())},a.prototype.getSorters=function(){if(this.modExists("sort",!0))return this.modules.sort.getSort()},a.prototype.clearSort=function(){this.modExists("sort",!0)&&(this.modules.sort.clear(),this.rowManager.sorterRefresh())},a.prototype.setFilter=function(a,b,c,d){this.modExists("filter",!0)&&(this.modules.filter.setFilter(a,b,c,d),this.rowManager.filterRefresh())},a.prototype.refreshFilter=function(){this.modExists("filter",!0)&&this.rowManager.filterRefresh()},a.prototype.addFilter=function(a,b,c,d){this.modExists("filter",!0)&&(this.modules.filter.addFilter(a,b,c,d),this.rowManager.filterRefresh())},a.prototype.getFilters=function(a){if(this.modExists("filter",!0))return this.modules.filter.getFilters(a)},a.prototype.setHeaderFilterFocus=function(a){if(this.modExists("filter",!0)){var b=this.columnManager.findColumn(a);if(b)this.modules.filter.setHeaderFilterFocus(b);else return console.warn("Column Filter Focus Error - No matching column found:",a),!1}},a.prototype.getHeaderFilterValue=function(a){if(this.modExists("filter",!0)){var b=this.columnManager.findColumn(a);if(b)return this.modules.filter.getHeaderFilterValue(b);console.warn("Column Filter Error - No matching column found:",a)}},a.prototype.setHeaderFilterValue=function(a,c){if(this.modExists("filter",!0)){var b=this.columnManager.findColumn(a);if(b)this.modules.filter.setHeaderFilterValue(b,c);else return console.warn("Column Filter Error - No matching column found:",a),!1}},a.prototype.getHeaderFilters=function(){if(this.modExists("filter",!0))return this.modules.filter.getHeaderFilters()},a.prototype.removeFilter=function(a,b,c){this.modExists("filter",!0)&&(this.modules.filter.removeFilter(a,b,c),this.rowManager.filterRefresh())},a.prototype.clearFilter=function(a){this.modExists("filter",!0)&&(this.modules.filter.clearFilter(a),this.rowManager.filterRefresh())},a.prototype.clearHeaderFilter=function(){this.modExists("filter",!0)&&(this.modules.filter.clearHeaderFilter(),this.rowManager.filterRefresh())},a.prototype.selectRow=function(a){this.modExists("selectRow",!0)&&(a===!0&&(console.warn("passing a boolean to the selectRowselectRow function is deprecated, you should now pass the string 'active'"),a="active"),this.modules.selectRow.selectRows(a))},a.prototype.deselectRow=function(a){this.modExists("selectRow",!0)&&this.modules.selectRow.deselectRows(a)},a.prototype.toggleSelectRow=function(a){this.modExists("selectRow",!0)&&this.modules.selectRow.toggleRow(a)},a.prototype.getSelectedRows=function(){if(this.modExists("selectRow",!0))return this.modules.selectRow.getSelectedRows()},a.prototype.getSelectedData=function(){if(this.modExists("selectRow",!0))return this.modules.selectRow.getSelectedData()},a.prototype.getInvalidCells=function(){if(this.modExists("validate",!0))return this.modules.validate.getInvalidCells()},a.prototype.clearCellValidation=function(a){var b=this;this.modExists("validate",!0)&&(a||(a=this.modules.validate.getInvalidCells()),Array.isArray(a)||(a=[a]),a.forEach(function(a){b.modules.validate.clearValidation(a._getSelf())}))},a.prototype.validate=function(b){var a=[];return this.rowManager.rows.forEach(function(c){var b=c.validate();b!==!0&&(a=a.concat(b))}),!a.length||a},a.prototype.setMaxPage=function(a){if(this.options.pagination&&this.modExists("page"))this.modules.page.setMaxPage(a);else return!1},a.prototype.setPage=function(a){return this.options.pagination&&this.modExists("page")?this.modules.page.setPage(a):new Promise(function(b,a){a()})},a.prototype.setPageToRow=function(a){var b=this;return new Promise(function(d,c){b.options.pagination&&b.modExists("page")?(a=b.rowManager.findRow(a),a?b.modules.page.setPageToRow(a).then(function(){d()}).catch(function(){c()}):c()):c()})},a.prototype.setPageSize=function(a){if(this.options.pagination&&this.modExists("page"))this.modules.page.setPageSize(a),this.modules.page.setPage(1).then(function(){}).catch(function(){});else return!1},a.prototype.getPageSize=function(){if(this.options.pagination&&this.modExists("page",!0))return this.modules.page.getPageSize()},a.prototype.previousPage=function(){if(this.options.pagination&&this.modExists("page"))this.modules.page.previousPage();else return!1},a.prototype.nextPage=function(){if(this.options.pagination&&this.modExists("page"))this.modules.page.nextPage();else return!1},a.prototype.getPage=function(){return!!(this.options.pagination&&this.modExists("page"))&&this.modules.page.getPage()},a.prototype.getPageMax=function(){return!!(this.options.pagination&&this.modExists("page"))&&this.modules.page.getPageMax()},a.prototype.setGroupBy=function(a){if(this.modExists("groupRows",!0))this.options.groupBy=a,this.modules.groupRows.initialize(),this.rowManager.refreshActiveData("display"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group");else return!1},a.prototype.setGroupValues=function(a){if(this.modExists("groupRows",!0))this.options.groupValues=a,this.modules.groupRows.initialize(),this.rowManager.refreshActiveData("display"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group");else return!1},a.prototype.setGroupStartOpen=function(a){if(this.modExists("groupRows",!0))this.options.groupStartOpen=a,this.modules.groupRows.initialize(),this.options.groupBy?(this.rowManager.refreshActiveData("group"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group")):console.warn("Grouping Update - cant refresh view, no groups have been set");else return!1},a.prototype.setGroupHeader=function(a){if(this.modExists("groupRows",!0))this.options.groupHeader=a,this.modules.groupRows.initialize(),this.options.groupBy?(this.rowManager.refreshActiveData("group"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group")):console.warn("Grouping Update - cant refresh view, no groups have been set");else return!1},a.prototype.getGroups=function(a){return!!this.modExists("groupRows",!0)&&this.modules.groupRows.getGroups(!0)},a.prototype.getGroupedData=function(){if(this.modExists("groupRows",!0))return this.options.groupBy?this.modules.groupRows.getGroupedData():this.getData()},a.prototype.getEditedCells=function(){if(this.modExists("edit",!0))return this.modules.edit.getEditedCells()},a.prototype.clearCellEdited=function(a){var b=this;this.modExists("edit",!0)&&(a||(a=this.modules.edit.getEditedCells()),Array.isArray(a)||(a=[a]),a.forEach(function(a){b.modules.edit.clearEdited(a._getSelf())}))},a.prototype.getCalcResults=function(){return!!this.modExists("columnCalcs",!0)&&this.modules.columnCalcs.getResults()},a.prototype.recalc=function(){this.modExists("columnCalcs",!0)&&this.modules.columnCalcs.recalcAll(this.rowManager.activeRows)},a.prototype.navigatePrev=function(){var a=!1;if(this.modExists("edit",!0))if(a=this.modules.edit.currentCell,a)return a.nav().prev();return!1},a.prototype.navigateNext=function(){var a=!1;if(this.modExists("edit",!0))if(a=this.modules.edit.currentCell,a)return a.nav().next();return!1},a.prototype.navigateLeft=function(){var a=!1;if(this.modExists("edit",!0))if(a=this.modules.edit.currentCell,a)return e.preventDefault(),a.nav().left();return!1},a.prototype.navigateRight=function(){var a=!1;if(this.modExists("edit",!0))if(a=this.modules.edit.currentCell,a)return e.preventDefault(),a.nav().right();return!1},a.prototype.navigateUp=function(){var a=!1;if(this.modExists("edit",!0))if(a=this.modules.edit.currentCell,a)return e.preventDefault(),a.nav().up();return!1},a.prototype.navigateDown=function(){var a=!1;if(this.modExists("edit",!0))if(a=this.modules.edit.currentCell,a)return e.preventDefault(),a.nav().down();return!1},a.prototype.undo=function(){return!!(this.options.history&&this.modExists("history",!0))&&this.modules.history.undo()},a.prototype.redo=function(){return!!(this.options.history&&this.modExists("history",!0))&&this.modules.history.redo()},a.prototype.getHistoryUndoSize=function(){return!!(this.options.history&&this.modExists("history",!0))&&this.modules.history.getHistoryUndoSize()},a.prototype.getHistoryRedoSize=function(){return!!(this.options.history&&this.modExists("history",!0))&&this.modules.history.getHistoryRedoSize()},a.prototype.clearHistory=function(){return!!(this.options.history&&this.modExists("history",!0))&&this.modules.history.clear()},a.prototype.download=function(a,b,c,d){this.modExists("download",!0)&&this.modules.download.download(a,b,c,d)},a.prototype.downloadToTab=function(a,b,c,d){this.modExists("download",!0)&&this.modules.download.download(a,b,c,d,!0)},a.prototype.tableComms=function(a,b,c,d){this.modules.comms.receive(a,b,c,d)},a.prototype.moduleBindings={},a.prototype.extendModule=function(d,g,c){var e,f;if(a.prototype.moduleBindings[d])if(e=a.prototype.moduleBindings[d].prototype[g],e)if((typeof c=="undefined"?"undefined":b(c))=="object")for(f in c)e[f]=c[f];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",g);else console.warn("Module Error - module does not exist:",d)},a.prototype.registerModule=function(b,c){var d=this;a.prototype.moduleBindings[b]=c},a.prototype.bindModules=function(){this.modules={};for(var b in a.prototype.moduleBindings)this.modules[b]=new a.prototype.moduleBindings[b](this)},a.prototype.modExists=function(a,b){return!!this.modules[a]||(b&&console.error("Tabulator Module Not Installed: "+a),!1)},a.prototype.helpers={elVisible:function(a){return!(a.offsetWidth<=0&&a.offsetHeight<=0)},elOffset:function(b){var a=b.getBoundingClientRect();return{top:a.top+window.pageYOffset-document.documentElement.clientTop,left:a.left+window.pageXOffset-document.documentElement.clientLeft}},deepClone:function(a){var d=Object.assign(Array.isArray(a)?[]:{},a),c;for(c in a)a[c]!=null&&b(a[c])==="object"&&(a[c]instanceof Date?d[c]=new Date(a[c]):d[c]=this.deepClone(a[c]));return d}},a.prototype.comms={tables:[],register:function(b){a.prototype.comms.tables.push(b)},deregister:function(c){var b=a.prototype.comms.tables.indexOf(c);b>-1&&a.prototype.comms.tables.splice(b,1)},lookupTable:function(b,g){var d=[],e,c,f;if(typeof b=="string"){if(e=document.querySelectorAll(b),e.length)for(f=0;f<e.length;f++)c=a.prototype.comms.matchElement(e[f]),c&&d.push(c)}else typeof HTMLElement!="undefined"&&b instanceof HTMLElement||b instanceof a?(c=a.prototype.comms.matchElement(b),c&&d.push(c)):Array.isArray(b)?b.forEach(function(b){d=d.concat(a.prototype.comms.lookupTable(b))}):g||console.warn("Table Connection Error - Invalid Selector",b);return d},matchElement:function(b){return a.prototype.comms.tables.find(function(c){return b instanceof a?c===b:c.element===b})}},a.prototype.findTable=function(c){var b=a.prototype.comms.lookupTable(c,!0);return!(Array.isArray(b)&&!b.length)&&b},V=function(a){this.table=a,this.mode=null},V.prototype.initialize=function(a){this.modes[a]?this.mode=a:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+a),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)},V.prototype.getMode=function(){return this.mode},V.prototype.layout=function(){this.modes[this.mode].call(this,this.table.columnManager.columnsByIndex),this.mode.indexOf("fitData")===0&&this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns")},V.prototype.modes={fitData:function(a){this.table.options.virtualDomHoz?this.table.vdomHoz.fitDataLayoutOverride():a.forEach(function(a){a.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:function(a){a.forEach(function(a){a.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataTable:function(a){a.forEach(function(a){a.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataStretch:function(d){var e=this,c=0,f=this.table.rowManager.element.clientWidth,b=0,a=!1;d.forEach(function(b,d){b.widthFixed||b.reinitializeWidth(),(e.table.options.responsiveLayout?b.modules.responsive.visible:b.visible)&&(a=b),b.visible&&(c+=b.getWidth())}),a?(b=f-c+a.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(a.setWidth(0),this.table.modules.responsiveLayout.update()),b>0?a.setWidth(b):a.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(n){var m=this,f=m.table.element.clientWidth,k=0,d=0,h=0,j=0,a=[],b=[],g=0,e=0,c=0;function l(a){var b;return typeof a=="string"?a.indexOf("%")>-1?b=f/100*parseInt(a):b=parseInt(a):b=a,b}function i(q,b,f,c){var g=[],o=0,d=0,k=0,m=h,e=0,a=0,j=[];function p(a){return f*(a.column.definition.widthGrow||1)}function n(a){return l(a.width)-f*(a.column.definition.widthShrink||0)}return q.forEach(function(d,h){var e=c?n(d):p(d);d.column.minWidth>=e?g.push(d):d.column.maxWidth&&d.column.maxWidth<e?(d.width=d.column.maxWidth,b-=d.column.maxWidth,m-=c?d.column.definition.widthShrink||1:d.column.definition.widthGrow||1,m&&(f=Math.floor(b/m))):(j.push(d),a+=c?d.column.definition.widthShrink||1:d.column.definition.widthGrow||1)}),g.length?(g.forEach(function(a){o+=c?a.width-a.column.minWidth:a.column.minWidth,a.width=a.column.minWidth}),d=b-o,k=a?Math.floor(d/a):d,e=d-k*a,e+=i(j,d,k,c)):(e=a?b-Math.floor(b/a)*a:b,j.forEach(function(a){a.width=c?n(a):p(a)})),e}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(f-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),n.forEach(function(c){var f,d,e;c.visible&&(f=c.definition.width,d=parseInt(c.minWidth),f?(e=l(f),k+=e>d?e:d,c.definition.widthShrink&&(b.push({column:c,width:e>d?e:d}),g+=c.definition.widthShrink)):(a.push({column:c,width:0}),h+=c.definition.widthGrow||1))}),d=f-k,j=Math.floor(d/h),c=i(a,d,j,!1),a.length&&c>0&&(a[a.length-1].width+=+c),a.forEach(function(a){d-=a.width}),e=Math.abs(c)+d,e>0&&g&&(c=i(b,e,Math.floor(e/g),!0)),b.length&&(b[b.length-1].width-=c),a.forEach(function(a){a.column.setWidth(a.width)}),b.forEach(function(a){a.column.setWidth(a.width)})}},a.prototype.registerModule("layout",V),B=function(a){this.table=a,this.locale="default",this.lang=!1,this.bindings={},this.langList={}},B.prototype.initialize=function(){this.langList=a.prototype.helpers.deepClone(this.langs)},B.prototype.setHeaderFilterPlaceholder=function(a){this.langList.default.headerFilters.default=a},B.prototype.setHeaderFilterColumnPlaceholder=function(a,b){this.langList.default.headerFilters.columns[a]=b,this.lang&&!this.lang.headerFilters.columns[a]&&(this.lang.headerFilters.columns[a]=b)},B.prototype.installLang=function(a,b){this.langList[a]?this._setLangProp(this.langList[a],b):this.langList[a]=b},B.prototype._setLangProp=function(c,d){for(var a in d)c[a]&&b(c[a])=="object"?this._setLangProp(c[a],d[a]):c[a]=d[a]},B.prototype.setLocale=function(c){var d=this,e;c=c||"default";function f(c,d){for(var a in c)b(c[a])=="object"?(d[a]||(d[a]={}),f(c[a],d[a])):d[a]=c[a]}c===!0&&navigator.language&&(c=navigator.language.toLowerCase()),c&&(d.langList[c]||(e=c.split("-")[0],d.langList[e]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",c,e),c=e):(console.warn("Localization Error - Matching locale not found, using default: ",c),c="default"))),d.locale=c,d.lang=a.prototype.helpers.deepClone(d.langList.default||{}),c!="default"&&f(d.langList[c],d.lang),d.table.options.localized.call(d.table,d.locale,d.lang),d._executeBindings()},B.prototype.getLocale=function(a){return self.locale},B.prototype.getLang=function(a){return a?this.langList[a]:this.lang},B.prototype.getText=function(a,b){var a=b?a+"|"+b:a,c=a.split("|"),d=this._getLangElement(c,this.locale);return d||""},B.prototype._getLangElement=function(b,d){var c=this,a=c.lang;return b.forEach(function(c){var b;a&&(b=a[c],typeof b!="undefined"?a=b:a=!1)}),a},B.prototype.bind=function(a,b){this.bindings[a]||(this.bindings[a]=[]),this.bindings[a].push(b),b(this.getText(a),this.lang)},B.prototype._executeBindings=function(){var a=this,b=function(b){a.bindings[b].forEach(function(c){c(a.getText(b),a.lang)})},c;for(c in a.bindings)b(c)},B.prototype.langs={default:{groups:{item:"item",items:"items"},columns:{},ajax:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{default:"filter column...",columns:{}}}},a.prototype.registerModule("localize",B),X=function(a){this.table=a},X.prototype.getConnections=function(d){var e=this,b=[],c;return c=a.prototype.comms.lookupTable(d),c.forEach(function(a){e.table!==a&&b.push(a)}),b},X.prototype.send=function(a,c,d,e){var f=this,b=this.getConnections(a);b.forEach(function(a){a.tableComms(f.table.element,c,d,e)}),!b.length&&a&&console.warn("Table Connection Error - No tables matching selector found",a)},X.prototype.receive=function(b,a,c,d){if(this.table.modExists(a))return this.table.modules[a].commsReceived(b,c,d);console.warn("Inter-table Comms Error - no such module:",a)},a.prototype.registerModule("comms",X),U=function(a){this.table=a,this.allowedTypes=["","data","download","clipboard","print","htmlOutput"]},U.prototype.initializeColumn=function(a){var d=this,b=!1,c={};this.allowedTypes.forEach(function(g){var e="accessor"+(g.charAt(0).toUpperCase()+g.slice(1)),f;a.definition[e]&&(f=d.lookupAccessor(a.definition[e]),f&&(b=!0,c[e]={accessor:f,params:a.definition[e+"Params"]||{}}))}),b&&(a.modules.accessor=c)},U.prototype.lookupAccessor=function(a){var c=!1;switch(typeof a=="undefined"?"undefined":b(a)){case"string":this.accessors[a]?c=this.accessors[a]:console.warn("Accessor Error - No such accessor found, ignoring: ",a);break;case"function":c=a;break}return c},U.prototype.transformRow=function(d,c){var f="accessor"+(c.charAt(0).toUpperCase()+c.slice(1)),e=d.getComponent(),b=a.prototype.helpers.deepClone(d.data||{});return this.table.columnManager.traverse(function(a){var g,d,i,h;a.modules.accessor&&(d=a.modules.accessor[f]||a.modules.accessor.accessor||!1,d&&(g=a.getFieldValue(b),g!="undefined"&&(h=a.getComponent(),i=typeof d.params=="function"?d.params(g,b,c,h,e):d.params,a.setFieldValue(b,d.accessor(g,b,c,i,h,e)))))}),b},U.prototype.accessors={},a.prototype.registerModule("accessor",U),p=function(a){this.table=a,this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=!1,this.errorElement=!1,this.loaderPromise=!1,this.progressiveLoad=!1,this.loading=!1,this.requestOrder=0},p.prototype.initialize=function(){var a;this.loaderElement.appendChild(this.msgElement),this.table.options.ajaxLoaderLoading&&(typeof this.table.options.ajaxLoaderLoading=="string"?(a=document.createElement("template"),a.innerHTML=this.table.options.ajaxLoaderLoading.trim(),this.loadingElement=a.content.firstChild):this.loadingElement=this.table.options.ajaxLoaderLoading),this.loaderPromise=this.table.options.ajaxRequestFunc||this.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||this.defaultURLGenerator,this.table.options.ajaxLoaderError&&(typeof this.table.options.ajaxLoaderError=="string"?(a=document.createElement("template"),a.innerHTML=this.table.options.ajaxLoaderError.trim(),this.errorElement=a.content.firstChild):this.errorElement=this.table.options.ajaxLoaderError),this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.table.options.ajaxProgressiveLoad&&(this.table.options.pagination?(this.progressiveLoad=!1,console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time")):this.table.modExists("page")?(this.progressiveLoad=this.table.options.ajaxProgressiveLoad,this.table.modules.page.initializeProgressive(this.progressiveLoad)):console.error("Pagination plugin is required for progressive ajax loading"))},p.prototype.createLoaderElement=function(){var a=document.createElement("div");return a.classList.add("tabulator-loader"),a},p.prototype.createMsgElement=function(){var a=document.createElement("div");return a.classList.add("tabulator-loader-msg"),a.setAttribute("role","alert"),a},p.prototype.setParams=function(a,c){if(c){this.params=this.params||{};for(var b in a)this.params[b]=a[b]}else this.params=a},p.prototype.getParams=function(){return this.params||{}},p.prototype.setConfig=function(a){if(this._loadDefaultConfig(),typeof a=="string")this.config.method=a;else for(var b in a)this.config[b]=a[b]},p.prototype._loadDefaultConfig=function(c){var a=this,b;if(!a.config||c){a.config={};for(b in a.defaultConfig)a.config[b]=a.defaultConfig[b]}},p.prototype.setUrl=function(a){this.url=a},p.prototype.getUrl=function(){return this.url},p.prototype.loadData=function(a,b){var c=this;return this.progressiveLoad?this._loadDataProgressive():this._loadDataStandard(a,b)},p.prototype.nextPage=function(b){var a;this.loading||(a=this.table.options.ajaxProgressiveLoadScrollMargin||this.table.rowManager.getElement().clientHeight*2,b<a&&this.table.modules.page.nextPage().then(function(){}).catch(function(){}))},p.prototype.blockActiveRequest=function(){this.requestOrder++},p.prototype._loadDataProgressive=function(){return this.table.rowManager.setData([]),this.table.modules.page.setPage(1)},p.prototype._loadDataStandard=function(a,c){var b=this;return new Promise(function(e,d){b.sendRequest(a).then(function(f){b.table.rowManager.setData(f,a,c).then(function(){e()}).catch(function(a){d(a)})}).catch(function(a){d(a)})})},p.prototype.generateParamsList=function(a,c){var f=this,d=[],e;if(c=c||"",Array.isArray(a))a.forEach(function(b,a){d=d.concat(f.generateParamsList(b,c?c+"["+a+"]":a))});else if((typeof a=="undefined"?"undefined":b(a))==="object")for(e in a)d=d.concat(f.generateParamsList(a[e],c?c+"["+e+"]":e));else d.push({key:c,value:a});return d},p.prototype.serializeParams=function(b){var c=this.generateParamsList(b),a=[];return c.forEach(function(b){a.push(encodeURIComponent(b.key)+"="+encodeURIComponent(b.value))}),a.join("&")},p.prototype.sendRequest=function(d){var b=this,a=this,e=a.url,c,f,g;return a.requestOrder++,c=a.requestOrder,a._loadDefaultConfig(),new Promise(function(g,f){a.table.options.ajaxRequesting.call(b.table,a.url,a.params)!==!1?(a.loading=!0,d||a.showLoader(),b.loaderPromise(e,a.config,a.params).then(function(b){c===a.requestOrder?(a.table.options.ajaxResponse&&(b=a.table.options.ajaxResponse.call(a.table,a.url,a.params,b)),g(b),a.hideLoader(),a.loading=!1):console.warn("Ajax Response Blocked - An active ajax request was blocked by an attempt to change table data while the request was being made")}).catch(function(b){console.error("Ajax Load Error: ",b),a.table.options.ajaxError.call(a.table,b),a.showError(),setTimeout(function(){a.hideLoader()},3e3),a.loading=!1,f(b)})):f()})},p.prototype.showLoader=function(){var a=typeof this.table.options.ajaxLoader=="function"?this.table.options.ajaxLoader():this.table.options.ajaxLoader;if(a){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.table.modules.localize.getText("ajax|loading"),this.table.element.appendChild(this.loaderElement)}},p.prototype.showError=function(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.table.modules.localize.getText("ajax|error"),this.table.element.appendChild(this.loaderElement)},p.prototype.hideLoader=function(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)},p.prototype.defaultConfig={method:"GET"},p.prototype.defaultURLGenerator=function(a,b,c){return a&&c&&Object.keys(c).length&&(!b.method||b.method.toLowerCase()=="get")&&(b.method="get",a+=(a.includes("?")?"&":"?")+this.modules.ajax.serializeParams(c)),a},p.prototype.defaultLoaderPromise=function(d,a,f){var c=this,e;return new Promise(function(i,g){if(d=c.urlGenerator.call(c.table,d,a,f),a.method.toUpperCase()!="GET")if(e=b(c.table.options.ajaxContentType)==="object"?c.table.options.ajaxContentType:c.contentTypeFormatters[c.table.options.ajaxContentType],e){for(var h in e.headers)a.headers||(a.headers={}),typeof a.headers[h]=="undefined"&&(a.headers[h]=e.headers[h]);a.body=e.body.call(c,d,a,f)}else console.warn("Ajax Error - Invalid ajaxContentType value:",c.table.options.ajaxContentType);d?(typeof a.headers=="undefined"&&(a.headers={}),typeof a.headers.Accept=="undefined"&&(a.headers.Accept="application/json"),typeof a.headers["X-Requested-With"]=="undefined"&&(a.headers["X-Requested-With"]="XMLHttpRequest"),typeof a.mode=="undefined"&&(a.mode="cors"),a.mode=="cors"?(typeof a.headers["Access-Control-Allow-Origin"]=="undefined"&&(a.headers["Access-Control-Allow-Origin"]=window.location.origin),typeof a.credentials=="undefined"&&(a.credentials="same-origin")):typeof a.credentials=="undefined"&&(a.credentials="include"),fetch(d,a).then(function(a){a.ok?a.json().then(function(a){i(a)}).catch(function(a){g(a),console.warn("Ajax Load Error - Invalid JSON returned",a)}):(console.error("Ajax Load Error - Connection Error: "+a.status,a.statusText),g(a))}).catch(function(a){console.error("Ajax Load Error - Connection Error: ",a),g(a)})):(console.warn("Ajax Load Error - No URL Set"),i([]))})},p.prototype.contentTypeFormatters={json:{headers:{"Content-Type":"application/json"},body:function(c,d,a){return JSON.stringify(a)}},form:{headers:{},body:function(e,f,b){var c=this.generateParamsList(b),a=new FormData;return c.forEach(function(b){a.append(b.key,b.value)}),a}}},a.prototype.registerModule("ajax",p),Q=function(a){this._row=a},Q.prototype.getData=function(a){return this._row.getData(a)},Q.prototype.getElement=function(){return this._row.getElement()},Q.prototype.getTable=function(){return this._row.table},Q.prototype.getCells=function(){var a=[];return this._row.getCells().forEach(function(b){a.push(b.getComponent())}),a},Q.prototype.getCell=function(b){var a=this._row.getCell(b);return!!a&&a.getComponent()},Q.prototype._getSelf=function(){return this._row},r=function(a){this.table=a,this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.initialize()},r.prototype.createElement=function(){var a=document.createElement("div");return a.classList.add("tabulator-calcs-holder"),a},r.prototype.initialize=function(){this.genColumn=new d({field:"value"},this)},r.prototype.registerColumnField=function(){},r.prototype.initializeColumn=function(d){var a=d.definition,c={topCalcParams:a.topCalcParams||{},botCalcParams:a.bottomCalcParams||{}};if(a.topCalc){switch(b(a.topCalc)){case"string":this.calculations[a.topCalc]?c.topCalc=this.calculations[a.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",a.topCalc);break;case"function":c.topCalc=a.topCalc;break}c.topCalc&&(d.modules.columnCalcs=c,this.topCalcs.push(d),this.table.options.columnCalcs!="group"&&this.initializeTopRow())}if(a.bottomCalc){switch(b(a.bottomCalc)){case"string":this.calculations[a.bottomCalc]?c.botCalc=this.calculations[a.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",a.bottomCalc);break;case"function":c.botCalc=a.bottomCalc;break}c.botCalc&&(d.modules.columnCalcs=c,this.botCalcs.push(d),this.table.options.columnCalcs!="group"&&this.initializeBottomRow())}},r.prototype.removeCalcs=function(){var a=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),a=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),a=!0),a&&this.table.rowManager.adjustTableSize()},r.prototype.initializeTopRow=function(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)},r.prototype.initializeBottomRow=function(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)},r.prototype.scrollHorizontal=function(a){this.botInitialized&&this.botRow&&(this.botRow.getElement().style.marginLeft=-a+"px")},r.prototype.recalc=function(b){var c,a;if(this.topInitialized||this.botInitialized){if(c=this.rowsToData(b),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),a=this.generateRow("top",this.rowsToData(b)),this.topRow=a;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(a.getElement()),a.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),a=this.generateRow("bottom",this.rowsToData(b)),this.botRow=a;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(a.getElement()),a.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}},r.prototype.recalcRowGroup=function(a){this.recalcGroup(this.table.modules.groupRows.getRowGroup(a))},r.prototype.recalcAll=function(){var a=this,b;(this.topCalcs.length||this.botCalcs.length)&&(this.table.options.columnCalcs!=="group"&&this.recalc(this.table.rowManager.activeRows),this.table.options.groupBy&&this.table.options.columnCalcs!=="table"&&(b=table.modules.groupRows.getChildGroups(),b.forEach(function(b){a.recalcGroup(b)})))},r.prototype.recalcGroup=function(a){var b,c;a&&a.calcs&&(a.calcs.bottom&&(b=this.rowsToData(a.rows),c=this.generateRowData("bottom",b),a.calcs.bottom.updateData(c),a.calcs.bottom.reinitialize()),a.calcs.top&&(b=this.rowsToData(a.rows),c=this.generateRowData("top",b),a.calcs.top.updateData(c),a.calcs.top.reinitialize()))},r.prototype.generateTopRow=function(a){return this.generateRow("top",this.rowsToData(a))},r.prototype.generateBottomRow=function(a){return this.generateRow("bottom",this.rowsToData(a))},r.prototype.rowsToData=function(c){var a=this,b=[];return c.forEach(function(c){if(b.push(c.getData()),a.table.options.dataTree&&a.table.options.dataTreeChildColumnCalcs)if(c.modules.dataTree.open){var d=a.rowsToData(a.table.modules.dataTree.getFilteredTreeChildren(c));b=b.concat(d)}}),b},r.prototype.generateRow=function(c,d){var a=this,e=this.generateRowData(c,d),b;return a.table.modExists("mutator")&&a.table.modules.mutator.disable(),b=new f(e,this,"calc"),a.table.modExists("mutator")&&a.table.modules.mutator.enable(),b.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+c),b.component=!1,b.getComponent=function(){return this.component||(this.component=new Q(this)),this.component},b.generateCells=function(){var d=[];a.table.columnManager.columnsByIndex.forEach(function(e){a.genColumn.setField(e.getField()),a.genColumn.hozAlign=e.hozAlign,e.definition[c+"CalcFormatter"]&&a.table.modExists("format")?a.genColumn.modules.format={formatter:a.table.modules.format.getFormatter(e.definition[c+"CalcFormatter"]),params:e.definition[c+"CalcFormatterParams"]||{}}:a.genColumn.modules.format={formatter:a.table.modules.format.getFormatter("plaintext"),params:{}},a.genColumn.definition.cssClass=e.definition.cssClass;var f=new j(a.genColumn,b);f.getElement(),f.column=e,f.setWidth(),e.cells.push(f),d.push(f),e.visible||f.hide()}),this.cells=d},b},r.prototype.generateRowData=function(f,b){var d={},g=f=="top"?this.topCalcs:this.botCalcs,c=f=="top"?"topCalc":"botCalc",e,a;return g.forEach(function(f){var g=[];f.modules.columnCalcs&&f.modules.columnCalcs[c]&&(b.forEach(function(a){g.push(f.getFieldValue(a))}),a=c+"Params",e=typeof f.modules.columnCalcs[a]=="function"?f.modules.columnCalcs[a](g,b):f.modules.columnCalcs[a],f.setFieldValue(d,f.modules.columnCalcs[c](g,b,e)))}),d},r.prototype.hasTopCalcs=function(){return!!this.topCalcs.length},r.prototype.hasBottomCalcs=function(){return!!this.botCalcs.length},r.prototype.redraw=function(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)},r.prototype.getResults=function(){var c=this,a={},b;return this.table.options.groupBy&&this.table.modExists("groupRows")?(b=this.table.modules.groupRows.getGroups(!0),b.forEach(function(b){a[b.getKey()]=c.getGroupResults(b)})):a={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},a},r.prototype.getGroupResults=function(b){var e=this,a=b._getSelf(),f=b.getSubGroups(),c={},d={};return f.forEach(function(a){c[a.getKey()]=e.getGroupResults(a)}),d={top:a.calcs.top?a.calcs.top.getData():{},bottom:a.calcs.bottom?a.calcs.bottom.getData():{},groups:c},d},r.prototype.calculations={avg:function(b,f,c){var a=0,d=typeof c.precision!="undefined"?c.precision:2;return b.length&&(a=b.reduce(function(a,b){return Number(a)+Number(b)}),a=a/b.length,a=d!==!1?a.toFixed(d):a),parseFloat(a).toString()},max:function(d,f,b){var a=null,c=typeof b.precision!="undefined"&&b.precision;return d.forEach(function(b){b=Number(b),(b>a||a===null)&&(a=b)}),a!==null?c!==!1?a.toFixed(c):a:""},min:function(d,f,b){var a=null,c=typeof b.precision!="undefined"&&b.precision;return d.forEach(function(b){b=Number(b),(b<a||a===null)&&(a=b)}),a!==null?c!==!1?a.toFixed(c):a:""},sum:function(b,f,c){var a=0,d=typeof c.precision!="undefined"&&c.precision;return b.length&&b.forEach(function(b){b=Number(b),a+=isNaN(b)?0:Number(b)}),d!==!1?a.toFixed(d):a},concat:function(a,d,e){var b=0;return a.length&&(b=a.reduce(function(a,b){return String(a)+String(b)})),b},count:function(a,d,e){var b=0;return a.length&&a.forEach(function(a){a&&b++}),b}},a.prototype.registerModule("columnCalcs",r),D=function(a){this.table=a,this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0},D.prototype.initialize=function(){var a=this;this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,(this.mode===!0||this.mode==="copy")&&this.table.element.addEventListener("copy",function(c){var b,d,e;a.blocked||(c.preventDefault(),a.customSelection?(b=a.customSelection,a.table.options.clipboardCopyFormatter&&(b=a.table.options.clipboardCopyFormatter("plain",b))):(e=a.table.modules.export.generateExportList(a.table.options.clipboardCopyConfig,a.table.options.clipboardCopyStyled,a.rowRange,"clipboard"),d=a.table.modules.export.genereateHTMLTable(e),b=d?a.generatePlainContent(e):"",a.table.options.clipboardCopyFormatter&&(b=a.table.options.clipboardCopyFormatter("plain",b),d=a.table.options.clipboardCopyFormatter("html",d))),window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",b):c.clipboardData&&c.clipboardData.setData?(c.clipboardData.setData("text/plain",b),d&&c.clipboardData.setData("text/html",d)):c.originalEvent&&c.originalEvent.clipboardData.setData&&(c.originalEvent.clipboardData.setData("text/plain",b),d&&c.originalEvent.clipboardData.setData("text/html",d)),a.table.options.clipboardCopied.call(a.table,b,d),a.reset())}),(this.mode===!0||this.mode==="paste")&&this.table.element.addEventListener("paste",function(b){a.paste(b)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction)},D.prototype.reset=function(){this.blocked=!0,this.customSelection=!1},D.prototype.generatePlainContent=function(c){var a=[];return c.forEach(function(c){var d=[];c.columns.forEach(function(a){var e="";if(a)if(c.type==="group"&&(a.value=a.component.getKey()),a.value===null)e="";else switch(b(a.value)){case"object":e=JSON.stringify(a.value);break;case"undefined":e="";break;default:e=a.value}d.push(e)}),a.push(d.join("	"))}),a.join("\n")},D.prototype.copy=function(b,d){var b,a,c;this.blocked=!1,this.customSelection=!1,(this.mode===!0||this.mode==="copy")&&(this.rowRange=b||this.table.options.clipboardCopyRowRange,typeof window.getSelection!="undefined"&&typeof document.createRange!="undefined"?(b=document.createRange(),b.selectNodeContents(this.table.element),a=window.getSelection(),a.toString()&&d&&(this.customSelection=a.toString()),a.removeAllRanges(),a.addRange(b)):typeof document.selection!="undefined"&&typeof document.body.createTextRange!="undefined"&&(c=document.body.createTextRange(),c.moveToElementText(this.table.element),c.select()),document.execCommand("copy"),a&&a.removeAllRanges())},D.prototype.setPasteAction=function(a){switch(typeof a=="undefined"?"undefined":b(a)){case"string":this.pasteAction=this.pasteActions[a],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",a);break;case"function":this.pasteAction=a;break}},D.prototype.setPasteParser=function(a){switch(typeof a=="undefined"?"undefined":b(a)){case"string":this.pasteParser=this.pasteParsers[a],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",a);break;case"function":this.pasteParser=a;break}},D.prototype.paste=function(c){var b,a,d;this.checkPaseOrigin(c)&&(b=this.getPasteData(c),a=this.pasteParser.call(this,b),a?(c.preventDefault(),this.table.modExists("mutator")&&(a=this.mutateData(a)),d=this.pasteAction.call(this,a),this.table.options.clipboardPasted.call(this.table,b,a,d)):this.table.options.clipboardPasteError.call(this.table,b))},D.prototype.mutateData=function(a){var c=this,b=[];return Array.isArray(a)?a.forEach(function(a){b.push(c.table.modules.mutator.transformRow(a,"clipboard"))}):b=a,b},D.prototype.checkPaseOrigin=function(b){var a=!0;return(b.target.tagName!="DIV"||this.table.modules.edit.currentCell)&&(a=!1),a},D.prototype.getPasteData=function(a){var b;return window.clipboardData&&window.clipboardData.getData?b=window.clipboardData.getData("Text"):a.clipboardData&&a.clipboardData.getData?b=a.clipboardData.getData("text/plain"):a.originalEvent&&a.originalEvent.clipboardData.getData&&(b=a.originalEvent.clipboardData.getData("text/plain")),b},D.prototype.pasteParsers={table:function(d){var a=[],g=!1,c=!0,e=this.table.columnManager.columns,b=[],f=[];return!!(d=d.split("\n"),d.forEach(function(b){a.push(b.split("	"))}),a.length&&!(a.length===1&&a[0].length<2))&&(g=!0,a[0].forEach(function(a){var d=e.find(function(b){return a&&b.definition.title&&a.trim()&&b.definition.title.trim()===a.trim()});d?b.push(d):c=!1}),c||(c=!0,b=[],a[0].forEach(function(a){var d=e.find(function(b){return a&&b.field&&a.trim()&&b.field.trim()===a.trim()});d?b.push(d):c=!1}),c||(b=this.table.columnManager.columnsByIndex)),c&&a.shift(),a.forEach(function(c){var a={};c.forEach(function(d,c){b[c]&&(a[b[c].field]=d)}),f.push(a)}),f)}},D.prototype.pasteActions={replace:function(a){return this.table.setData(a)},update:function(a){return this.table.updateOrAddData(a)},insert:function(a){return this.table.addData(a)}},a.prototype.registerModule("clipboard",D),s=function(a){this.table=a,this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.displayIndex=0},s.prototype.initialize=function(){var c=null,d=this.table.columnManager.getFirstVisibileColumn(),a=this.table.options;switch(this.field=a.dataTreeChildField,this.indent=a.dataTreeChildIndent,this.elementField=a.dataTreeElementColumn||(!!d&&d.field),a.dataTreeBranchElement&&(a.dataTreeBranchElement===!0?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):typeof a.dataTreeBranchElement=="string"?(c=document.createElement("div"),c.innerHTML=a.dataTreeBranchElement,this.branchEl=c.firstChild):this.branchEl=a.dataTreeBranchElement),a.dataTreeCollapseElement?typeof a.dataTreeCollapseElement=="string"?(c=document.createElement("div"),c.innerHTML=a.dataTreeCollapseElement,this.collapseEl=c.firstChild):this.collapseEl=a.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),a.dataTreeExpandElement?typeof a.dataTreeExpandElement=="string"?(c=document.createElement("div"),c.innerHTML=a.dataTreeExpandElement,this.expandEl=c.firstChild):this.expandEl=a.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),b(a.dataTreeStartExpanded)){case"boolean":this.startOpen=function(b,c){return a.dataTreeStartExpanded};break;case"function":this.startOpen=a.dataTreeStartExpanded;break;default:this.startOpen=function(c,b){return a.dataTreeStartExpanded[b]};break}},s.prototype.initializeRow=function(a){var d=a.getData()[this.field],e=Array.isArray(d),c=e||!e&&(typeof d=="undefined"?"undefined":b(d))==="object"&&d!==null;!c&&a.modules.dataTree&&a.modules.dataTree.branchEl&&a.modules.dataTree.branchEl.parentNode.removeChild(a.modules.dataTree.branchEl),!c&&a.modules.dataTree&&a.modules.dataTree.controlEl&&a.modules.dataTree.controlEl.parentNode.removeChild(a.modules.dataTree.controlEl),a.modules.dataTree={index:a.modules.dataTree?a.modules.dataTree.index:0,open:!!c&&(a.modules.dataTree?a.modules.dataTree.open:this.startOpen(a.getComponent(),0)),controlEl:!!(a.modules.dataTree&&c)&&a.modules.dataTree.controlEl,branchEl:!!(a.modules.dataTree&&c)&&a.modules.dataTree.branchEl,parent:!!a.modules.dataTree&&a.modules.dataTree.parent,children:c}},s.prototype.layoutRow=function(c){var d=this.elementField?c.getCell(this.elementField):c.getCells()[0],b=d.getElement(),a=c.modules.dataTree;a.branchEl&&(a.branchEl.parentNode&&a.branchEl.parentNode.removeChild(a.branchEl),a.branchEl=!1),a.controlEl&&(a.controlEl.parentNode&&a.controlEl.parentNode.removeChild(a.controlEl),a.controlEl=!1),this.generateControlElement(c,b),c.getElement().classList.add("tabulator-tree-level-"+a.index),a.index&&(this.branchEl?(a.branchEl=this.branchEl.cloneNode(!0),b.insertBefore(a.branchEl,b.firstChild),this.table.rtl?a.branchEl.style.marginRight=(a.branchEl.offsetWidth+a.branchEl.style.marginLeft)*(a.index-1)+a.index*this.indent+"px":a.branchEl.style.marginLeft=(a.branchEl.offsetWidth+a.branchEl.style.marginRight)*(a.index-1)+a.index*this.indent+"px"):this.table.rtl?b.style.paddingRight=parseInt(window.getComputedStyle(b,null).getPropertyValue("padding-right"))+a.index*this.indent+"px":b.style.paddingLeft=parseInt(window.getComputedStyle(b,null).getPropertyValue("padding-left"))+a.index*this.indent+"px")},s.prototype.generateControlElement=function(c,b){var e=this,a=c.modules.dataTree,d;b=b||c.getCells()[0].getElement(),d=a.controlEl,a.children!==!1&&(a.open?(a.controlEl=this.collapseEl.cloneNode(!0),a.controlEl.addEventListener("click",function(a){a.stopPropagation(),e.collapseRow(c)})):(a.controlEl=this.expandEl.cloneNode(!0),a.controlEl.addEventListener("click",function(a){a.stopPropagation(),e.expandRow(c)})),a.controlEl.addEventListener("mousedown",function(a){a.stopPropagation()}),d&&d.parentNode===b?d.parentNode.replaceChild(a.controlEl,d):b.insertBefore(a.controlEl,b.firstChild))},s.prototype.setDisplayIndex=function(a){this.displayIndex=a},s.prototype.getDisplayIndex=function(){return this.displayIndex},s.prototype.getRows=function(b){var c=this,a=[];return b.forEach(function(b,g){var d,e;a.push(b),b instanceof f&&(b.create(),d=b.modules.dataTree.children,!d.index&&d.children!==!1&&(e=c.getChildren(b),e.forEach(function(b){b.create(),a.push(b)})))}),a},s.prototype.getChildren=function(d,e){var f=this,a=d.modules.dataTree,b=[],c=[];return a.children!==!1&&(a.open||e)&&(Array.isArray(a.children)||(a.children=this.generateChildren(d)),this.table.modExists("filter")&&this.table.options.dataTreeFilter?b=this.table.modules.filter.filter(a.children):b=a.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(b),b.forEach(function(a){c.push(a);var b=f.getChildren(a);b.forEach(function(a){c.push(a)})})),c},s.prototype.generateChildren=function(b){var c=this,d=[],a=b.getData()[this.field];return Array.isArray(a)||(a=[a]),a.forEach(function(e){var a=new f(e||{},c.table.rowManager);a.create(),a.modules.dataTree.index=b.modules.dataTree.index+1,a.modules.dataTree.parent=b,a.modules.dataTree.children&&(a.modules.dataTree.open=c.startOpen(a.getComponent(),a.modules.dataTree.index)),d.push(a)}),d},s.prototype.expandRow=function(a,c){var b=a.modules.dataTree;b.children!==!1&&(b.open=!0,a.reinitialize(),this.table.rowManager.refreshActiveData("tree",!1,!0),this.table.options.dataTreeRowExpanded(a.getComponent(),a.modules.dataTree.index))},s.prototype.collapseRow=function(a){var b=a.modules.dataTree;b.children!==!1&&(b.open=!1,a.reinitialize(),this.table.rowManager.refreshActiveData("tree",!1,!0),this.table.options.dataTreeRowCollapsed(a.getComponent(),a.modules.dataTree.index))},s.prototype.toggleRow=function(a){var b=a.modules.dataTree;b.children!==!1&&(b.open?this.collapseRow(a):this.expandRow(a))},s.prototype.getTreeParent=function(a){return!!a.modules.dataTree.parent&&a.modules.dataTree.parent.getComponent()},s.prototype.getFilteredTreeChildren=function(c){var a=c.modules.dataTree,d=[],b;return a.children&&(Array.isArray(a.children)||(a.children=this.generateChildren(c)),this.table.modExists("filter")&&this.table.options.dataTreeFilter?b=this.table.modules.filter.filter(a.children):b=a.children,b.forEach(function(a){a instanceof f&&d.push(a)})),d},s.prototype.rowDelete=function(c){var a=c.modules.dataTree.parent,b;a&&(b=this.findChildIndex(c,a),b!==!1&&a.data[this.field].splice(b,1),a.data[this.field].length||delete a.data[this.field],this.initializeRow(a),this.layoutRow(a)),this.table.rowManager.refreshActiveData("tree",!1,!0)},s.prototype.addTreeChildRow=function(a,b,d,e){var c=!1;typeof b=="string"&&(b=JSON.parse(b)),Array.isArray(a.data[this.field])||(a.data[this.field]=[],a.modules.dataTree.open=this.startOpen(a.getComponent(),a.modules.dataTree.index)),typeof e!="undefined"&&(c=this.findChildIndex(e,a),c!==!1&&a.data[this.field].splice(d?c:c+1,0,b)),c===!1&&(d?a.data[this.field].unshift(b):a.data[this.field].push(b)),this.initializeRow(a),this.layoutRow(a),this.table.rowManager.refreshActiveData("tree",!1,!0)},s.prototype.findChildIndex=function(c,d){var e=this,a=!1;return(typeof c=="undefined"?"undefined":b(c))=="object"?c instanceof f?a=c.data:c instanceof k?a=c._getSelf().data:typeof HTMLElement!="undefined"&&c instanceof HTMLElement&&d.modules.dataTree&&(a=d.modules.dataTree.children.find(function(a){return a instanceof f&&a.element===c}),a&&(a=a.data)):typeof c=="undefined"||c===null?a=!1:a=d.data[this.field].find(function(a){return a.data[e.table.options.index]==c}),a&&(Array.isArray(d.data[this.field])&&(a=d.data[this.field].indexOf(a)),a==-1&&(a=!1)),a},s.prototype.getTreeChildren=function(c,d,e){var g=this,a=c.modules.dataTree,b=[];return a.children&&(Array.isArray(a.children)||(a.children=this.generateChildren(c)),a.children.forEach(function(a){a instanceof f&&(b.push(d?a.getComponent():a),e&&(b=b.concat(g.getTreeChildren(a,d,e))))})),b},s.prototype.checkForRestyle=function(a){a.row.cells.indexOf(a)||a.row.reinitialize()},s.prototype.getChildField=function(){return this.field},s.prototype.redrawNeeded=function(a){return(!!this.field&&typeof a[this.field]!="undefined")||(!!this.elementField&&typeof a[this.elementField]!="undefined")},a.prototype.registerModule("dataTree",s),S=function(a){this.table=a},S.prototype.download=function(a,e,f,g,d){var b=this,c=!1,i;function h(c,f){d?d===!0?b.triggerDownload(c,f,a,e,!0):d(c):b.triggerDownload(c,f,a,e)}typeof a=="function"?c=a:b.downloaders[a]?c=b.downloaders[a]:console.warn("Download Error - No such download type found: ",a),c&&(i=this.generateExportList(g),c.call(this.table,i,f||{},h))},S.prototype.generateExportList=function(c){var b=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,c||this.table.options.downloadRowRange,"download"),a=this.table.options.groupHeaderDownload;return a&&!Array.isArray(a)&&(a=[a]),b.forEach(function(b){var c;b.type==="group"&&(c=b.columns[0],a&&a[b.indent]&&(c.value=a[b.indent](c.value,b.component._group.getRowCount(),b.component._group.getData(),b.component)))}),b},S.prototype.triggerDownload=function(e,f,d,c,g){var b=document.createElement("a"),a=new Blob([e],{type:f}),c=c||"Tabulator."+(typeof d=="function"?"txt":d);a=this.table.options.downloadReady.call(this.table,e,a),a&&(g?window.open(window.URL.createObjectURL(a)):navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(a,c):(b.setAttribute("href",window.URL.createObjectURL(a)),b.setAttribute("download",c),b.style.display="none",document.body.appendChild(b),b.click(),document.body.removeChild(b)),this.table.options.downloadComplete&&this.table.options.downloadComplete())},S.prototype.commsReceived=function(c,b,a){switch(b){case"intercept":this.download(a.type,"",a.options,a.active,a.intercept);break}},S.prototype.downloaders={csv:function(f,c,g){var e=c&&c.delimiter?c.delimiter:",",a=[],d=[];f.forEach(function(c){var f=[];switch(c.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":c.columns.forEach(function(a,b){a&&a.depth===1&&(d[b]=typeof a.value=="undefined"||a.value===null?"":'"'+String(a.value).split('"').join('""')+'"')});break;case"row":c.columns.forEach(function(a){if(a){switch(b(a.value)){case"object":a.value=JSON.stringify(a.value);break;case"undefined":case"null":a.value="";break}f.push('"'+String(a.value).split('"').join('""')+'"')}}),a.push(f.join(e));break}}),d.length&&a.unshift(d.join(e)),a=a.join("\n"),c.bom&&(a="\uFEFF"+a),g(a,"text/csv")},json:function(b,e,c){var a=[];b.forEach(function(b){var c={};switch(b.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":b.columns.forEach(function(a){a&&(c[a.component.getField()]=a.value)}),a.push(c);break}}),a=JSON.stringify(a,null,"	"),c(a,"application/json")},pdf:function(m,a,j){var h=[],f=[],c={},k=a.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},l=a.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},d=a.jsPDF||{},i=a&&a.title?a.title:"",e;d.orientation||(d.orientation=a.orientation||"landscape"),d.unit||(d.unit="pt"),m.forEach(function(a){var b={};switch(a.type){case"header":h.push(g(a));break;case"group":f.push(g(a,k));break;case"calc":f.push(g(a,l));break;case"row":f.push(g(a));break}});function g(d,c){var a=[];return d.columns.forEach(function(d){var e;if(d){switch(b(d.value)){case"object":d.value=JSON.stringify(d.value);break;case"undefined":case"null":d.value="";break}e={content:d.value,colSpan:d.width,rowSpan:d.height},c&&(e.styles=c),a.push(e)}else a.push("")}),a}e=new jsPDF(d),a&&a.autoTable&&(typeof a.autoTable=="function"?c=a.autoTable(e)||{}:c=a.autoTable),i&&(c.addPageContent=function(a){e.text(i,40,30)}),c.head=h,c.body=f,e.autoTable(c),a&&a.documentProcessing&&a.documentProcessing(e),j(e.output("arraybuffer"),"application/pdf")},xlsx:function(e,c,i){var j=this,g=c.sheetName||"Sheet1",a=XLSX.utils.book_new(),h,d;a.SheetNames=[],a.Sheets={};function f(){var d=[],c=[],a={},f={s:{c:0,r:0},e:{c:e[0]?e[0].columns.reduce(function(b,a){return b+(a&&a.width?a.width:1)},0):0,r:e.length}};return e.forEach(function(f,e){var a=[];f.columns.forEach(function(d,f){d?(a.push(!(d.value instanceof Date)&&b(d.value)==="object"?JSON.stringify(d.value):d.value),(d.width>1||d.height>-1)&&c.push({s:{r:e,c:f},e:{r:e+d.height-1,c:f+d.width-1}})):a.push("")}),d.push(a)}),XLSX.utils.sheet_add_aoa(a,d),a["!ref"]=XLSX.utils.encode_range(f),c.length&&(a["!merges"]=c),a}if(c.sheetOnly){i(f());return}if(c.sheets)for(d in c.sheets)c.sheets[d]===!0?(a.SheetNames.push(d),a.Sheets[d]=f()):(a.SheetNames.push(d),this.modules.comms.send(c.sheets[d],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:j.active,intercept:function(b){a.Sheets[d]=b}}));else a.SheetNames.push(g),a.Sheets[g]=f();c.documentProcessing&&(a=c.documentProcessing(a));function k(b){for(var c=new ArrayBuffer(b.length),d=new Uint8Array(c),a=0;a!=b.length;++a)d[a]=b.charCodeAt(a)&255;return c}h=XLSX.write(a,{bookType:"xlsx",bookSST:!0,type:"binary"}),i(k(h),"application/octet-stream")},html:function(a,d,b){this.modExists("export",!0)&&b(this.modules.export.genereateHTMLTable(a),"text/html")}},a.prototype.registerModule("download",S),A=function(a){this.table=a,this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[]},A.prototype.initializeColumn=function(a){var d=this,c={editor:!1,blocked:!1,check:a.definition.editable,params:a.definition.editorParams||{}};switch(b(a.definition.editor)){case"string":a.definition.editor==="tick"&&(a.definition.editor="tickCross",console.warn("DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor")),d.editors[a.definition.editor]?c.editor=d.editors[a.definition.editor]:console.warn("Editor Error - No such editor found: ",a.definition.editor);break;case"function":c.editor=a.definition.editor;break;case"boolean":a.definition.editor===!0&&(typeof a.definition.formatter!="function"?(a.definition.formatter==="tick"&&(a.definition.formatter="tickCross",console.warn("DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor")),d.editors[a.definition.formatter]?c.editor=d.editors[a.definition.formatter]:c.editor=d.editors.input):console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",a.definition.formatter));break}c.editor&&(a.modules.edit=c)},A.prototype.getCurrentCell=function(){return!!this.currentCell&&this.currentCell.getComponent()},A.prototype.clearEditor=function(c){var b=this.currentCell,a;if(this.invalidEdit=!1,b){for(this.currentCell=!1,a=b.getElement(),c?b.validate():a.classList.remove("tabulator-validation-fail"),a.classList.remove("tabulator-editing");a.firstChild;)a.removeChild(a.firstChild);b.row.getElement().classList.remove("tabulator-row-editing")}},A.prototype.cancelEdit=function(){var a,b;this.currentCell&&(a=this.currentCell,b=this.currentCell.getComponent(),this.clearEditor(!0),a.setValueActual(a.getValue()),a.cellRendered(),(a.column.definition.editor=="textarea"||a.column.definition.variableHeight)&&a.row.normalizeHeight(!0),a.column.cellEvents.cellEditCancelled&&a.column.cellEvents.cellEditCancelled.call(this.table,b),this.table.options.cellEditCancelled.call(this.table,b))},A.prototype.bindEditor=function(c){var b=this,a=c.getElement(!0);a.setAttribute("tabindex",0),a.addEventListener("click",function(b){a.classList.contains("tabulator-editing")||a.focus({preventScroll:!0})}),a.addEventListener("mousedown",function(a){a.button===2?a.preventDefault():b.mouseClick=!0}),a.addEventListener("focus",function(a){b.recursionBlock||b.edit(c,a,!1)})},A.prototype.focusCellNoEvent=function(a,b){this.recursionBlock=!0,b&&this.table.browser==="ie"||a.getElement().focus({preventScroll:!0}),this.recursionBlock=!1},A.prototype.editCell=function(a,b){this.focusCellNoEvent(a),this.edit(a,!1,b)},A.prototype.focusScrollAdjust=function(h){var f,e,b,g,d,c,a;this.table.rowManager.getRenderMode()=="virtual"&&(f=this.table.rowManager.element.scrollTop,e=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,b=h.row.getElement(),g=b.offsetTop,b.offsetTop<f?this.table.rowManager.element.scrollTop-=f-b.offsetTop:b.offsetTop+b.offsetHeight>e&&(this.table.rowManager.element.scrollTop+=b.offsetTop+b.offsetHeight-e),d=this.table.rowManager.element.scrollLeft,c=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,a=h.getElement(),g=a.offsetLeft,this.table.modExists("frozenColumns")&&(d+=parseInt(this.table.modules.frozenColumns.leftMargin),c-=parseInt(this.table.modules.frozenColumns.rightMargin)),this.table.options.virtualDomHoz&&(d-=parseInt(this.table.vdomHoz.vDomPadLeft),c-=parseInt(this.table.vdomHoz.vDomPadLeft)),a.offsetLeft<d?this.table.rowManager.element.scrollLeft-=d-a.offsetLeft:a.offsetLeft+a.offsetWidth>c&&(this.table.rowManager.element.scrollLeft+=a.offsetLeft+a.offsetWidth-c))},A.prototype.edit=function(a,i,p){var c=this,h=!0,g=function(){},d=a.getElement(),f,e,l,k,j;if(this.currentCell){this.invalidEdit||this.cancelEdit();return}function m(e){if(c.currentCell===a){var b=!0;return a.column.modules.validate&&c.table.modExists("validate")&&c.table.options.validationMode!="manual"&&(b=c.table.modules.validate.validate(a.column.modules.validate,a,e)),b===!0||c.table.options.validationMode==="highlight"?!(c.clearEditor(),a.modules.edit||(a.modules.edit={}),a.modules.edit.edited=!0,c.editedCells.indexOf(a)==-1&&c.editedCells.push(a),a.setValue(e,!0),c.table.options.dataTree&&c.table.modExists("dataTree")&&c.table.modules.dataTree.checkForRestyle(a),b!==!0)||(d.classList.add("tabulator-validation-fail"),c.table.options.validationFailed.call(c.table,a.getComponent(),e,b),!1):(c.invalidEdit=!0,d.classList.add("tabulator-validation-fail"),c.focusCellNoEvent(a,!0),g(),c.table.options.validationFailed.call(c.table,a.getComponent(),e,b),!1)}}function n(){c.currentCell===a&&(c.cancelEdit(),c.table.options.dataTree&&c.table.modExists("dataTree")&&c.table.modules.dataTree.checkForRestyle(a))}function o(a){g=a}if(a.column.modules.edit.blocked)return this.mouseClick=!1,d.blur(),!1;else{switch(i&&i.stopPropagation(),b(a.column.modules.edit.check)){case"function":h=a.column.modules.edit.check(a.getComponent());break;case"boolean":h=a.column.modules.edit.check;break}if(h||p){if(c.cancelEdit(),c.currentCell=a,this.focusScrollAdjust(a),e=a.getComponent(),this.mouseClick&&(this.mouseClick=!1,a.column.cellEvents.cellClick&&a.column.cellEvents.cellClick.call(this.table,i,e)),a.column.cellEvents.cellEditing&&a.column.cellEvents.cellEditing.call(this.table,e),c.table.options.cellEditing.call(this.table,e),l=typeof a.column.modules.edit.params=="function"?a.column.modules.edit.params(e):a.column.modules.edit.params,f=a.column.modules.edit.editor.call(c,e,o,m,n,l),f!==!1)if(f instanceof Node){for(d.classList.add("tabulator-editing"),a.row.getElement().classList.add("tabulator-row-editing");d.firstChild;)d.removeChild(d.firstChild);d.appendChild(f),g(),k=d.children;for(j=0;j<k.length;j++)k[j].addEventListener("click",function(a){a.stopPropagation()})}else return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",f),d.blur(),!1;else return d.blur(),!1;return!0}return this.mouseClick=!1,d.blur(),!1}},A.prototype.maskInput=function(a,b){var c=b.mask,f=typeof b.maskLetterChar!="undefined"?b.maskLetterChar:"A",g=typeof b.maskNumberChar!="undefined"?b.maskNumberChar:"9",h=typeof b.maskWildcardChar!="undefined"?b.maskWildcardChar:"*",d=!1;function e(d){var b=c[d];typeof b!="undefined"&&b!==h&&b!==f&&b!==g&&(a.value=a.value+""+b,e(d+1))}a.addEventListener("keydown",function(b){var i=a.value.length,e=b.key;if(b.keyCode>46){if(i>=c.length)return b.preventDefault(),b.stopPropagation(),d=!1,!1;switch(c[i]){case f:if(e.toUpperCase()==e.toLowerCase())return b.preventDefault(),b.stopPropagation(),d=!1,!1;break;case g:if(isNaN(e))return b.preventDefault(),b.stopPropagation(),d=!1,!1;break;case h:break;default:if(e!==c[i])return b.preventDefault(),b.stopPropagation(),d=!1,!1}d=!0}}),a.addEventListener("keyup",function(c){c.keyCode>46&&b.maskAutoFill&&e(a.value.length)}),a.placeholder||(a.placeholder=c),b.maskAutoFill&&e(a.value.length)},A.prototype.getEditedCells=function(){var a=[];return this.editedCells.forEach(function(b){a.push(b.getComponent())}),a},A.prototype.clearEdited=function(a){var b;a.modules.edit&&a.modules.edit.edited&&(a.modules.edit.edited=!1,a.modules.validate&&(a.modules.validate.invalid=!1)),b=this.editedCells.indexOf(a),b>-1&&this.editedCells.splice(b,1)},A.prototype.editors={input:function(h,i,j,g,d){var e=h.getValue(),a=document.createElement("input"),c;if(a.setAttribute("type",d.search?"search":"text"),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",d.elementAttributes&&b(d.elementAttributes)=="object")for(c in d.elementAttributes)c.charAt(0)=="+"?(c=c.slice(1),a.setAttribute(c,a.getAttribute(c)+d.elementAttributes["+"+c])):a.setAttribute(c,d.elementAttributes[c]);a.value=typeof e!="undefined"?e:"",i(function(){a.focus({preventScroll:!0}),a.style.height="100%"});function f(b){(e===null||typeof e=="undefined")&&a.value!==""||a.value!==e?j(a.value)&&(e=a.value):g()}return a.addEventListener("change",f),a.addEventListener("blur",f),a.addEventListener("keydown",function(a){switch(a.keyCode){case 13:f(a);break;case 27:g();break;case 35:case 36:a.stopPropagation();break}}),d.mask&&this.table.modules.edit.maskInput(a,d),a},textarea:function(f,m,l,i,d){var o=this,e=f.getValue(),g=d.verticalNavigation||"hybrid",j=String(e!==null&&typeof e!="undefined"?e:""),n=(j.match(/(?:\r\n|\r|\n)/g)||[]).length+1,a=document.createElement("textarea"),h=0,c;if(a.style.display="block",a.style.padding="2px",a.style.height="100%",a.style.width="100%",a.style.boxSizing="border-box",a.style.whiteSpace="pre-wrap",a.style.resize="none",d.elementAttributes&&b(d.elementAttributes)=="object")for(c in d.elementAttributes)c.charAt(0)=="+"?(c=c.slice(1),a.setAttribute(c,a.getAttribute(c)+d.elementAttributes["+"+c])):a.setAttribute(c,d.elementAttributes[c]);a.value=j,m(function(){a.focus({preventScroll:!0}),a.style.height="100%",a.scrollHeight,a.style.height=a.scrollHeight+"px",f.getRow().normalizeHeight()});function k(b){(e===null||typeof e=="undefined")&&a.value!==""||a.value!==e?(l(a.value)&&(e=a.value),setTimeout(function(){f.getRow().normalizeHeight()},300)):i()}return a.addEventListener("change",k),a.addEventListener("blur",k),a.addEventListener("keyup",function(){a.style.height="";var b=a.scrollHeight;a.style.height=b+"px",b!=h&&(h=b,f.getRow().normalizeHeight())}),a.addEventListener("keydown",function(b){switch(b.keyCode){case 27:i();break;case 38:(g=="editor"||g=="hybrid"&&a.selectionStart)&&(b.stopImmediatePropagation(),b.stopPropagation());break;case 40:(g=="editor"||g=="hybrid"&&a.selectionStart!==a.value.length)&&(b.stopImmediatePropagation(),b.stopPropagation());break;case 35:case 36:b.stopPropagation();break}}),d.mask&&this.table.modules.edit.maskInput(a,d),a},number:function(i,k,l,f,c){var e=i.getValue(),j=c.verticalNavigation||"editor",a=document.createElement("input"),d,g;if(a.setAttribute("type","number"),typeof c.max!="undefined"&&a.setAttribute("max",c.max),typeof c.min!="undefined"&&a.setAttribute("min",c.min),typeof c.step!="undefined"&&a.setAttribute("step",c.step),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",c.elementAttributes&&b(c.elementAttributes)=="object")for(d in c.elementAttributes)d.charAt(0)=="+"?(d=d.slice(1),a.setAttribute(d,a.getAttribute(d)+c.elementAttributes["+"+d])):a.setAttribute(d,c.elementAttributes[d]);a.value=e,g=function(b){h()},k(function(){a.removeEventListener("blur",g),a.focus({preventScroll:!0}),a.style.height="100%",a.addEventListener("blur",g)});function h(){var b=a.value;!isNaN(b)&&b!==""&&(b=Number(b)),b!==e?l(b)&&(e=b):f()}return a.addEventListener("keydown",function(a){switch(a.keyCode){case 13:h();break;case 27:f();break;case 38:case 40:j=="editor"&&(a.stopImmediatePropagation(),a.stopPropagation());break;case 35:case 36:a.stopPropagation();break}}),c.mask&&this.table.modules.edit.maskInput(a,c),a},range:function(h,i,j,g,c){var e=h.getValue(),a=document.createElement("input"),d;if(a.setAttribute("type","range"),typeof c.max!="undefined"&&a.setAttribute("max",c.max),typeof c.min!="undefined"&&a.setAttribute("min",c.min),typeof c.step!="undefined"&&a.setAttribute("step",c.step),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",c.elementAttributes&&b(c.elementAttributes)=="object")for(d in c.elementAttributes)d.charAt(0)=="+"?(d=d.slice(1),a.setAttribute(d,a.getAttribute(d)+c.elementAttributes["+"+d])):a.setAttribute(d,c.elementAttributes[d]);a.value=e,i(function(){a.focus({preventScroll:!0}),a.style.height="100%"});function f(){var b=a.value;!isNaN(b)&&b!==""&&(b=Number(b)),b!=e?j(b)&&(e=b):g()}return a.addEventListener("blur",function(a){f()}),a.addEventListener("keydown",function(a){switch(a.keyCode){case 13:f();break;case 27:g();break}}),a},select:function(o,M,B,H,c){var I=this,l=this,t=o.getElement(),j=o.getValue(),q=c.verticalNavigation||"editor",n=typeof j!="undefined"||j===null?Array.isArray(j)?j:[j]:typeof c.defaultValue!="undefined"?c.defaultValue:[],d=document.createElement("input"),e=document.createElement("div"),h=c.multiselect,i=[],g={},D=[],f=[],m=!0,z=!1,x="",C=null,k;(Array.isArray(c)||!Array.isArray(c)&&(typeof c=="undefined"?"undefined":b(c))==="object"&&!c.values)&&(console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),c={values:c});function G(b){var c={},d=l.table.getData(),a;return b?a=l.table.columnManager.getColumnByField(b):a=o.getColumn()._getSelf(),a?d.forEach(function(d){var b=a.getFieldValue(d);b!==null&&typeof b!="undefined"&&b!==""&&(c[b]=!0)}):console.warn("unable to find matching column to create select lookup list:",b),Object.keys(c)}function y(a,g){var e=[],d=[],j,f;function h(a){var a={label:a.label,value:a.value,itemParams:a.itemParams,elementAttributes:a.elementAttributes,element:!1};return g.indexOf(a.value)>-1&&r(a),e.push(a),d.push(a),a}if(typeof a=="function"&&(a=a(o)),Array.isArray(a))a.forEach(function(a){var c;(typeof a=="undefined"?"undefined":b(a))==="object"?a.options?(c={label:a.label,group:!0,itemParams:a.itemParams,elementAttributes:a.elementAttributes,element:!1},d.push(c),a.options.forEach(function(a){h(a)})):h(a):(c={label:a,value:a,element:!1},g.indexOf(c.value)>-1&&r(c),e.push(c),d.push(c))});else for(j in a)f={label:a[j],value:j,element:!1},g.indexOf(f.value)>-1&&r(f),e.push(f),d.push(f);c.sortValuesList&&(e.sort(function(a,b){return a.label<b.label?-1:a.label>b.label?1:0}),d.sort(function(a,b){return a.label<b.label?-1:a.label>b.label?1:0}),c.sortValuesList!=="asc"&&(e.reverse(),d.reverse())),i=e,D=d,K()}function K(){while(e.firstChild)e.removeChild(e.firstChild);D.forEach(function(a){var g=a.element,i;if(!g){if(g=document.createElement("div"),a.label=c.listItemFormatter?c.listItemFormatter(a.value,a.label,o,g,a.itemParams):a.label,a.group?(g.classList.add("tabulator-edit-select-list-group"),g.tabIndex=0,g.innerHTML=a.label===""?"&nbsp;":a.label):(g.classList.add("tabulator-edit-select-list-item"),g.tabIndex=0,g.innerHTML=a.label===""?"&nbsp;":a.label,g.addEventListener("click",function(){z=!0,setTimeout(function(){z=!1},10),h?(F(a),d.focus()):A(a)}),f.indexOf(a)>-1&&g.classList.add("active")),a.elementAttributes&&b(a.elementAttributes)=="object")for(i in a.elementAttributes)i.charAt(0)=="+"?(i=i.slice(1),g.setAttribute(i,d.getAttribute(i)+a.elementAttributes["+"+i])):g.setAttribute(i,a.elementAttributes[i]);g.addEventListener("mousedown",function(){m=!1,setTimeout(function(){m=!0},10)}),a.element=g}e.appendChild(g)})}function p(a,b){!h&&g&&g.element&&g.element.classList.remove("active"),g&&g.element&&g.element.classList.remove("focused"),g=a,a.element&&(a.element.classList.add("focused"),b&&a.element.classList.add("active")),a&&a.element&&a.element.scrollIntoView&&a.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function r(a){var b=f.indexOf(a);b==-1&&(f.push(a),p(a,!0)),E()}function u(a){var b=f[a];a>-1&&(f.splice(a,1),b.element&&b.element.classList.remove("active"))}function F(a){a||(a=g);var b=f.indexOf(a);b>-1?u(b):(h!==!0&&f.length>=h&&u(0),r(a)),E()}function A(a){w(),a||(a=g),a&&(d.value=a.label,B(a.value)),n=[a.value]}function v(b){b||w();var a=[];f.forEach(function(b){a.push(b.value)}),n=a,B(a)}function E(){var a=[];f.forEach(function(b){a.push(b.label)}),d.value=a.join(", "),l.currentCell===!1&&v(!0)}function J(){for(var b=f.length,a=0;a<b;a++)u(0)}function s(){w(),H()}function L(){if(f=[],!e.parentNode){c.values===!0?y(G(),n):typeof c.values=="string"?y(G(c.values),n):y(c.values||[],n);var b=a.prototype.helpers.elOffset(t);e.style.minWidth=t.offsetWidth+"px",e.style.top=b.top+t.offsetHeight+"px",e.style.left=b.left+"px",e.addEventListener("mousedown",function(a){m=!1,setTimeout(function(){m=!0},10)}),document.body.appendChild(e)}}function w(){e.parentNode&&e.parentNode.removeChild(e),N()}function N(){l.table.rowManager.element.removeEventListener("scroll",s)}function O(c){var b,a;clearTimeout(C),b=String.fromCharCode(event.keyCode).toLowerCase(),x+=b.toLowerCase(),a=i.find(function(a){return typeof a.label!="undefined"&&a.label.toLowerCase().startsWith(x)}),a&&p(a,!h),C=setTimeout(function(){x=""},800)}if(d.setAttribute("type","text"),d.style.padding="4px",d.style.width="100%",d.style.boxSizing="border-box",d.style.cursor="default",d.readOnly=this.currentCell!=!1,c.elementAttributes&&b(c.elementAttributes)=="object")for(k in c.elementAttributes)k.charAt(0)=="+"?(k=k.slice(1),d.setAttribute(k,d.getAttribute(k)+c.elementAttributes["+"+k])):d.setAttribute(k,c.elementAttributes[k]);return d.value=typeof j!="undefined"||j===null?j:"",d.addEventListener("search",function(a){d.value||(J(),v())}),d.addEventListener("keydown",function(a){var b;switch(a.keyCode){case 38:b=i.indexOf(g),(q=="editor"||q=="hybrid"&&b)&&(a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault(),b>0&&p(i[b-1],!h));break;case 40:b=i.indexOf(g),(q=="editor"||q=="hybrid"&&b<i.length-1)&&(a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault(),b<i.length-1&&(b==-1?p(i[0],!h):p(i[b+1],!h)));break;case 37:case 39:a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault();break;case 13:h?F():A();break;case 27:s();break;case 9:break;default:l.currentCell===!1&&a.preventDefault(),a.keyCode>=38&&a.keyCode<=90&&O(a.keyCode)}}),d.addEventListener("blur",function(a){m&&(h?v():s())}),d.addEventListener("focus",function(a){z||L()}),e=document.createElement("div"),e.classList.add("tabulator-edit-select-list"),M(function(){d.style.height="100%",d.focus({preventScroll:!0})}),setTimeout(function(){I.table.rowManager.element.addEventListener("scroll",s)},10),d},autocomplete:function(v,H,u,t,c){var F=this,q=this,p=v.getElement(),h=v.getValue(),n=c.verticalNavigation||"editor",l=typeof h!="undefined"||h===null?h:typeof c.defaultValue!="undefined"?c.defaultValue:"",d=document.createElement("input"),e=document.createElement("div"),J=[],g=[],I=[],f=!1,k=!0,m=!1,i;if(d.setAttribute("type","search"),d.style.padding="4px",d.style.width="100%",d.style.boxSizing="border-box",c.elementAttributes&&b(c.elementAttributes)=="object")for(i in c.elementAttributes)i.charAt(0)=="+"?(i=i.slice(1),d.setAttribute(i,d.getAttribute(i)+c.elementAttributes["+"+i])):d.setAttribute(i,c.elementAttributes[i]);e.classList.add("tabulator-edit-select-list"),e.addEventListener("mousedown",function(a){k=!1,setTimeout(function(){k=!0},10)});function z(){c.values===!0?m=y():typeof c.values=="string"&&(m=y(c.values))}function y(d){var a={},e=q.table.getData(),b;return d?b=q.table.columnManager.getColumnByField(d):b=v.getColumn()._getSelf(),b?(e.forEach(function(d){var c=b.getFieldValue(d);c!==null&&typeof c!="undefined"&&c!==""&&(a[c]=!0)}),c.sortValuesList?c.sortValuesList=="asc"?a=Object.keys(a).sort():a=Object.keys(a).sort().reverse():a=Object.keys(a)):console.warn("unable to find matching column to create autocomplete lookup list:",d),a}function o(b,e){var a=[],d,f,g;m?d=m:d=c.values||[],c.searchFunc?(a=c.searchFunc(b,d),a instanceof Promise?(A(typeof c.searchingPlaceholder!="undefined"?c.searchingPlaceholder:"Searching..."),a.then(function(a){x(s(a),e)}).catch(function(a){console.err("error in autocomplete search promise:",a)})):x(s(a),e)):(f=s(d),b===""?c.showListOnEmpty&&(a=f):f.forEach(function(c){(c.value!==null||typeof c.value!="undefined")&&(String(c.value).toLowerCase().indexOf(String(b).toLowerCase())>-1||String(c.title).toLowerCase().indexOf(String(b).toLowerCase())>-1)&&a.push(c)}),x(a,e))}function A(b){var a=document.createElement("div");C(),b!==!1&&(a.classList.add("tabulator-edit-select-list-notice"),a.tabIndex=0,b instanceof Node?a.appendChild(b):a.innerHTML=b,e.appendChild(a))}function s(a){var e=[],d,f;if(Array.isArray(a))a.forEach(function(a){var d={};(typeof a=="undefined"?"undefined":b(a))==="object"?(d.title=c.listItemFormatter?c.listItemFormatter(a.value,a.label):a.label,d.value=a.value):(d.title=c.listItemFormatter?c.listItemFormatter(a,a):a,d.value=a),e.push(d)});else for(d in a)f={title:c.listItemFormatter?c.listItemFormatter(d,a[d]):a[d],value:d},e.push(f);return e}function C(){while(e.firstChild)e.removeChild(e.firstChild)}function x(a,b){a.length?E(a,b):c.emptyPlaceholder&&A(c.emptyPlaceholder)}function E(b,c){var a=!1;C(),g=b,g.forEach(function(b){var g=b.element;g||(g=document.createElement("div"),g.classList.add("tabulator-edit-select-list-item"),g.tabIndex=0,g.innerHTML=b.title,g.addEventListener("click",function(a){j(b),r()}),g.addEventListener("mousedown",function(a){k=!1,setTimeout(function(){k=!0},10)}),b.element=g,c&&b.value==h&&(d.value=b.title,b.element.classList.add("active"),a=!0),b===f&&(b.element.classList.add("active"),a=!0)),e.appendChild(g)}),a||j(!1)}function r(){B(),f?h!==f.value?(h=f.value,d.value=f.title,u(f.value)):t():c.freetext?(h=d.value,u(d.value)):c.allowEmpty&&d.value===""?(h=d.value,u(d.value)):t()}function G(){if(!e.parentNode){for(console.log("show",l);e.firstChild;)e.removeChild(e.firstChild);var b=a.prototype.helpers.elOffset(p);e.style.minWidth=p.offsetWidth+"px",e.style.top=b.top+p.offsetHeight+"px",e.style.left=b.left+"px",document.body.appendChild(e)}}function j(a,b){f&&f.element&&f.element.classList.remove("active"),f=a,a&&a.element&&a.element.classList.add("active"),a&&a.element&&a.element.scrollIntoView&&a.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function B(){e.parentNode&&e.parentNode.removeChild(e),D()}function w(){B(),t()}function D(){q.table.rowManager.element.removeEventListener("scroll",w)}return d.addEventListener("keydown",function(a){var b;switch(a.keyCode){case 38:b=g.indexOf(f),(n=="editor"||n=="hybrid"&&b)&&(a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault(),b>0?j(g[b-1]):j(!1));break;case 40:b=g.indexOf(f),(n=="editor"||n=="hybrid"&&b<g.length-1)&&(a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault(),b<g.length-1&&(b==-1?j(g[0]):j(g[b+1])));break;case 37:case 39:a.stopImmediatePropagation(),a.stopPropagation();break;case 13:r();break;case 27:w();break;case 36:case 35:a.stopImmediatePropagation();break}}),d.addEventListener("keyup",function(a){switch(a.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:o(d.value)}}),d.addEventListener("search",function(a){o(d.value)}),d.addEventListener("blur",function(a){k&&r()}),d.addEventListener("focus",function(b){var a=l;z(),G(),d.value=a,o(a,!0)}),H(function(){d.style.height="100%",d.focus({preventScroll:!0})}),c.mask&&this.table.modules.edit.maskInput(d,c),setTimeout(function(){F.table.rowManager.element.addEventListener("scroll",w)},10),z(),d.value=l,o(l,!0),d},star:function(p,s,i,o,g){var n=this,c=p.getElement(),e=p.getValue(),k=c.getElementsByTagName("svg").length||5,l=c.getElementsByTagName("svg")[0]?c.getElementsByTagName("svg")[0].getAttribute("width"):14,m=[],a=document.createElement("div"),f=document.createElementNS("http://www.w3.org/2000/svg","svg"),d,j;function h(a){m.forEach(function(b,c){c<a?(n.table.browser=="ie"?b.setAttribute("class","tabulator-star-active"):b.classList.replace("tabulator-star-inactive","tabulator-star-active"),b.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):(n.table.browser=="ie"?b.setAttribute("class","tabulator-star-inactive"):b.classList.replace("tabulator-star-active","tabulator-star-inactive"),b.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function r(d){var b=document.createElement("span"),e=f.cloneNode(!0);m.push(e),b.addEventListener("mouseenter",function(a){a.stopPropagation(),a.stopImmediatePropagation(),h(d)}),b.addEventListener("mousemove",function(a){a.stopPropagation(),a.stopImmediatePropagation()}),b.addEventListener("click",function(a){a.stopPropagation(),a.stopImmediatePropagation(),i(d),c.blur()}),b.appendChild(e),a.appendChild(b)}function q(a){e=a,h(a)}if(c.style.whiteSpace="nowrap",c.style.overflow="hidden",c.style.textOverflow="ellipsis",a.style.verticalAlign="middle",a.style.display="inline-block",a.style.padding="4px",f.setAttribute("width",l),f.setAttribute("height",l),f.setAttribute("viewBox","0 0 512 512"),f.setAttribute("xml:space","preserve"),f.style.padding="0 1px",g.elementAttributes&&b(g.elementAttributes)=="object")for(d in g.elementAttributes)d.charAt(0)=="+"?(d=d.slice(1),a.setAttribute(d,a.getAttribute(d)+g.elementAttributes["+"+d])):a.setAttribute(d,g.elementAttributes[d]);for(j=1;j<=k;j++)r(j);return e=Math.min(parseInt(e),k),h(e),a.addEventListener("mousemove",function(a){h(0)}),a.addEventListener("click",function(a){i(0)}),c.addEventListener("blur",function(a){o()}),c.addEventListener("keydown",function(a){switch(a.keyCode){case 39:q(e+1);break;case 37:q(e-1);break;case 13:i(e);break;case 27:o();break}}),a},progress:function(n,q,p,m,e){var c=n.getElement(),j=typeof e.max=="undefined"?c.getElementsByTagName("div")[0].getAttribute("max")||100:e.max,i=typeof e.min=="undefined"?c.getElementsByTagName("div")[0].getAttribute("min")||0:e.min,l=(j-i)/100,f=n.getValue()||0,d=document.createElement("div"),a=document.createElement("div"),h,k,g;function o(){var b=window.getComputedStyle(c,null),d=l*Math.round(a.offsetWidth/((c.clientWidth-parseInt(b.getPropertyValue("padding-left"))-parseInt(b.getPropertyValue("padding-right")))/100))+i;p(d),c.setAttribute("aria-valuenow",d),c.setAttribute("aria-label",f)}if(d.style.position="absolute",d.style.right="0",d.style.top="0",d.style.bottom="0",d.style.width="5px",d.classList.add("tabulator-progress-handle"),a.style.display="inline-block",a.style.position="relative",a.style.height="100%",a.style.backgroundColor="#488CE9",a.style.maxWidth="100%",a.style.minWidth="0%",e.elementAttributes&&b(e.elementAttributes)=="object")for(g in e.elementAttributes)g.charAt(0)=="+"?(g=g.slice(1),a.setAttribute(g,a.getAttribute(g)+e.elementAttributes["+"+g])):a.setAttribute(g,e.elementAttributes[g]);return c.style.padding="4px 4px",f=Math.min(parseFloat(f),j),f=Math.max(parseFloat(f),i),f=Math.round((f-i)/l),a.style.width=f+"%",c.setAttribute("aria-valuemin",i),c.setAttribute("aria-valuemax",j),a.appendChild(d),d.addEventListener("mousedown",function(b){h=b.screenX,k=a.offsetWidth}),d.addEventListener("mouseover",function(){d.style.cursor="ew-resize"}),c.addEventListener("mousemove",function(b){h&&(a.style.width=k+b.screenX-h+"px")}),c.addEventListener("mouseup",function(a){h&&(a.stopPropagation(),a.stopImmediatePropagation(),h=!1,k=!1,o())}),c.addEventListener("keydown",function(b){switch(b.keyCode){case 39:b.preventDefault(),a.style.width=a.clientWidth+c.clientWidth/100+"px";break;case 37:b.preventDefault(),a.style.width=a.clientWidth-c.clientWidth/100+"px";break;case 9:case 13:o();break;case 27:m();break}}),c.addEventListener("blur",function(){m()}),a},tickCross:function(m,k,g,l,d){var e=m.getValue(),a=document.createElement("input"),j=d.tristate,h=typeof d.indeterminateValue=="undefined"?null:d.indeterminateValue,f=!1,c;if(a.setAttribute("type","checkbox"),a.style.marginTop="5px",a.style.boxSizing="border-box",d.elementAttributes&&b(d.elementAttributes)=="object")for(c in d.elementAttributes)c.charAt(0)=="+"?(c=c.slice(1),a.setAttribute(c,a.getAttribute(c)+d.elementAttributes["+"+c])):a.setAttribute(c,d.elementAttributes[c]);a.value=e,j&&(typeof e=="undefined"||e===h||e==="")&&(f=!0,a.indeterminate=!0),this.table.browser!="firefox"&&k(function(){a.focus({preventScroll:!0})}),a.checked=e===!0||e==="true"||e==="True"||e===1,k(function(){a.focus()});function i(b){return j?b?f?h:a.checked:a.checked&&!f?(a.checked=!1,a.indeterminate=!0,f=!0,h):(f=!1,a.checked):a.checked}return a.addEventListener("change",function(a){g(i())}),a.addEventListener("blur",function(a){g(i(!0))}),a.addEventListener("keydown",function(a){a.keyCode==13&&g(i()),a.keyCode==27&&l()}),a}},a.prototype.registerModule("edit",A),ab=function(a,b,c,d){this.type=a,this.columns=b,this.component=c||!1,this.indent=d||0},Z=function(a,b,c,d,e){this.value=a,this.component=b||!1,this.width=c,this.height=d,this.depth=e},u=function(a){this.table=a,this.config={},this.cloneTableStyle=!0,this.colVisProp=""},u.prototype.generateExportList=function(c,d,e,f){var a,b;return this.cloneTableStyle=d,this.config=c||{},this.colVisProp=f,a=this.config.columnHeaders!==!1?this.headersToExportRows(this.generateColumnGroupHeaders()):[],b=this.bodyToExportRows(this.rowLookup(e)),a.concat(b)},u.prototype.genereateTable=function(a,b,c,d){var e=this.generateExportList(a,b,c,d);return this.genereateTableElement(e)},u.prototype.rowLookup=function(b){var c=this,a=[];if(typeof b=="function")b.call(this.table).forEach(function(b){b=c.table.rowManager.findRow(b),b&&a.push(b)});else switch(b){case!0:case"visible":a=this.table.rowManager.getVisibleRows(!0);break;case"all":a=this.table.rowManager.rows;break;case"selected":a=this.table.modules.selectRow.selectedRows;break;case"active":default:this.table.options.pagination?a=this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length-2):a=this.table.rowManager.getDisplayRows()}return Object.assign([],a)},u.prototype.generateColumnGroupHeaders=function(){var b=this,a=[],c=this.config.columnGroups!==!1?this.table.columnManager.columns:this.table.columnManager.columnsByIndex;return c.forEach(function(d){var c=b.processColumnGroup(d);c&&a.push(c)}),a},u.prototype.processColumnGroup=function(b){var e=this,d=b.columns,c=0,f=b.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||b.definition.title,a={title:f,column:b,depth:1};if(d.length){if(a.subGroups=[],a.width=0,d.forEach(function(d){var b=e.processColumnGroup(d);b&&(a.width+=b.width,a.subGroups.push(b),b.depth>c&&(c=b.depth))}),a.depth+=c,!a.width)return!1}else if(this.columnVisCheck(b))a.width=1;else return!1;return a},u.prototype.columnVisCheck=function(a){return a.definition[this.colVisProp]!==!1&&(a.visible||!a.visible&&a.definition[this.colVisProp])},u.prototype.headersToExportRows=function(c){var a=[],b=0,d=[];function e(c,d){var h=b-d,f,g;if(typeof a[d]=="undefined"&&(a[d]=[]),c.height=c.subGroups?1:h-c.depth+1,a[d].push(c),c.height>1)for(f=1;f<c.height;f++)typeof a[d+f]=="undefined"&&(a[d+f]=[]),a[d+f].push(!1);if(c.width>1)for(g=1;g<c.width;g++)a[d].push(!1);c.subGroups&&c.subGroups.forEach(function(a){e(a,d+1)})}return c.forEach(function(a){a.depth>b&&(b=a.depth)}),c.forEach(function(a){e(a,0)}),a.forEach(function(b){var a=[];b.forEach(function(b){b?a.push(new Z(b.title,b.column.getComponent(),b.width,b.height,b.depth)):a.push(null)}),d.push(new ab("header",a))}),d},u.prototype.bodyToExportRows=function(b){var a=this,c=[],d=[];return this.table.columnManager.columnsByIndex.forEach(function(b){a.columnVisCheck(b)&&c.push(b.getComponent())}),this.config.columnCalcs!==!1&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&b.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&b.push(this.table.modules.columnCalcs.botRow)),b=b.filter(function(b){switch(b.type){case"group":return a.config.rowGroups!==!1;break;case"calc":return a.config.columnCalcs!==!1;break;case"row":return!(a.table.options.dataTree&&a.config.dataTree===!1&&b.modules.dataTree.parent);break}return!0}),b.forEach(function(b,h){var g=b.getData(a.colVisProp),e=[],f=0;switch(b.type){case"group":f=b.level,e.push(new Z(b.key,b.getComponent(),c.length,1));break;case"calc":case"row":c.forEach(function(a){e.push(new Z(a._column.getFieldValue(g),a,1,1))}),a.table.options.dataTree&&a.config.dataTree!==!1&&(f=b.modules.dataTree.index);break}d.push(new ab(b.type,e,b.getComponent(),f))}),d},u.prototype.genereateTableElement=function(g){var d=this,c=document.createElement("table"),e=document.createElement("thead"),f=document.createElement("tbody"),b=this.lookupTableStyles(),h=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],a={};return a.rowFormatter=h!==null?h:this.table.options.rowFormatter,this.table.options.dataTree&&this.config.dataTree!==!1&&this.table.modExists("columnCalcs")&&(a.treeElementField=this.table.modules.dataTree.elementField),a.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],a.groupHeader&&!Array.isArray(a.groupHeader)&&(a.groupHeader=[a.groupHeader]),c.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),e,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),g.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),g.forEach(function(c,h){switch(c.type){case"header":e.appendChild(d.genereateHeaderElement(c,a,b));break;case"group":f.appendChild(d.genereateGroupElement(c,a,b));break;case"calc":f.appendChild(d.genereateCalcElement(c,a,b));break;case"row":var g=d.genereateRowElement(c,a,b);d.mapElementStyles(h%2&&b.evenRow?b.evenRow:b.oddRow,g,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),f.appendChild(g);break}}),e.innerHTML&&c.appendChild(e),c.appendChild(f),this.mapElementStyles(this.table.element,c,["border-top","border-left","border-right","border-bottom"]),c},u.prototype.lookupTableStyles=function(){var a={};return this.cloneTableStyle&&window.getComputedStyle&&(a.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),a.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),a.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),a.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),a.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],a.firstRow&&(a.styleCells=a.firstRow.getElementsByClassName("tabulator-cell"),a.firstCell=a.styleCells[0],a.lastCell=a.styleCells[a.styleCells.length-1])),a},u.prototype.genereateHeaderElement=function(c,d,e){var a=this,b=document.createElement("tr");return c.columns.forEach(function(c){var d,e;c&&(d=document.createElement("th"),e=c.component._column.definition.cssClass?c.component._column.definition.cssClass.split(" "):[],d.colSpan=c.width,d.rowSpan=c.height,d.innerHTML=c.value,a.cloneTableStyle&&(d.style.boxSizing="border-box"),e.forEach(function(a){d.classList.add(a)}),a.mapElementStyles(c.component.getElement(),d,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),a.mapElementStyles(c.component._column.contentElement,d,["padding-top","padding-left","padding-right","padding-bottom"]),c.component._column.visible?a.mapElementStyles(c.component.getElement(),d,["width"]):c.component._column.definition.width&&(d.style.width=c.component._column.definition.width+"px"),c.component._column.parent&&a.mapElementStyles(c.component._column.parent.groupElement,d,["border-top"]),b.appendChild(d))}),b},u.prototype.genereateGroupElement=function(a,d,f){var c=document.createElement("tr"),e=document.createElement("td"),b=a.columns[0];return c.classList.add("tabulator-print-table-row"),d.groupHeader&&d.groupHeader[a.indent]?b.value=d.groupHeader[a.indent](b.value,a.component._group.getRowCount(),a.component._group.getData(),a.component):d.groupHeader===!1?b.value=b.value:b.value=a.component._group.generator(b.value,a.component._group.getRowCount(),a.component._group.getData(),a.component),e.colSpan=b.width,e.innerHTML=b.value,c.classList.add("tabulator-print-table-group"),c.classList.add("tabulator-group-level-"+a.indent),b.component.isVisible()&&c.classList.add("tabulator-group-visible"),this.mapElementStyles(f.firstGroup,c,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(f.firstGroup,e,["padding-top","padding-left","padding-right","padding-bottom"]),c.appendChild(e),c},u.prototype.genereateCalcElement=function(c,d,b){var a=this.genereateRowElement(c,d,b);return a.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(b.calcRow,a,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),a},u.prototype.genereateRowElement=function(a,d,f){var c=this,e=document.createElement("tr");return e.classList.add("tabulator-print-table-row"),a.columns.forEach(function(l){var h,j,g,k,m;if(l){if(h=document.createElement("td"),j=l.component._column,g=l.value,k={modules:{},getValue:function(){return g},getField:function(){return j.definition.field},getElement:function(){return h},getColumn:function(){return j.getComponent()},getData:function(){return a.component.getData()},getRow:function(){return a.component},getComponent:function(){return k},column:j},m=j.definition.cssClass?j.definition.cssClass.split(" "):[],m.forEach(function(a){h.classList.add(a)}),c.table.modExists("format")&&c.config.formatCells!==!1)g=c.table.modules.format.formatExportValue(k,c.colVisProp);else switch(typeof g=="undefined"?"undefined":b(g)){case"object":g=JSON.stringify(g);break;case"undefined":case"null":g="";break;default:g=g}g instanceof Node?h.appendChild(g):h.innerHTML=g,f.firstCell&&(c.mapElementStyles(f.firstCell,h,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),j.definition.align&&(h.style.textAlign=j.definition.align)),c.table.options.dataTree&&c.config.dataTree!==!1&&(d.treeElementField&&d.treeElementField==j.field||!d.treeElementField&&i==0)&&(a.component._row.modules.dataTree.controlEl&&h.insertBefore(a.component._row.modules.dataTree.controlEl.cloneNode(!0),h.firstChild),a.component._row.modules.dataTree.branchEl&&h.insertBefore(a.component._row.modules.dataTree.branchEl.cloneNode(!0),h.firstChild)),e.appendChild(h),k.modules.format&&k.modules.format.renderedCallback&&k.modules.format.renderedCallback(),d.rowFormatter&&c.config.formatCells!==!1&&d.rowFormatter(a.component)}}),e},u.prototype.genereateHTMLTable=function(b){var a=document.createElement("div");return a.appendChild(this.genereateTableElement(b)),a.innerHTML},u.prototype.getHtml=function(a,b,c,d){var e=this.generateExportList(c||this.table.options.htmlOutputConfig,b,a,d||"htmlOutput");return this.genereateHTMLTable(e)},u.prototype.mapElementStyles=function(a,b,e){var c,d;this.cloneTableStyle&&a&&b&&(c={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"},window.getComputedStyle&&(d=window.getComputedStyle(a),e.forEach(function(a){b.style[c[a]]=d.getPropertyValue(a)})))},a.prototype.registerModule("export",u),o=function(a){this.table=a,this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1},o.prototype.initializeColumn=function(a,g){var c=this,d=a.getField(),e;function f(f){var j=a.modules.filter.tagType=="input"&&a.modules.filter.attrType=="text"||a.modules.filter.tagType=="textarea"?"partial":"match",h="",i="",g;if(typeof a.modules.filter.prevSuccess=="undefined"||a.modules.filter.prevSuccess!==f){if(a.modules.filter.prevSuccess=f,a.modules.filter.emptyFunc(f))delete c.headerFilters[d];else{switch(a.modules.filter.value=f,b(a.definition.headerFilterFunc)){case"string":c.filters[a.definition.headerFilterFunc]?(h=a.definition.headerFilterFunc,g=function(d){var b=a.definition.headerFilterFuncParams||{},e=a.getFieldValue(d);return b=typeof b=="function"?b(f,e,d):b,c.filters[a.definition.headerFilterFunc](f,e,d,b)}):console.warn("Header Filter Error - Matching filter function not found: ",a.definition.headerFilterFunc);break;case"function":g=function(c){var b=a.definition.headerFilterFuncParams||{},d=a.getFieldValue(c);return b=typeof b=="function"?b(f,d,c):b,a.definition.headerFilterFunc(f,d,c,b)},h=g;break}if(!g)switch(j){case"partial":g=function(c){var b=a.getFieldValue(c);return!!(typeof b!="undefined"&&b!==null)&&String(b).toLowerCase().indexOf(String(f).toLowerCase())>-1},h="like";break;default:g=function(b){return a.getFieldValue(b)==f},h="="}c.headerFilters[d]={value:f,func:g,type:h,params:e||{}}}i=JSON.stringify(c.headerFilters),c.prevHeaderFilterChangeCheck!==i&&(c.prevHeaderFilterChangeCheck=i,c.changed=!0,c.table.rowManager.filterRefresh())}return!0}a.modules.filter={success:f,attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(a)},o.prototype.generateHeaderFilterElement=function(a,n,o){var i=this,d=this,k=a.modules.filter.success,h=a.getField(),g,e,c,m,j,l,f;function p(){}if(a.modules.filter.headerElement&&a.modules.filter.headerElement.parentNode&&a.contentElement.removeChild(a.modules.filter.headerElement.parentNode),h){{switch(a.modules.filter.emptyFunc=a.definition.headerFilterEmptyCheck||function(a){return!a&&a!=="0"&&a!==0},g=document.createElement("div"),g.classList.add("tabulator-header-filter"),b(a.definition.headerFilter)){case"string":d.table.modules.edit.editors[a.definition.headerFilter]?(e=d.table.modules.edit.editors[a.definition.headerFilter],(a.definition.headerFilter==="tick"||a.definition.headerFilter==="tickCross")&&!a.definition.headerFilterEmptyCheck&&(a.modules.filter.emptyFunc=function(a){return a!==!0&&a!==!1})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",a.definition.editor);break;case"function":e=a.definition.headerFilter;break;case"boolean":a.modules.edit&&a.modules.edit.editor?e=a.modules.edit.editor:a.definition.formatter&&d.table.modules.edit.editors[a.definition.formatter]?(e=d.table.modules.edit.editors[a.definition.formatter],(a.definition.formatter==="tick"||a.definition.formatter==="tickCross")&&!a.definition.headerFilterEmptyCheck&&(a.modules.filter.emptyFunc=function(a){return a!==!0&&a!==!1})):e=d.table.modules.edit.editors.input;break}if(e){if(m={getValue:function(){return typeof n!="undefined"?n:""},getField:function(){return a.definition.field},getElement:function(){return g},getColumn:function(){return a.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},f=a.definition.headerFilterParams||{},f=typeof f=="function"?f.call(d.table):f,c=e.call(this.table.modules.edit,m,function(){},k,p,f),!c){console.warn("Filter Error - Cannot add filter to "+h+" column, editor returned a value of false");return}if(!(c instanceof Node)){console.warn("Filter Error - Cannot add filter to "+h+" column, editor should return an instance of Node, the editor returned:",c);return}h?d.table.modules.localize.bind("headerFilters|columns|"+a.definition.field,function(a){c.setAttribute("placeholder",typeof a!="undefined"&&a?a:d.table.modules.localize.getText("headerFilters|default"))}):d.table.modules.localize.bind("headerFilters|default",function(a){c.setAttribute("placeholder",typeof d.column.definition.headerFilterPlaceholder!="undefined"&&d.column.definition.headerFilterPlaceholder?d.column.definition.headerFilterPlaceholder:a)}),c.addEventListener("click",function(a){a.stopPropagation(),c.focus()}),c.addEventListener("focus",function(b){var a=i.table.columnManager.element.scrollLeft;a!==i.table.rowManager.element.scrollLeft&&(i.table.rowManager.scrollHorizontal(a),i.table.columnManager.scrollHorizontal(a))}),j=!1,l=function(b){j&&clearTimeout(j),j=setTimeout(function(){k(c.value)},d.table.options.headerFilterLiveFilterDelay)},a.modules.filter.headerElement=c,a.modules.filter.attrType=c.hasAttribute("type")?c.getAttribute("type").toLowerCase():"",a.modules.filter.tagType=c.tagName.toLowerCase(),a.definition.headerFilterLiveFilter!==!1&&(a.definition.headerFilter==="autocomplete"||a.definition.headerFilter==="tickCross"||(a.definition.editor==="autocomplete"||a.definition.editor==="tickCross")&&a.definition.headerFilter===!0||(c.addEventListener("keyup",l),c.addEventListener("search",l),a.modules.filter.attrType=="number"&&c.addEventListener("change",function(a){k(c.value)}),a.modules.filter.attrType=="text"&&this.table.browser!=="ie"&&c.setAttribute("type","search")),(a.modules.filter.tagType=="input"||a.modules.filter.tagType=="select"||a.modules.filter.tagType=="textarea")&&c.addEventListener("mousedown",function(a){a.stopPropagation()})),g.appendChild(c),a.contentElement.appendChild(g),o||d.headerFilterColumns.push(a)}}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",a.definition.title)},o.prototype.hideHeaderFilterElements=function(){this.headerFilterColumns.forEach(function(a){a.modules.filter&&a.modules.filter.headerElement&&(a.modules.filter.headerElement.style.display="none")})},o.prototype.showHeaderFilterElements=function(){this.headerFilterColumns.forEach(function(a){a.modules.filter&&a.modules.filter.headerElement&&(a.modules.filter.headerElement.style.display="")})},o.prototype.setHeaderFilterFocus=function(a){a.modules.filter&&a.modules.filter.headerElement?a.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",a.getField())},o.prototype.getHeaderFilterValue=function(a){if(a.modules.filter&&a.modules.filter.headerElement)return a.modules.filter.headerElement.value;console.warn("Column Filter Error - No header filter set on column:",a.getField())},o.prototype.setHeaderFilterValue=function(a,b){a&&(a.modules.filter&&a.modules.filter.headerElement?(this.generateHeaderFilterElement(a,b,!0),a.modules.filter.success(b)):console.warn("Column Filter Error - No header filter set on column:",a.getField()))},o.prototype.reloadHeaderFilter=function(a){a&&(a.modules.filter&&a.modules.filter.headerElement?this.generateHeaderFilterElement(a,a.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",a.getField()))},o.prototype.hasChanged=function(){var a=this.changed;return this.changed=!1,a},o.prototype.setFilter=function(a,c,d,e){var b=this;b.filterList=[],Array.isArray(a)||(a=[{field:a,type:c,value:d,params:e}]),b.addFilter(a)},o.prototype.addFilter=function(a,c,d,e){var b=this;Array.isArray(a)||(a=[{field:a,type:c,value:d,params:e}]),a.forEach(function(a){a=b.findFilter(a),a&&(b.filterList.push(a),b.changed=!0)}),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter&&this.table.modules.persistence.save("filter")},o.prototype.findFilter=function(a){var b=this,d,c;return Array.isArray(a)?this.findSubFilters(a):(c=!1,typeof a.field=="function"?c=function(b){return a.field(b,a.type||{})}:b.filters[a.type]?(d=b.table.columnManager.getColumnByField(a.field),d?c=function(c){return b.filters[a.type](a.value,d.getFieldValue(c),c,a.params||{})}:c=function(c){return b.filters[a.type](a.value,c[a.field],c,a.params||{})}):console.warn("Filter Error - No such filter type found, ignoring: ",a.type),a.func=c,!!a.func&&a)},o.prototype.findSubFilters=function(b){var c=this,a=[];return b.forEach(function(b){b=c.findFilter(b),b&&a.push(b)}),!!a.length&&a},o.prototype.getFilters=function(c,b){var a=[];return c&&(a=this.getHeaderFilters()),b&&a.forEach(function(a){typeof a.type=="function"&&(a.type="function")}),a=a.concat(this.filtersToArray(this.filterList,b)),a},o.prototype.filtersToArray=function(c,b){var d=this,a=[];return c.forEach(function(c){var e;Array.isArray(c)?a.push(d.filtersToArray(c,b)):(e={field:c.field,type:c.type,value:c.value},b&&typeof e.type=="function"&&(e.type="function"),a.push(e))}),a},o.prototype.getHeaderFilters=function(){var c=this,b=[],a;for(a in this.headerFilters)b.push({field:a,type:this.headerFilters[a].type,value:this.headerFilters[a].value});return b},o.prototype.removeFilter=function(a,d,e){var c=this;Array.isArray(a)||(a=[{field:a,type:d,value:e}]),a.forEach(function(a){var d=-1;b(a.field)=="object"?d=c.filterList.findIndex(function(b){return a===b}):d=c.filterList.findIndex(function(b){return a.field===b.field&&a.type===b.type&&a.value===b.value}),d>-1?(c.filterList.splice(d,1),c.changed=!0):console.warn("Filter Error - No matching filter type found, ignoring: ",a.type)}),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter&&this.table.modules.persistence.save("filter")},o.prototype.clearFilter=function(a){this.filterList=[],a&&this.clearHeaderFilter(),this.changed=!0,this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter&&this.table.modules.persistence.save("filter")},o.prototype.clearHeaderFilter=function(){var a=this;this.headerFilters={},a.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(function(b){typeof b.modules.filter.value!="undefined"&&delete b.modules.filter.value,b.modules.filter.prevSuccess=void 0,a.reloadHeaderFilter(b)}),this.changed=!0},o.prototype.search=function(g,a,e,f){var c=this,d=[],b=[];return Array.isArray(a)||(a=[{field:a,type:e,value:f}]),a.forEach(function(a){a=c.findFilter(a),a&&b.push(a)}),this.table.rowManager.rows.forEach(function(a){var e=!0;b.forEach(function(b){c.filterRecurse(b,a.getData())||(e=!1)}),e&&d.push(g==="data"?a.getData("data"):a.getComponent())}),d},o.prototype.filter=function(c,e){var a=this,b=[],d=[];return a.table.options.dataFiltering&&a.table.options.dataFiltering.call(a.table,a.getFilters()),!a.table.options.ajaxFiltering&&(a.filterList.length||Object.keys(a.headerFilters).length)?c.forEach(function(c){a.filterRow(c)&&b.push(c)}):b=c.slice(0),a.table.options.dataFiltered&&(b.forEach(function(a){d.push(a.getComponent())}),a.table.options.dataFiltered.call(a.table,a.getFilters(),d)),b},o.prototype.filterRow=function(d,f){var a=this,b=!0,c=d.getData(),e;a.filterList.forEach(function(d){a.filterRecurse(d,c)||(b=!1)});for(e in a.headerFilters)a.headerFilters[e].func(c)||(b=!1);return b},o.prototype.filterRecurse=function(a,c){var d=this,b=!1;return Array.isArray(a)?a.forEach(function(a){d.filterRecurse(a,c)&&(b=!0)}):b=a.func(c),b},o.prototype.filters={"=":function(a,b,d,e){return b==a},"<":function(a,b,d,e){return b<a},"<=":function(a,b,d,e){return b<=a},">":function(a,b,d,e){return b>a},">=":function(a,b,d,e){return b>=a},"!=":function(a,b,d,e){return b!=a},regex:function(a,b,d,e){return typeof a=="string"&&(a=new RegExp(a)),a.test(b)},like:function(a,b,d,e){return a===null||typeof a=="undefined"?b===a:!!(typeof b!="undefined"&&b!==null)&&String(b).toLowerCase().indexOf(a.toLowerCase())>-1},keywords:function(f,b,g,c){var d=f.toLowerCase().split(typeof c.separator=="undefined"?" ":c.separator),e=String(b===null||typeof b=="undefined"?"":b).toLowerCase(),a=[];return d.forEach(function(b){e.includes(b)&&a.push(!0)}),c.matchAll?a.length===d.length:!!a.length},starts:function(a,b,d,e){return a===null||typeof a=="undefined"?b===a:!!(typeof b!="undefined"&&b!==null)&&String(b).toLowerCase().startsWith(a.toLowerCase())},ends:function(a,b,d,e){return a===null||typeof a=="undefined"?b===a:!!(typeof b!="undefined"&&b!==null)&&String(b).toLowerCase().endsWith(a.toLowerCase())},in:function(a,b,d,e){return Array.isArray(a)?!a.length||a.indexOf(b)>-1:(console.warn("Filter Error - filter value is not an array:",a),!1)}},a.prototype.registerModule("filter",o),H=function(a){this.table=a},H.prototype.initializeColumn=function(a){a.modules.format=this.lookupFormatter(a,""),typeof a.definition.formatterPrint!="undefined"&&(a.modules.format.print=this.lookupFormatter(a,"Print")),typeof a.definition.formatterClipboard!="undefined"&&(a.modules.format.clipboard=this.lookupFormatter(a,"Clipboard")),typeof a.definition.formatterHtmlOutput!="undefined"&&(a.modules.format.htmlOutput=this.lookupFormatter(a,"HtmlOutput"))},H.prototype.lookupFormatter=function(d,e){var c={params:d.definition["formatter"+e+"Params"]||{}},a=d.definition["formatter"+e];switch(typeof a=="undefined"?"undefined":b(a)){case"string":a==="tick"&&(a="tickCross",typeof c.params.crossElement=="undefined"&&(c.params.crossElement=!1),console.warn("DEPRECATION WARNING - the tick formatter has been deprecated, please use the tickCross formatter with the crossElement param set to false")),this.formatters[a]?c.formatter=this.formatters[a]:(console.warn("Formatter Error - No such formatter found: ",a),c.formatter=this.formatters.plaintext);break;case"function":c.formatter=a;break;default:c.formatter=this.formatters.plaintext;break}return c},H.prototype.cellRendered=function(a){a.modules.format&&a.modules.format.renderedCallback&&!a.modules.format.rendered&&(a.modules.format.renderedCallback(),a.modules.format.rendered=!0)},H.prototype.formatValue=function(a){var b=a.getComponent(),c=typeof a.column.modules.format.params=="function"?a.column.modules.format.params(b):a.column.modules.format.params;function d(b){a.modules.format||(a.modules.format={}),a.modules.format.renderedCallback=b,a.modules.format.rendered=!1}return a.column.modules.format.formatter.call(this,b,c,d)},H.prototype.formatExportValue=function(a,d){var b=a.column.modules.format[d],c,e;return b?(e=function(b){a.modules.format||(a.modules.format={}),a.modules.format.renderedCallback=b,a.modules.format.rendered=!1},c=typeof b.params=="function"?b.params(component):b.params,b.formatter.call(this,a.getComponent(),c,e)):this.formatValue(a)},H.prototype.sanitizeHTML=function(a){if(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(a).replace(/[&<>"'`=\/]/g,function(a){return b[a]})}return a},H.prototype.emptyToSpace=function(a){return a===null||typeof a=="undefined"||a===""?"&nbsp;":a},H.prototype.getFormatter=function(a){var a;switch(typeof a=="undefined"?"undefined":b(a)){case"string":this.formatters[a]?a=this.formatters[a]:(console.warn("Formatter Error - No such formatter found: ",a),a=this.formatters.plaintext);break;case"function":a=a;break;default:a=this.formatters.plaintext;break}return a},H.prototype.formatters={plaintext:function(a,c,d){return this.emptyToSpace(this.sanitizeHTML(a.getValue()))},html:function(a,c,d){return a.getValue()},textarea:function(a,c,d){return a.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(a.getValue()))},money:function(h,b,m){var e=parseFloat(h.getValue()),j=b.decimal||".",k=b.thousand||",",g=b.symbol||"",l=!!b.symbolAfter,i=typeof b.precision!="undefined"?b.precision:2,a,d,f,c;if(isNaN(e))return this.emptyToSpace(this.sanitizeHTML(h.getValue()));for(c=i!==!1?e.toFixed(i):e,c=String(c).split("."),a=c[0],d=c.length>1?j+c[1]:"",f=/(\d+)(\d{3})/;f.test(a);)a=a.replace(f,"$1"+k+"$2");return l?a+d+g:g+a+d},link:function(d,a,k){var e=d.getValue(),i=a.urlPrefix||"",c=a.download,f=e,g=document.createElement("a"),h;if(a.labelField&&(h=d.getData(),f=h[a.labelField]),a.label)switch(b(a.label)){case"string":f=a.label;break;case"function":f=a.label(d);break}if(f){if(a.urlField&&(h=d.getData(),e=h[a.urlField]),a.url)switch(b(a.url)){case"string":e=a.url;break;case"function":e=a.url(d);break}return g.setAttribute("href",i+e),a.target&&g.setAttribute("target",a.target),a.download&&(typeof c=="function"?c=c(d):c=c===!0?"":c,g.setAttribute("download",c)),g.innerHTML=this.emptyToSpace(this.sanitizeHTML(f)),g}return"&nbsp;"},image:function(e,a,g){var c=document.createElement("img"),d=e.getValue();switch(a.urlPrefix&&(d=a.urlPrefix+e.getValue()),a.urlSuffix&&(d=d+a.urlSuffix),c.setAttribute("src",d),b(a.height)){case"number":c.style.height=a.height+"px";break;case"string":c.style.height=a.height;break}switch(b(a.width)){case"number":c.style.width=a.width+"px";break;case"string":c.style.width=a.width;break}return c.addEventListener("load",function(){e.getRow().normalizeHeight()}),c},tickCross:function(d,b,j){var a=d.getValue(),c=d.getElement(),e=b.allowEmpty,g=b.allowTruthy,h=typeof b.tickElement!="undefined"?b.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',f=typeof b.crossElement!="undefined"?b.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return g&&a||a===!0||a==="true"||a==="True"||a===1||a==="1"?(c.setAttribute("aria-checked",!0),h||""):e&&(a==="null"||a===""||a===null||typeof a=="undefined")?(c.setAttribute("aria-checked","mixed"),""):(c.setAttribute("aria-checked",!1),f||"")},datetime:function(g,a,h){var f=a.inputFormat||"YYYY-MM-DD hh:mm:ss",e=a.outputFormat||"DD/MM/YYYY hh:mm:ss",b=typeof a.invalidPlaceholder!="undefined"?a.invalidPlaceholder:"",c=g.getValue(),d=moment(c,f);return d.isValid()?a.timezone?d.tz(a.timezone).format(e):d.format(e):b===!0?c:typeof b=="function"?b(c):b},datetimediff:function(g,a,l){var j=a.inputFormat||"YYYY-MM-DD hh:mm:ss",b=typeof a.invalidPlaceholder!="undefined"?a.invalidPlaceholder:"",c=typeof a.suffix!="undefined"&&a.suffix,h=typeof a.unit!="undefined"?a.unit:void 0,i=typeof a.humanize!="undefined"&&a.humanize,f=typeof a.date!="undefined"?a.date:moment(),d=g.getValue(),e=moment(d,j);return e.isValid()?i?moment.duration(e.diff(f)).humanize(c):e.diff(f,h)+(c?" "+c:""):b===!0?d:typeof b=="function"?b(d):b},lookup:function(c,b,e){var a=c.getValue();return typeof b[a]=="undefined"?(console.warn("Missing display value for "+a),a):b[a]},star:function(i,e,l){var a=i.getValue(),c=i.getElement(),h=e&&e.stars?e.stars:5,d=document.createElement("span"),b=document.createElementNS("http://www.w3.org/2000/svg","svg"),j='<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',k='<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',f,g;d.style.verticalAlign="middle",b.setAttribute("width","14"),b.setAttribute("height","14"),b.setAttribute("viewBox","0 0 512 512"),b.setAttribute("xml:space","preserve"),b.style.padding="0 1px",a=a&&!isNaN(a)?parseInt(a):0,a=Math.max(0,Math.min(a,h));for(f=1;f<=h;f++)g=b.cloneNode(!0),g.innerHTML=f<=a?j:k,d.appendChild(g);return c.style.whiteSpace="nowrap",c.style.overflow="hidden",c.style.textOverflow="ellipsis",c.setAttribute("aria-label",a),d},traffic:function(l,a,n){var g=this.sanitizeHTML(l.getValue())||0,j=document.createElement("span"),i=a&&a.max?a.max:100,h=a&&a.min?a.min:0,c=a&&typeof a.color!="undefined"?a.color:["red","orange","green"],f="#666666",k,d,m,e;if(isNaN(g)||typeof l.getValue()=="undefined")return;switch(j.classList.add("tabulator-traffic-light"),d=parseFloat(g)<=i?parseFloat(g):i,d=parseFloat(d)>=h?parseFloat(d):h,k=(i-h)/100,d=Math.round((d-h)/k),typeof c=="undefined"?"undefined":b(c)){case"string":f=c;break;case"function":f=c(g);break;case"object":if(Array.isArray(c)){m=100/c.length,e=Math.floor(d/m),e=Math.min(e,c.length-1),e=Math.max(e,0),f=c[e];break}}return j.style.backgroundColor=f,j},progress:function(o,a,s){var i=this.sanitizeHTML(o.getValue())||0,g=o.getElement(),m=a&&a.max?a.max:100,k=a&&a.min?a.min:0,r=a&&a.legendAlign?a.legendAlign:"center",d=parseFloat(i)<=m?parseFloat(i):m,p,l,h,j,w,t,u,v,n,c,e,f;switch(d=parseFloat(d)>=k?parseFloat(d):k,p=(m-k)/100,d=Math.round((d-k)/p),b(a.color)){case"string":l=a.color;break;case"function":l=a.color(i);break;case"object":if(Array.isArray(a.color)){n=100/a.color.length,c=Math.floor(d/n),c=Math.min(c,a.color.length-1),c=Math.max(c,0),l=a.color[c];break}default:l="#2DC214"}switch(b(a.legend)){case"string":h=a.legend;break;case"function":h=a.legend(i);break;case"boolean":h=i;break;default:h=!1}switch(b(a.legendColor)){case"string":j=a.legendColor;break;case"function":j=a.legendColor(i);break;case"object":Array.isArray(a.legendColor)&&(n=100/a.legendColor.length,c=Math.floor(d/n),c=Math.min(c,a.legendColor.length-1),c=Math.max(c,0),j=a.legendColor[c]);break;default:j="#000"}return g.style.minWidth="30px",g.style.position="relative",g.setAttribute("aria-label",d),e=document.createElement("div"),e.style.display="inline-block",e.style.position="relative",e.style.width=d+"%",e.style.backgroundColor=l,e.style.height="100%",e.setAttribute("data-max",m),e.setAttribute("data-min",k),h&&(f=document.createElement("div"),f.style.position="absolute",f.style.top="4px",f.style.left=0,f.style.textAlign=r,f.style.width="100%",f.style.color=j,f.innerHTML=h),s(function(){if(!(o instanceof q)){var a=document.createElement("div");a.style.position="absolute",a.style.top="4px",a.style.bottom="4px",a.style.left="4px",a.style.right="4px",g.appendChild(a),g=a}g.appendChild(e),h&&g.appendChild(f)}),""},color:function(a,c,d){return a.getElement().style.backgroundColor=this.sanitizeHTML(a.getValue()),""},buttonTick:function(b,c,d){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function(b,c,d){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'},rownum:function(a,c,d){return this.table.rowManager.activeRows.indexOf(a.getRow()._getSelf())+1},handle:function(a,c,d){return a.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(d,i,e){var f=this,g=!1,a=document.createElement("div"),b=d.getRow()._row.modules.responsiveLayout;a.classList.add("tabulator-responsive-collapse-toggle"),a.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",d.getElement().classList.add("tabulator-row-handle");function c(d){var c=b.element;b.open=d,c&&(b.open?(a.classList.add("open"),c.style.display=""):(a.classList.remove("open"),c.style.display="none"))}return a.addEventListener("click",function(a){a.stopImmediatePropagation(),c(!b.open)}),c(b.open),a},rowSelection:function(d,e,f){var c=this,a=document.createElement("input"),b;return a.type="checkbox",this.table.modExists("selectRow",!0)&&(a.addEventListener("click",function(a){a.stopPropagation()}),typeof d.getRow=="function"?(b=d.getRow(),b instanceof k?(a.addEventListener("change",function(a){b.toggleSelect()}),a.checked=b.isSelected&&b.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(b,a)):a=""):(a.addEventListener("change",function(a){c.table.modules.selectRow.selectedRows.length?c.table.deselectRow():c.table.selectRow(e.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(a))),a}},a.prototype.registerModule("format",H),E=function(a){this.table=a,this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightPadding=0,this.initializationMode="left",this.active=!1,this.scrollEndTimer=!1},E.prototype.reset=function(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightMargin=0,this.active=!1,this.table.columnManager.headersElement.style.marginLeft=0,this.table.columnManager.element.style.paddingRight=0},E.prototype.initializeColumn=function(a){var b={margin:0,edge:!1};a.isGroup||(this.frozenCheck(a)?(b.position=this.initializationMode,this.initializationMode=="left"?this.leftColumns.push(a):this.rightColumns.unshift(a),this.active=!0,a.modules.frozen=b):this.initializationMode="right")},E.prototype.frozenCheck=function(a){var b=!1;return a.parent.isGroup&&a.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),a.parent.isGroup?this.frozenCheck(a.parent):a.definition.frozen;return b},E.prototype.scrollHorizontal=function(){var a=this,b;this.active&&(clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout(function(){a.layout()},100),b=this.table.rowManager.getVisibleRows(),this.calcMargins(),this.layoutColumnPosition(),this.layoutCalcRows(),b.forEach(function(b){b.type==="row"&&a.layoutRow(b)}),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)},E.prototype.calcMargins=function(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px",this.table.columnManager.headersElement.style.marginLeft=this.leftMargin,this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px",this.table.columnManager.element.style.paddingRight=this.rightMargin,this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft},E.prototype.layoutCalcRows=function(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow))},E.prototype.layoutColumnPosition=function(b){var a=this,c=[];this.leftColumns.forEach(function(d,f){if(d.modules.frozen.margin=a._calcSpace(a.leftColumns,f)+a.table.columnManager.scrollLeft+"px",f==a.leftColumns.length-1?d.modules.frozen.edge=!0:d.modules.frozen.edge=!1,d.parent.isGroup){var e=a.getColGroupParentElement(d);c.includes(e)||(a.layoutElement(e,d),c.push(e)),d.modules.frozen.edge&&e.classList.add("tabulator-frozen-"+d.modules.frozen.position)}else a.layoutElement(d.getElement(),d);b&&d.cells.forEach(function(b){a.layoutElement(b.getElement(!0),d)})}),this.rightColumns.forEach(function(c,d){c.modules.frozen.margin=a.rightPadding-a._calcSpace(a.rightColumns,d+1)+"px",d==a.rightColumns.length-1?c.modules.frozen.edge=!0:c.modules.frozen.edge=!1,c.parent.isGroup?a.layoutElement(a.getColGroupParentElement(c),c):a.layoutElement(c.getElement(),c),b&&c.cells.forEach(function(b){a.layoutElement(b.getElement(!0),c)})})},E.prototype.getColGroupParentElement=function(a){return a.parent.isGroup?this.getColGroupParentElement(a.parent):a.getElement()},E.prototype.layout=function(){var a=this,b=0;a.active&&(this.calcMargins(),a.table.rowManager.getDisplayRows().forEach(function(b){b.type==="row"&&a.layoutRow(b)}),this.layoutCalcRows(),this.layoutColumnPosition(!0),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)},E.prototype.layoutRow=function(a){var b=this,c=a.getElement();c.style.paddingLeft=this.leftMargin,this.leftColumns.forEach(function(c){var d=a.getCell(c);d&&b.layoutElement(d.getElement(!0),c)}),this.rightColumns.forEach(function(c){var d=a.getCell(c);d&&b.layoutElement(d.getElement(!0),c)})},E.prototype.layoutElement=function(a,b){b.modules.frozen&&(a.style.position="absolute",a.style.left=b.modules.frozen.margin,a.classList.add("tabulator-frozen"),b.modules.frozen.edge&&a.classList.add("tabulator-frozen-"+b.modules.frozen.position))},E.prototype._calcSpace=function(b,d){for(var c=0,a=0;a<d;a++)b[a].visible&&(c+=b[a].getWidth());return c},a.prototype.registerModule("frozenColumns",E),K=function(a){this.table=a,this.topElement=document.createElement("div"),this.rows=[],this.displayIndex=0},K.prototype.initialize=function(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling)},K.prototype.setDisplayIndex=function(a){this.displayIndex=a},K.prototype.getDisplayIndex=function(){return this.displayIndex},K.prototype.isFrozen=function(){return!!this.rows.length},K.prototype.getRows=function(b){var c=this,d=[],a=b.slice(0);return this.rows.forEach(function(c){var b=a.indexOf(c);b>-1&&a.splice(b,1)}),a},K.prototype.freezeRow=function(a){a.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(a.modules.frozen=!0,this.topElement.appendChild(a.getElement()),a.initialize(),a.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(a),this.table.rowManager.refreshActiveData("display"),this.styleRows())},K.prototype.unfreezeRow=function(a){var b=this.rows.indexOf(a);a.modules.frozen?(a.modules.frozen=!1,this.detachRow(a),this.table.rowManager.adjustTableSize(),this.table.rowManager.refreshActiveData("display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")},K.prototype.detachRow=function(a){var b=this.rows.indexOf(a),c;b>-1&&(c=a.getElement(),c.parentNode.removeChild(c),this.rows.splice(b,1))},K.prototype.styleRows=function(b){var a=this;this.rows.forEach(function(b,c){a.table.rowManager.styleRow(b,c)})},a.prototype.registerModule("frozenRows",K),y=function(a){this._group=a,this.type="GroupComponent"},y.prototype.getKey=function(){return this._group.key},y.prototype.getField=function(){return this._group.field},y.prototype.getElement=function(){return this._group.element},y.prototype.getRows=function(){return this._group.getRows(!0)},y.prototype.getSubGroups=function(){return this._group.getSubGroups(!0)},y.prototype.getParentGroup=function(){return!!this._group.parent&&this._group.parent.getComponent()},y.prototype.getVisibility=function(){return console.warn("getVisibility function is deprecated, you should now use the isVisible function"),this._group.visible},y.prototype.isVisible=function(){return this._group.visible},y.prototype.show=function(){this._group.show()},y.prototype.hide=function(){this._group.hide()},y.prototype.toggle=function(){this._group.toggleVisibility()},y.prototype._getSelf=function(){return this._group},y.prototype.getTable=function(){return this._group.groupManager.table},g=function(a,e,b,f,g,d,c){this.groupManager=a,this.parent=e,this.key=f,this.level=b,this.field=g,this.hasSubGroups=b<a.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=c,this.rows=[],this.groups=[],this.groupList=[],this.generator=d,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=c?c.visible:typeof a.startOpen[b]!="undefined"?a.startOpen[b]:a.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()},g.prototype.wipe=function(){this.groupList.length?this.groupList.forEach(function(a){a.wipe()}):(this.element=!1,this.arrowElement=!1,this.elementContents=!1)},g.prototype.createElements=function(){var a=document.createElement("div");a.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(a),this.groupManager.table.options.movableRows!==!1&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)},g.prototype.createValueGroups=function(){var b=this,a=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[a]&&this.groupManager.allowedValues[a].forEach(function(c){b._createGroup(c,a)})},g.prototype.addBindings=function(){var a=this,b,c,d,e;a.groupManager.table.options.groupClick&&a.element.addEventListener("click",function(b){a.groupManager.table.options.groupClick.call(a.groupManager.table,b,a.getComponent())}),a.groupManager.table.options.groupDblClick&&a.element.addEventListener("dblclick",function(b){a.groupManager.table.options.groupDblClick.call(a.groupManager.table,b,a.getComponent())}),a.groupManager.table.options.groupContext&&a.element.addEventListener("contextmenu",function(b){a.groupManager.table.options.groupContext.call(a.groupManager.table,b,a.getComponent())}),(a.groupManager.table.options.groupContextMenu||a.groupManager.table.options.groupClickMenu)&&a.groupManager.table.modExists("menu")&&a.groupManager.table.modules.menu.initializeGroup.call(a.groupManager.table.modules.menu,a),a.groupManager.table.options.groupTap&&(d=!1,a.element.addEventListener("touchstart",function(a){d=!0},{passive:!0}),a.element.addEventListener("touchend",function(b){d&&a.groupManager.table.options.groupTap(b,a.getComponent()),d=!1})),a.groupManager.table.options.groupDblTap&&(b=null,a.element.addEventListener("touchend",function(c){b?(clearTimeout(b),b=null,a.groupManager.table.options.groupDblTap(c,a.getComponent())):b=setTimeout(function(){clearTimeout(b),b=null},300)})),a.groupManager.table.options.groupTapHold&&(c=null,a.element.addEventListener("touchstart",function(b){clearTimeout(c),c=setTimeout(function(){clearTimeout(c),c=null,d=!1,a.groupManager.table.options.groupTapHold(b,a.getComponent())},1e3)},{passive:!0}),a.element.addEventListener("touchend",function(a){clearTimeout(c),c=null})),a.groupManager.table.options.groupToggleElement&&(e=a.groupManager.table.options.groupToggleElement=="arrow"?a.arrowElement:a.element,e.addEventListener("click",function(b){b.stopPropagation(),b.stopImmediatePropagation(),a.toggleVisibility()}))},g.prototype._createGroup=function(b,a){var c=a+"_"+b,d=new g(this.groupManager,this,a,b,this.groupManager.groupIDLookups[a].field,this.groupManager.headerGenerator[a]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[c]);this.groups[c]=d,this.groupList.push(d)},g.prototype._addRowToGroup=function(c){var a=this.level+1,d,b;this.hasSubGroups&&(d=this.groupManager.groupIDLookups[a].func(c.getData()),b=a+"_"+d,this.groupManager.allowedValues&&this.groupManager.allowedValues[a]?this.groups[b]&&this.groups[b].addRow(c):(this.groups[b]||this._createGroup(d,a),this.groups[b].addRow(c)))},g.prototype._addRow=function(a){this.rows.push(a),a.modules.group=this},g.prototype.insertRow=function(a,d,c){var e=this.conformRowData({}),b;a.updateData(e),b=this.rows.indexOf(d),b>-1?c?this.rows.splice(b+1,0,a):this.rows.splice(b,0,a):c?this.rows.push(a):this.rows.unshift(a),a.modules.group=this,this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)},g.prototype.scrollHeader=function(a){this.arrowElement.style.marginLeft=a,this.groupList.forEach(function(b){b.scrollHeader(a)})},g.prototype.getRowIndex=function(a){},g.prototype.conformRowData=function(a){return this.field?a[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(a=this.parent.conformRowData(a)),a},g.prototype.removeRow=function(b){var c=this.rows.indexOf(b),a=b.getElement();c>-1&&this.rows.splice(c,1),!this.groupManager.table.options.groupValues&&!this.rows.length?(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0)):(a.parentNode&&a.parentNode.removeChild(a),this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modules.columnCalcs.recalcGroup(this))},g.prototype.removeGroup=function(a){var c=a.level+"_"+a.key,b;this.groups[c]&&(delete this.groups[c],b=this.groupList.indexOf(a),b>-1&&this.groupList.splice(b,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))},g.prototype.getHeadersAndRows=function(b){var a=[];return a.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach(function(c){a=a.concat(c.getHeadersAndRows(b))}):(!b&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),a.push(this.calcs.top)),a=a.concat(this.rows),!b&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),a.push(this.calcs.bottom))):!this.groupList.length&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&(!b&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),a.push(this.calcs.top))),!b&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),a.push(this.calcs.bottom)))),a},g.prototype.getData=function(a,c){var d=this,b=[];return this._visSet(),(!a||a&&this.visible)&&this.rows.forEach(function(a){b.push(a.getData(c||"data"))}),b},g.prototype.getRowCount=function(){var a=0;return this.groupList.length?this.groupList.forEach(function(b){a+=b.getRowCount()}):a=this.rows.length,a},g.prototype.toggleVisibility=function(){this.visible?this.hide():this.show()},g.prototype.hide=function(){this.visible=!1,this.groupManager.table.rowManager.getRenderMode()=="classic"&&!this.groupManager.table.options.pagination?(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(function(a){var b=a.getHeadersAndRows();b.forEach(function(a){a.detachElement()})}):this.rows.forEach(function(b){var a=b.getElement();a.parentNode.removeChild(a)}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()):this.groupManager.updateGroupRows(!0),this.groupManager.table.options.groupVisibilityChanged.call(this.table,this.getComponent(),!1)},g.prototype.show=function(){var b=this,a;b.visible=!0,this.groupManager.table.rowManager.getRenderMode()=="classic"&&!this.groupManager.table.options.pagination?(this.element.classList.add("tabulator-group-visible"),a=b.getElement(),this.groupList.length?this.groupList.forEach(function(b){var c=b.getHeadersAndRows();c.forEach(function(b){var c=b.getElement();a.parentNode.insertBefore(c,a.nextSibling),b.initialize(),a=c})}):b.rows.forEach(function(b){var c=b.getElement();a.parentNode.insertBefore(c,a.nextSibling),b.initialize(),a=c}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()):this.groupManager.updateGroupRows(!0),this.groupManager.table.options.groupVisibilityChanged.call(this.table,this.getComponent(),!0)},g.prototype._visSet=function(){var a=[];typeof this.visible=="function"&&(this.rows.forEach(function(b){a.push(b.getData())}),this.visible=this.visible(this.key,this.getRowCount(),a,this.getComponent()))},g.prototype.getRowGroup=function(b){var a=!1;return this.groupList.length?this.groupList.forEach(function(d){var c=d.getRowGroup(b);c&&(a=c)}):this.rows.find(function(a){return a===b})&&(a=this),a},g.prototype.getSubGroups=function(b){var a=[];return this.groupList.forEach(function(c){a.push(b?c.getComponent():c)}),a},g.prototype.getRows=function(b){var a=[];return this.rows.forEach(function(c){a.push(b?c.getComponent():c)}),a},g.prototype.generateGroupHeaderContents=function(){var a=[];for(this.rows.forEach(function(b){a.push(b.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),a,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);typeof this.elementContents=="string"?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)},g.prototype.getPath=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return a.unshift(this.key),this.parent&&this.parent.getPath(a),a},g.prototype.getElement=function(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var a=0;a<this.element.childNodes.length;++a)this.element.childNodes[a].parentNode.removeChild(this.element.childNodes[a]);return this.generateGroupHeaderContents(),this.element},g.prototype.detachElement=function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)},g.prototype.normalizeHeight=function(){this.setHeight(this.element.clientHeight)},g.prototype.initialize=function(a){(!this.initialized||a)&&(this.normalizeHeight(),this.initialized=!0)},g.prototype.reinitialize=function(){this.initialized=!1,this.height=0,a.prototype.helpers.elVisible(this.element)&&this.initialize(!0)},g.prototype.setHeight=function(a){this.height!=a&&(this.height=a,this.outerHeight=this.element.offsetHeight)},g.prototype.getHeight=function(){return this.outerHeight},g.prototype.getGroup=function(){return this},g.prototype.reinitializeHeight=function(){},g.prototype.calcHeight=function(){},g.prototype.setCellHeight=function(){},g.prototype.clearCellHeight=function(){},g.prototype.getComponent=function(){return this.component||(this.component=new y(this)),this.component},t=function(a){this.table=a,this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0},t.prototype.initialize=function(){var a=this,b=a.table.options.groupBy,c=a.table.options.groupStartOpen,d=a.table.options.groupHeader,e;this.allowedValues=a.table.options.groupValues,Array.isArray(b)&&Array.isArray(d)&&b.length>d.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),a.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],a.table.modules.localize.bind("groups|item",function(b,c){a.headerGenerator[0]=function(a,d,e){return(typeof a=="undefined"?"":a)+"<span>("+d+" "+(d===1?b:c.groups.items)+")</span>"}}),this.groupIDLookups=[],Array.isArray(b)||b?this.table.modExists("columnCalcs")&&this.table.options.columnCalcs!="table"&&this.table.options.columnCalcs!="both"&&this.table.modules.columnCalcs.removeCalcs():this.table.modExists("columnCalcs")&&this.table.options.columnCalcs!="group"&&(e=this.table.columnManager.getRealColumns(),e.forEach(function(b){b.definition.topCalc&&a.table.modules.columnCalcs.initializeTopRow(),b.definition.bottomCalc&&a.table.modules.columnCalcs.initializeBottomRow()})),Array.isArray(b)||(b=[b]),b.forEach(function(b,e){var c,d;typeof b=="function"?c=b:(d=a.table.columnManager.getColumnByField(b),d?c=function(a){return d.getFieldValue(a)}:c=function(a){return a[b]}),a.groupIDLookups.push({field:typeof b!="function"&&b,func:c,values:!!a.allowedValues&&a.allowedValues[e]})}),c&&(Array.isArray(c)||(c=[c]),c.forEach(function(a){a=typeof a=="function"?a:function(){return!0}}),a.startOpen=c),d&&(a.headerGenerator=Array.isArray(d)?d:[d]),this.initialized=!0},t.prototype.setDisplayIndex=function(a){this.displayIndex=a},t.prototype.getDisplayIndex=function(){return this.displayIndex},t.prototype.getRows=function(a){return this.groupIDLookups.length?(this.table.options.dataGrouping.call(this.table),this.generateGroups(a),this.table.options.dataGrouped&&this.table.options.dataGrouped.call(this.table,this.getGroups(!0)),this.updateGroupRows()):a.slice(0)},t.prototype.getGroups=function(b){var a=[];return this.groupList.forEach(function(c){a.push(b?c.getComponent():c)}),a},t.prototype.getChildGroups=function(b){var c=this,a=[];return b||(b=this),b.groupList.forEach(function(b){b.groupList.length?a=a.concat(c.getChildGroups(b)):a.push(b)}),a},t.prototype.wipe=function(){this.groupList.forEach(function(a){a.wipe()})},t.prototype.pullGroupListData=function(b){var c=this,a=[];return b.forEach(function(b){var d={},e;d.level=0,d.rowCount=0,d.headerContent="",e=[],b.hasSubGroups?(e=c.pullGroupListData(b.groupList),d.level=b.level,d.rowCount=e.length-b.groupList.length,d.headerContent=b.generator(b.key,d.rowCount,b.rows,b),a.push(d),a=a.concat(e)):(d.level=b.level,d.headerContent=b.generator(b.key,b.rows.length,b.rows,b),d.rowCount=b.getRows().length,a.push(d),b.getRows().forEach(function(b){a.push(b.getData("data"))}))}),a},t.prototype.getGroupedData=function(){return this.pullGroupListData(this.groupList)},t.prototype.getRowGroup=function(b){var a=!1;return this.groupList.forEach(function(d){var c=d.getRowGroup(b);c&&(a=c)}),a},t.prototype.countGroups=function(){return this.groupList.length},t.prototype.generateGroups=function(c){var a=this,b=a.groups;a.groups={},a.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(function(c){a.createGroup(c,0,b)}),c.forEach(function(c){a.assignRowToExistingGroup(c,b)})):c.forEach(function(c){a.assignRowToGroup(c,b)})},t.prototype.createGroup=function(c,d,a){var e=d+"_"+c,b;a=a||[],b=new g(this,!1,d,c,this.groupIDLookups[0].field,this.headerGenerator[0],a[e]),this.groups[e]=b,this.groupList.push(b)},t.prototype.assignRowToExistingGroup=function(a,d){var c=this.groupIDLookups[0].func(a.getData()),b="0_"+c;this.groups[b]&&this.groups[b].addRow(a)},t.prototype.assignRowToGroup=function(b,d){var a=this.groupIDLookups[0].func(b.getData()),c=!this.groups["0_"+a];return c&&this.createGroup(a,0,d),this.groups["0_"+a].addRow(b),!c},t.prototype.reassignRowToGroup=function(a){var b=a.getGroup(),c=b.getPath(),d=this.getExpectedPath(a),e=!0;e=c.length==d.length&&c.every(function(a,b){return a===d[b]}),e||(b.removeRow(a),this.assignRowToGroup(a,self.groups),this.table.rowManager.refreshActiveData("group",!1,!0))},t.prototype.getExpectedPath=function(b){var a=[],c=b.getData();return this.groupIDLookups.forEach(function(b){a.push(b.func(c))}),a},t.prototype.updateGroupRows=function(d){var b=this,a=[],e,c;return b.groupList.forEach(function(b){a=a.concat(b.getHeadersAndRows())}),d&&(c=b.table.rowManager.setDisplayRows(a,this.getDisplayIndex()),c!==!0&&this.setDisplayIndex(c),b.table.rowManager.refreshActiveData("group",!0,!0)),a},t.prototype.scrollHeaders=function(a){this.table.options.virtualDomHoz&&(a-=this.table.vdomHoz.vDomPadLeft),a=a+"px",this.groupList.forEach(function(b){b.scrollHeader(a)})},t.prototype.removeGroup=function(a){var c=a.level+"_"+a.key,b;this.groups[c]&&(delete this.groups[c],b=this.groupList.indexOf(a),b>-1&&this.groupList.splice(b,1))},a.prototype.registerModule("groupRows",t),G=function(a){this.table=a,this.history=[],this.index=-1},G.prototype.clear=function(){this.history=[],this.index=-1},G.prototype.action=function(a,b,c){this.history=this.history.slice(0,this.index+1),this.history.push({type:a,component:b,data:c}),this.index++},G.prototype.getHistoryUndoSize=function(){return this.index+1},G.prototype.getHistoryRedoSize=function(){return this.history.length-(this.index+1)},G.prototype.clearComponentHistory=function(b){var a=this.history.findIndex(function(a){return a.component===b});a>-1&&(this.history.splice(a,1),a<=this.index&&this.index--,this.clearComponentHistory(b))},G.prototype.undo=function(){if(this.index>-1){var a=this.history[this.index];return this.undoers[a.type].call(this,a),this.index--,this.table.options.historyUndo.call(this.table,a.type,a.component.getComponent(),a.data),!0}return console.warn("History Undo Error - No more history to undo"),!1},G.prototype.redo=function(){if(this.history.length-1>this.index){this.index++;var a=this.history[this.index];return this.redoers[a.type].call(this,a),this.table.options.historyRedo.call(this.table,a.type,a.component.getComponent(),a.data),!0}return console.warn("History Redo Error - No more history to redo"),!1},G.prototype.undoers={cellEdit:function(a){a.component.setValueProcessData(a.data.oldValue)},rowAdd:function(a){a.component.deleteActual()},rowDelete:function(a){var b=this.table.rowManager.addRowActual(a.data.data,a.data.pos,a.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(a.component,b)},rowMove:function(a){this.table.rowManager.moveRowActual(a.component,this.table.rowManager.rows[a.data.posFrom],!a.data.after),this.table.rowManager.redraw()}},G.prototype.redoers={cellEdit:function(a){a.component.setValueProcessData(a.data.newValue)},rowAdd:function(a){var b=this.table.rowManager.addRowActual(a.data.data,a.data.pos,a.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(a.component,b)},rowDelete:function(a){a.component.deleteActual()},rowMove:function(a){this.table.rowManager.moveRowActual(a.component,this.table.rowManager.rows[a.data.posTo],a.data.after),this.table.rowManager.redraw()}},G.prototype._rebindRow=function(a,b){this.history.forEach(function(c){if(c.component instanceof f)c.component===a&&(c.component=b);else if(c.component instanceof j)if(c.component.row===a){var d=c.component.column.getField();d&&(c.component=b.getCell(d))}})},a.prototype.registerModule("history",G),R=function(a){this.table=a,this.fieldIndex=[],this.hasIndex=!1},R.prototype.parseTable=function(){var c=this,e=c.table.element,f=c.table.options,p=f.columns,i=e.getElementsByTagName("th"),d=e.getElementsByTagName("tbody")[0],l=[],q,g,o,m,j,a,n,k,h;c.hasIndex=!1,c.table.options.htmlImporting.call(this.table),d=d?d.getElementsByTagName("tr"):[],c._extractOptions(e,f),i.length?c._extractHeaders(i,d):c._generateBlankHeaders(i,d);for(g=0;g<d.length;g++){o=d[g],m=o.getElementsByTagName("td"),j={},c.hasIndex||(j[f.index]=g);for(a=0;a<m.length;a++)n=m[a],typeof this.fieldIndex[a]!="undefined"&&(j[this.fieldIndex[a]]=n.innerHTML);l.push(j)}k=document.createElement("div"),h=e.attributes;for(a in h)b(h[a])=="object"&&k.setAttribute(h[a].name,h[a].value);e.parentNode.replaceChild(k,e),f.data=l,c.table.options.htmlImported.call(this.table),this.table.element=k},R.prototype._extractOptions=function(h,f,g){var e=h.attributes,i=g?Object.assign([],g):Object.keys(f),d={},j,a,c;i.forEach(function(a){d[a.toLowerCase()]=a});for(j in e)a=e[j],a&&(typeof a=="undefined"?"undefined":b(a))=="object"&&a.name&&a.name.indexOf("tabulator-")===0&&(c=a.name.replace("tabulator-",""),typeof d[c]!="undefined"&&(f[d[c]]=this._attribValue(a.value)))},R.prototype._attribValue=function(a){return a==="true"||(a!=="false"&&a)},R.prototype._findCol=function(a){var b=this.table.options.columns.find(function(b){return b.title===a});return b||!1},R.prototype._extractHeaders=function(g,i){for(var c=0,b,f,a,e,h;c<g.length;c++)b=g[c],f=!1,a=this._findCol(b.textContent),a?f=!0:a={title:b.textContent.trim()},a.field||(a.field=b.textContent.trim().toLowerCase().replace(" ","_")),e=b.getAttribute("width"),e&&!a.width&&(a.width=e),h=b.attributes,this._extractOptions(b,a,d.prototype.defaultOptionList),this.fieldIndex[c]=a.field,a.field==this.table.options.index&&(this.hasIndex=!0),f||this.table.options.columns.push(a)},R.prototype._generateBlankHeaders=function(c,f){for(var a=0,e,b,d;a<c.length;a++)e=c[a],b={title:"",field:"col"+a},this.fieldIndex[a]=b.field,d=e.getAttribute("width"),d&&(b.width=d),this.table.options.columns.push(b)},a.prototype.registerModule("htmlTableImport",R),M=function(a){this.table=a,this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1},M.prototype.initialize=function(){var a=this.table.options.keybindings,b={},c,d;if(this.watchKeys={},this.pressedKeys=[],a!==!1){for(c in this.bindings)b[c]=this.bindings[c];if(Object.keys(a).length)for(d in a)b[d]=a[d];this.mapBindings(b),this.bindEvents()}},M.prototype.mapBindings=function(a){var c=this,d=this,e=function(e){c.actions[e]?a[e]&&(b(a[e])!=="object"&&(a[e]=[a[e]]),a[e].forEach(function(a){d.mapBinding(e,a)})):console.warn("Key Binding Error - no such action:",e)},f;for(f in a)e(f)},M.prototype.mapBinding=function(c,d){var b=this,a={action:this.actions[c],keys:[],ctrl:!1,shift:!1,meta:!1},e=d.toString().toLowerCase().split(" ").join("").split("+");e.forEach(function(c){switch(c){case"ctrl":a.ctrl=!0;break;case"shift":a.shift=!0;break;case"meta":a.meta=!0;break;default:c=parseInt(c),a.keys.push(c),b.watchKeys[c]||(b.watchKeys[c]=[]),b.watchKeys[c].push(a)}})},M.prototype.bindEvents=function(){var a=this;this.keyupBinding=function(b){var c=b.keyCode,d=a.watchKeys[c];d&&(a.pressedKeys.push(c),d.forEach(function(c){a.checkBinding(b,c)}))},this.keydownBinding=function(d){var b=d.keyCode,e=a.watchKeys[b],c;e&&(c=a.pressedKeys.indexOf(b),c>-1&&a.pressedKeys.splice(c,1))},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)},M.prototype.clearBindings=function(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)},M.prototype.checkBinding=function(b,a){var c=this,d=!0;return!!(b.ctrlKey==a.ctrl&&b.shiftKey==a.shift&&b.metaKey==a.meta)&&(a.keys.forEach(function(a){var b=c.pressedKeys.indexOf(a);b==-1&&(d=!1)}),d&&a.action.call(c,b),!0)},M.prototype.bindings={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},M.prototype.actions={keyBlock:function(a){a.stopPropagation(),a.preventDefault()},scrollPageUp:function(c){var a=this.table.rowManager,b=a.scrollTop-a.height,e=a.element.scrollHeight;c.preventDefault(),a.displayRowsCount&&(b>=0?a.element.scrollTop=b:a.scrollToRow(a.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(c){var a=this.table.rowManager,b=a.scrollTop+a.height,d=a.element.scrollHeight;c.preventDefault(),a.displayRowsCount&&(b<=d?a.element.scrollTop=b:a.scrollToRow(a.getDisplayRows()[a.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(b){var a=this.table.rowManager;b.preventDefault(),a.displayRowsCount&&a.scrollToRow(a.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(b){var a=this.table.rowManager;b.preventDefault(),a.displayRowsCount&&a.scrollToRow(a.getDisplayRows()[a.displayRowsCount-1]),this.table.element.focus()},navPrev:function(b){var a=!1;this.table.modExists("edit")&&(a=this.table.modules.edit.currentCell,a&&(b.preventDefault(),a.nav().prev()))},navNext:function(d){var b=!1,a=this.table.options.tabEndNewRow,c;this.table.modExists("edit")&&(b=this.table.modules.edit.currentCell,b&&(d.preventDefault(),c=b.nav(),c.next()||a&&(b.getElement().firstChild.blur(),a===!0?a=this.table.addRow({}):typeof a=="function"?a=this.table.addRow(a(b.row.getComponent())):a=this.table.addRow(Object.assign({},a)),a.then(function(){setTimeout(function(){c.next()})}))))},navLeft:function(b){var a=!1;this.table.modExists("edit")&&(a=this.table.modules.edit.currentCell,a&&(b.preventDefault(),a.nav().left()))},navRight:function(b){var a=!1;this.table.modExists("edit")&&(a=this.table.modules.edit.currentCell,a&&(b.preventDefault(),a.nav().right()))},navUp:function(b){var a=!1;this.table.modExists("edit")&&(a=this.table.modules.edit.currentCell,a&&(b.preventDefault(),a.nav().up()))},navDown:function(b){var a=!1;this.table.modExists("edit")&&(a=this.table.modules.edit.currentCell,a&&(b.preventDefault(),a.nav().down()))},undo:function(b){var a=!1;this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(a=this.table.modules.edit.currentCell,a||(b.preventDefault(),this.table.modules.history.undo()))},redo:function(b){var a=!1;this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(a=this.table.modules.edit.currentCell,a||(b.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(b){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}},a.prototype.registerModule("keybindings",M),z=function(a){this.table=a,this.menuElements=[],this.blurEvent=this.hideMenu.bind(this),this.escEvent=this.escMenu.bind(this),this.nestedMenuBlock=!1,this.positionReversedX=!1},z.prototype.initializeColumnHeader=function(a){var c=this,b;a.definition.headerContextMenu&&(a.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,a,a.definition.headerContextMenu)),this.tapHold(a,a.definition.headerContextMenu)),a.definition.headerMenu&&(b=document.createElement("span"),b.classList.add("tabulator-header-menu-button"),b.innerHTML="&vellip;",b.addEventListener("click",function(b){b.stopPropagation(),b.preventDefault(),c.LoadMenuEvent(a,a.definition.headerMenu,b)}),a.titleElement.insertBefore(b,a.titleElement.firstChild))},z.prototype.LoadMenuEvent=function(b,a,c){a=typeof a=="function"?a.call(this.table,b.getComponent(),c):a,this.loadMenu(c,b,a)},z.prototype.tapHold=function(c,e){var f=this,d=c.getElement(),a=null,b=!1;d.addEventListener("touchstart",function(d){clearTimeout(a),b=!1,a=setTimeout(function(){clearTimeout(a),a=null,b=!0,f.LoadMenuEvent(c,e,d)},1e3)},{passive:!0}),d.addEventListener("touchend",function(c){clearTimeout(a),a=null,b&&c.preventDefault()})},z.prototype.initializeCell=function(a){a.column.definition.contextMenu&&(a.getElement(!0).addEventListener("contextmenu",this.LoadMenuEvent.bind(this,a,a.column.definition.contextMenu)),this.tapHold(a,a.column.definition.contextMenu)),a.column.definition.clickMenu&&a.getElement(!0).addEventListener("click",this.LoadMenuEvent.bind(this,a,a.column.definition.clickMenu))},z.prototype.initializeRow=function(a){this.table.options.rowContextMenu&&(a.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,a,this.table.options.rowContextMenu)),this.tapHold(a,this.table.options.rowContextMenu)),this.table.options.rowClickMenu&&a.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,a,this.table.options.rowClickMenu))},z.prototype.initializeGroup=function(a){this.table.options.groupContextMenu&&(a.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,a,this.table.options.groupContextMenu)),this.tapHold(a,this.table.options.groupContextMenu)),this.table.options.groupClickMenu&&a.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,a,this.table.options.groupClickMenu))},z.prototype.loadMenu=function(e,c,d,f){var b=this,g=!(e instanceof MouseEvent),a=document.createElement("div");if(a.classList.add("tabulator-menu"),g||e.preventDefault(),!d||!d.length)return;if(!f){if(this.nestedMenuBlock){if(this.isOpen())return}else this.nestedMenuBlock=setTimeout(function(){b.nestedMenuBlock=!1},100);this.hideMenu(),this.menuElements=[]}d.forEach(function(e){var d=document.createElement("div"),f=e.label,g=e.disabled;e.separator?d.classList.add("tabulator-menu-separator"):(d.classList.add("tabulator-menu-item"),typeof f=="function"&&(f=f.call(b.table,c.getComponent())),f instanceof Node?d.appendChild(f):d.innerHTML=f,typeof g=="function"&&(g=g.call(b.table,c.getComponent())),g?(d.classList.add("tabulator-menu-item-disabled"),d.addEventListener("click",function(a){a.stopPropagation()})):e.menu&&e.menu.length?d.addEventListener("click",function(f){f.stopPropagation(),b.hideOldSubMenus(a),b.loadMenu(f,c,e.menu,d)}):e.action&&d.addEventListener("click",function(a){e.action(a,c.getComponent())}),e.menu&&e.menu.length&&d.classList.add("tabulator-menu-item-submenu")),a.appendChild(d)}),a.addEventListener("click",function(a){b.hideMenu()}),this.menuElements.push(a),this.positionMenu(a,f,g,e)},z.prototype.hideOldSubMenus=function(d){var c=this.menuElements.indexOf(d),a,b;if(c>-1)for(a=this.menuElements.length-1;a>c;a--)b=this.menuElements[a],b.parentNode&&b.parentNode.removeChild(b),this.menuElements.pop()},z.prototype.positionMenu=function(b,c,j,h){var d=this,i=Math.max(document.body.offsetHeight,window.innerHeight),f,g,e;c?(e=a.prototype.helpers.elOffset(c),f=e.left+c.offsetWidth,g=e.top-1):(f=j?h.touches[0].pageX:h.pageX,g=j?h.touches[0].pageY:h.pageY,this.positionReversedX=!1),b.style.top=g+"px",b.style.left=f+"px",setTimeout(function(){d.table.rowManager.element.addEventListener("scroll",d.blurEvent),document.body.addEventListener("click",d.blurEvent),document.body.addEventListener("contextmenu",d.blurEvent),window.addEventListener("resize",d.blurEvent),document.body.addEventListener("keydown",d.escEvent)},100),document.body.appendChild(b),g+b.offsetHeight>=i&&(b.style.top="",c?b.style.bottom=i-e.top-c.offsetHeight-1+"px":b.style.bottom=i-g+"px"),(f+b.offsetWidth>=document.body.offsetWidth||this.positionReversedX)&&(b.style.left="",c?b.style.right=document.documentElement.offsetWidth-e.left+"px":b.style.right=document.documentElement.offsetWidth-f+"px",this.positionReversedX=!0)},z.prototype.isOpen=function(){return!!this.menuElements.length},z.prototype.escMenu=function(a){a.keyCode==27&&this.hideMenu()},z.prototype.hideMenu=function(){this.menuElements.forEach(function(a){a.parentNode&&a.parentNode.removeChild(a)}),document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent)},z.prototype.menus={},a.prototype.registerModule("menu",z),J=function(a){this.table=a,this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this)},J.prototype.createPlaceholderElement=function(){var a=document.createElement("div");return a.classList.add("tabulator-col"),a.classList.add("tabulator-col-placeholder"),a},J.prototype.initializeColumn=function(c){var b=this,e={},d;c.modules.frozen||(d=c.getElement(),e.mousemove=function(e){c.parent===b.moving.parent&&((b.touchMove?e.touches[0].pageX:e.pageX)-a.prototype.helpers.elOffset(d).left+b.table.columnManager.element.scrollLeft>c.getWidth()/2?(b.toCol!==c||!b.toColAfter)&&(d.parentNode.insertBefore(b.placeholderElement,d.nextSibling),b.moveColumn(c,!0)):(b.toCol!==c||b.toColAfter)&&(d.parentNode.insertBefore(b.placeholderElement,d),b.moveColumn(c,!1)))}.bind(b),d.addEventListener("mousedown",function(a){b.touchMove=!1,a.which===1&&(b.checkTimeout=setTimeout(function(){b.startMove(a,c)},b.checkPeriod))}),d.addEventListener("mouseup",function(a){a.which===1&&b.checkTimeout&&clearTimeout(b.checkTimeout)}),b.bindTouchEvents(c)),c.modules.moveColumn=e},J.prototype.bindTouchEvents=function(d){var a=this,j=d.getElement(),e=!1,l=!1,k,b,c,f,g,h,i;j.addEventListener("touchstart",function(j){a.checkTimeout=setTimeout(function(){a.touchMove=!0,k=d,b=d.nextColumn(),f=b?b.getWidth()/2:0,c=d.prevColumn(),g=c?c.getWidth()/2:0,h=0,i=0,e=!1,a.startMove(j,d)},a.checkPeriod)},{passive:!0}),j.addEventListener("touchmove",function(l){var n,m,j;a.moving&&(a.moveHover(l),e||(e=l.touches[0].pageX),m=l.touches[0].pageX-e,m>0?b&&m-h>f&&(j=b,j!==d&&(e=l.touches[0].pageX,j.getElement().parentNode.insertBefore(a.placeholderElement,j.getElement().nextSibling),a.moveColumn(j,!0))):c&&-m-i>g&&(j=c,j!==d&&(e=l.touches[0].pageX,j.getElement().parentNode.insertBefore(a.placeholderElement,j.getElement()),a.moveColumn(j,!1))),j&&(k=j,b=j.nextColumn(),h=f,f=b?b.getWidth()/2:0,c=j.prevColumn(),i=g,g=c?c.getWidth()/2:0))},{passive:!0}),j.addEventListener("touchend",function(b){a.checkTimeout&&clearTimeout(a.checkTimeout),a.moving&&a.endMove(b)})},J.prototype.startMove=function(d,c){var b=c.getElement();this.moving=c,this.startX=(this.touchMove?d.touches[0].pageX:d.pageX)-a.prototype.helpers.elOffset(b).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=c.getWidth()+"px",this.placeholderElement.style.height=c.getHeight()+"px",b.parentNode.insertBefore(this.placeholderElement,b),b.parentNode.removeChild(b),this.hoverElement=b.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom="0",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(d)},J.prototype._bindMouseMove=function(){this.table.columnManager.columnsByIndex.forEach(function(a){a.modules.moveColumn.mousemove&&a.getElement().addEventListener("mousemove",a.modules.moveColumn.mousemove)})},J.prototype._unbindMouseMove=function(){this.table.columnManager.columnsByIndex.forEach(function(a){a.modules.moveColumn.mousemove&&a.getElement().removeEventListener("mousemove",a.modules.moveColumn.mousemove)})},J.prototype.moveColumn=function(a,b){var c=this.moving.getCells();this.toCol=a,this.toColAfter=b,b?a.getCells().forEach(function(b,d){var a=b.getElement(!0);a.parentNode.insertBefore(c[d].getElement(),a.nextSibling)}):a.getCells().forEach(function(b,d){var a=b.getElement(!0);a.parentNode.insertBefore(c[d].getElement(),a)})},J.prototype.endMove=function(a){(a.which===1||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))},J.prototype.moveHover=function(g){var b=this,d=b.table.columnManager.getElement(),c=d.scrollLeft,f=(b.touchMove?g.touches[0].pageX:g.pageX)-a.prototype.helpers.elOffset(d).left+c,e;b.hoverElement.style.left=f-b.startX+"px",f-c<b.autoScrollMargin&&(b.autoScrollTimeout||(b.autoScrollTimeout=setTimeout(function(){e=Math.max(0,c-5),b.table.rowManager.getElement().scrollLeft=e,b.autoScrollTimeout=!1},1))),c+d.clientWidth-f<b.autoScrollMargin&&(b.autoScrollTimeout||(b.autoScrollTimeout=setTimeout(function(){e=Math.min(d.clientWidth,c+5),b.table.rowManager.getElement().scrollLeft=e,b.autoScrollTimeout=!1},1)))},a.prototype.registerModule("moveColumn",J),n=function(a){this.table=a,this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1},n.prototype.createPlaceholderElement=function(){var a=document.createElement("div");return a.classList.add("tabulator-row"),a.classList.add("tabulator-row-placeholder"),a},n.prototype.initialize=function(a){this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements},n.prototype.setHandle=function(a){this.hasHandle=a},n.prototype.initializeGroupHeader=function(c){var b=this,d={},e;d.mouseup=function(a){b.tableRowDrop(a,row)}.bind(b),d.mousemove=function(e){var d;e.pageY-a.prototype.helpers.elOffset(c.element).top+b.table.rowManager.element.scrollTop>c.getHeight()/2?(b.toRow!==c||!b.toRowAfter)&&(d=c.getElement(),d.parentNode.insertBefore(b.placeholderElement,d.nextSibling),b.moveRow(c,!0)):(b.toRow!==c||b.toRowAfter)&&(d=c.getElement(),d.previousSibling&&(d.parentNode.insertBefore(b.placeholderElement,d),b.moveRow(c,!1)))}.bind(b),c.modules.moveRow=d},n.prototype.initializeRow=function(c){var b=this,d={},e;d.mouseup=function(a){b.tableRowDrop(a,c)}.bind(b),d.mousemove=function(e){var d=c.getElement();e.pageY-a.prototype.helpers.elOffset(d).top+b.table.rowManager.element.scrollTop>c.getHeight()/2?(b.toRow!==c||!b.toRowAfter)&&(d.parentNode.insertBefore(b.placeholderElement,d.nextSibling),b.moveRow(c,!0)):(b.toRow!==c||b.toRowAfter)&&(d.parentNode.insertBefore(b.placeholderElement,d),b.moveRow(c,!1))}.bind(b),this.hasHandle||(e=c.getElement(),e.addEventListener("mousedown",function(a){a.which===1&&(b.checkTimeout=setTimeout(function(){b.startMove(a,c)},b.checkPeriod))}),e.addEventListener("mouseup",function(a){a.which===1&&b.checkTimeout&&clearTimeout(b.checkTimeout)}),this.bindTouchEvents(c,c.getElement())),c.modules.moveRow=d},n.prototype.initializeCell=function(b){var a=this,c=b.getElement(!0);c.addEventListener("mousedown",function(c){c.which===1&&(a.checkTimeout=setTimeout(function(){a.startMove(c,b.row)},a.checkPeriod))}),c.addEventListener("mouseup",function(b){b.which===1&&a.checkTimeout&&clearTimeout(a.checkTimeout)}),this.bindTouchEvents(b.row,c)},n.prototype.bindTouchEvents=function(e,j){var a=this,d=!1,l=!1,k,b,c,f,g,h,i;j.addEventListener("touchstart",function(j){a.checkTimeout=setTimeout(function(){a.touchMove=!0,k=e,b=e.nextRow(),f=b?b.getHeight()/2:0,c=e.prevRow(),g=c?c.getHeight()/2:0,h=0,i=0,d=!1,a.startMove(j,e)},a.checkPeriod)},{passive:!0}),this.moving,this.toRow,this.toRowAfter,j.addEventListener("touchmove",function(l){var n,m,j;a.moving&&(l.preventDefault(),a.moveHover(l),d||(d=l.touches[0].pageY),m=l.touches[0].pageY-d,m>0?b&&m-h>f&&(j=b,j!==e&&(d=l.touches[0].pageY,j.getElement().parentNode.insertBefore(a.placeholderElement,j.getElement().nextSibling),a.moveRow(j,!0))):c&&-m-i>g&&(j=c,j!==e&&(d=l.touches[0].pageY,j.getElement().parentNode.insertBefore(a.placeholderElement,j.getElement()),a.moveRow(j,!1))),j&&(k=j,b=j.nextRow(),h=f,f=b?b.getHeight()/2:0,c=j.prevRow(),i=g,g=c?c.getHeight()/2:0))}),j.addEventListener("touchend",function(b){a.checkTimeout&&clearTimeout(a.checkTimeout),a.moving&&(a.endMove(b),a.touchMove=!1)})},n.prototype._bindMouseMove=function(){var a=this;a.table.rowManager.getDisplayRows().forEach(function(a){(a.type==="row"||a.type==="group")&&a.modules.moveRow.mousemove&&a.getElement().addEventListener("mousemove",a.modules.moveRow.mousemove)})},n.prototype._unbindMouseMove=function(){var a=this;a.table.rowManager.getDisplayRows().forEach(function(a){(a.type==="row"||a.type==="group")&&a.modules.moveRow.mousemove&&a.getElement().removeEventListener("mousemove",a.modules.moveRow.mousemove)})},n.prototype.startMove=function(c,a){var b=a.getElement();this.setStartPosition(c,a),this.moving=a,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=a.getWidth()+"px",this.placeholderElement.style.height=a.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(a)):(b.parentNode.insertBefore(this.placeholderElement,b),b.parentNode.removeChild(b)),this.hoverElement=b.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(c)},n.prototype.setStartPosition=function(a,e){var f=this.touchMove?a.touches[0].pageX:a.pageX,d=this.touchMove?a.touches[0].pageY:a.pageY,b,c;b=e.getElement(),this.connection?(c=b.getBoundingClientRect(),this.startX=c.left-f+window.pageXOffset,this.startY=c.top-d+window.pageYOffset):this.startY=d-b.getBoundingClientRect().top},n.prototype.endMove=function(a){(!a||a.which===1||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))},n.prototype.moveRow=function(a,b){this.toRow=a,this.toRowAfter=b},n.prototype.moveHover=function(a){this.connection?this.moveHoverConnections.call(this,a):this.moveHoverTable.call(this,a)},n.prototype.moveHoverTable=function(a){var b=this.table.rowManager.getElement(),c=b.scrollTop,d=(this.touchMove?a.touches[0].pageY:a.pageY)-b.getBoundingClientRect().top+c,e;this.hoverElement.style.top=d-this.startY+"px"},n.prototype.moveHoverConnections=function(a){this.hoverElement.style.left=this.startX+(this.touchMove?a.touches[0].pageX:a.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?a.touches[0].pageY:a.pageY)+"px"},n.prototype.elementRowDrop=function(b,c,a){this.table.options.movableRowsElementDrop&&this.table.options.movableRowsElementDrop(b,c,!!a&&a.getComponent())},n.prototype.connectToTables=function(c){var a=this,b;this.connectionSelectorsTables&&(b=this.table.modules.comms.getConnections(this.connectionSelectorsTables),this.table.options.movableRowsSendingStart.call(this.table,b),this.table.modules.comms.send(this.connectionSelectorsTables,"moveRow","connect",{row:c})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(function(b){typeof b=="string"?a.connectionElements=a.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(b))):a.connectionElements.push(b)}),this.connectionElements.forEach(function(b){var c=function(c){a.elementRowDrop(c,b,a.moving)};b.addEventListener("mouseup",c),b.tabulatorElementDropEvent=c,b.classList.add("tabulator-movingrow-receiving")}))},n.prototype.disconnectFromTables=function(){var a;this.connectionSelectorsTables&&(a=this.table.modules.comms.getConnections(this.connectionSelectorsTables),this.table.options.movableRowsSendingStop.call(this.table,a),this.table.modules.comms.send(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(function(a){a.classList.remove("tabulator-movingrow-receiving"),a.removeEventListener("mouseup",a.tabulatorElementDropEvent),delete a.tabulatorElementDropEvent})},n.prototype.connect=function(b,c){var a=this;return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=b,this.connectedRow=c,this.table.element.classList.add("tabulator-movingrow-receiving"),a.table.rowManager.getDisplayRows().forEach(function(a){a.type==="row"&&a.modules.moveRow&&a.modules.moveRow.mouseup&&a.getElement().addEventListener("mouseup",a.modules.moveRow.mouseup)}),a.tableRowDropEvent=a.tableRowDrop.bind(a),a.table.element.addEventListener("mouseup",a.tableRowDropEvent),this.table.options.movableRowsReceivingStart.call(this.table,c,b),!0)},n.prototype.disconnect=function(b){var a=this;b===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),a.table.rowManager.getDisplayRows().forEach(function(a){a.type==="row"&&a.modules.moveRow&&a.modules.moveRow.mouseup&&a.getElement().removeEventListener("mouseup",a.modules.moveRow.mouseup)}),a.table.element.removeEventListener("mouseup",a.tableRowDropEvent),this.table.options.movableRowsReceivingStop.call(this.table,b)):console.warn("Move Row Error - trying to disconnect from non connected table")},n.prototype.dropComplete=function(d,a,e){var c=!1;if(e){switch(b(this.table.options.movableRowsSender)){case"string":c=this.senders[this.table.options.movableRowsSender];break;case"function":c=this.table.options.movableRowsSender;break}c?c.call(this,this.moving.getComponent(),a?a.getComponent():void 0,d):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.table.options.movableRowsSent.call(this.table,this.moving.getComponent(),a?a.getComponent():void 0,d)}else this.table.options.movableRowsSentFailed.call(this.table,this.moving.getComponent(),a?a.getComponent():void 0,d);this.endMove()},n.prototype.tableRowDrop=function(e,a){var c=!1,d=!1;switch(e.stopImmediatePropagation(),b(this.table.options.movableRowsReceiver)){case"string":c=this.receivers[this.table.options.movableRowsReceiver];break;case"function":c=this.table.options.movableRowsReceiver;break}c?d=c.call(this,this.connectedRow.getComponent(),a?a.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),d?this.table.options.movableRowsReceived.call(this.table,this.connectedRow.getComponent(),a?a.getComponent():void 0,this.connectedTable):this.table.options.movableRowsReceivedFailed.call(this.table,this.connectedRow.getComponent(),a?a.getComponent():void 0,this.connectedTable),this.table.modules.comms.send(this.connectedTable,"moveRow","dropcomplete",{row:a,success:d})},n.prototype.receivers={insert:function(a,b,d){return this.table.addRow(a.getData(),void 0,b),!0},add:function(a,c,d){return this.table.addRow(a.getData()),!0},update:function(b,a,d){return!!a&&(a.update(b.getData()),!0)},replace:function(b,a,d){return!!a&&(this.table.addRow(b.getData(),void 0,a),a.delete(),!0)}},n.prototype.senders={delete:function(a,c,d){a.delete()}},n.prototype.commsReceived=function(a,c,b){switch(c){case"connect":return this.connect(a,b.row);break;case"disconnect":return this.disconnect(a);break;case"dropcomplete":return this.dropComplete(a,b.row,b.success);break}},a.prototype.registerModule("moveRow",n),N=function(a){this.table=a,this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0},N.prototype.initializeColumn=function(a){var d=this,b=!1,c={};this.allowedTypes.forEach(function(g){var e="mutator"+(g.charAt(0).toUpperCase()+g.slice(1)),f;a.definition[e]&&(f=d.lookupMutator(a.definition[e]),f&&(b=!0,c[e]={mutator:f,params:a.definition[e+"Params"]||{}}))}),b&&(a.modules.mutate=c)},N.prototype.lookupMutator=function(a){var c=!1;switch(typeof a=="undefined"?"undefined":b(a)){case"string":this.mutators[a]?c=this.mutators[a]:console.warn("Mutator Error - No such mutator found, ignoring: ",a);break;case"function":c=a;break}return c},N.prototype.transformRow=function(a,b,d){var e=this,f="mutator"+(b.charAt(0).toUpperCase()+b.slice(1)),c;return this.enabled&&e.table.columnManager.traverse(function(e){var g,i,h;e.modules.mutate&&(g=e.modules.mutate[f]||e.modules.mutate.mutator||!1,g&&(c=e.getFieldValue(typeof d!="undefined"?d:a),(b=="data"||typeof c!="undefined")&&(h=e.getComponent(),i=typeof g.params=="function"?g.params(c,a,b,h):g.params,e.setFieldValue(a,g.mutator(c,a,b,i,h)))))}),a},N.prototype.transformCell=function(a,c){var d=a.column.modules.mutate.mutatorEdit||a.column.modules.mutate.mutator||!1,b={};return d?(b=Object.assign(b,a.row.getData()),a.column.setFieldValue(b,c),d.mutator(c,b,"edit",d.params,a.getComponent())):c},N.prototype.enable=function(){this.enabled=!0},N.prototype.disable=function(){this.enabled=!1},N.prototype.mutators={},a.prototype.registerModule("mutator",N),m=function(a){this.table=a,this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.initialLoad=!0,this.pageSizes=[],this.dataReceivedNames={},this.dataSentNames={},this.createElements()},m.prototype.createElements=function(){var a;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),a=document.createElement("button"),a.classList.add("tabulator-page"),a.setAttribute("type","button"),a.setAttribute("role","button"),a.setAttribute("aria-label",""),a.setAttribute("title",""),this.firstBut=a.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=a.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=a.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=a.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))},m.prototype.generatePageSizeSelectList=function(){var c=this,a=[],b;if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))a=this.table.options.paginationSizeSelector,this.pageSizes=a,this.pageSizes.indexOf(this.size)==-1&&a.unshift(this.size);else if(this.pageSizes.indexOf(this.size)==-1){a=[];for(b=1;b<5;b++)a.push(this.size*b);this.pageSizes=a}else a=this.pageSizes;while(this.pageSizeSelect.firstChild)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);a.forEach(function(b){var a=document.createElement("option");a.value=b,b===!0?c.table.modules.localize.bind("pagination|all",function(b){a.innerHTML=b}):a.innerHTML=b,c.pageSizeSelect.appendChild(a)}),this.pageSizeSelect.value=this.size}},m.prototype.initialize=function(e){var a=this,d,b,c;this.dataSentNames=Object.assign({},this.paginationDataSentNames),this.dataSentNames=Object.assign(this.dataSentNames,this.table.options.paginationDataSent),this.dataReceivedNames=Object.assign({},this.paginationDataReceivedNames),this.dataReceivedNames=Object.assign(this.dataReceivedNames,this.table.options.paginationDataReceived),a.table.modules.localize.bind("pagination|first",function(b){a.firstBut.innerHTML=b}),a.table.modules.localize.bind("pagination|first_title",function(b){a.firstBut.setAttribute("aria-label",b),a.firstBut.setAttribute("title",b)}),a.table.modules.localize.bind("pagination|prev",function(b){a.prevBut.innerHTML=b}),a.table.modules.localize.bind("pagination|prev_title",function(b){a.prevBut.setAttribute("aria-label",b),a.prevBut.setAttribute("title",b)}),a.table.modules.localize.bind("pagination|next",function(b){a.nextBut.innerHTML=b}),a.table.modules.localize.bind("pagination|next_title",function(b){a.nextBut.setAttribute("aria-label",b),a.nextBut.setAttribute("title",b)}),a.table.modules.localize.bind("pagination|last",function(b){a.lastBut.innerHTML=b}),a.table.modules.localize.bind("pagination|last_title",function(b){a.lastBut.setAttribute("aria-label",b),a.lastBut.setAttribute("title",b)}),a.firstBut.addEventListener("click",function(){a.setPage(1).then(function(){}).catch(function(){})}),a.prevBut.addEventListener("click",function(){a.previousPage().then(function(){}).catch(function(){})}),a.nextBut.addEventListener("click",function(){a.nextPage().then(function(){}).catch(function(){})}),a.lastBut.addEventListener("click",function(){a.setPage(a.max).then(function(){}).catch(function(){})}),a.table.options.paginationElement&&(a.element=a.table.options.paginationElement),this.pageSizeSelect&&(d=document.createElement("label"),a.table.modules.localize.bind("pagination|page_size",function(b){a.pageSizeSelect.setAttribute("aria-label",b),a.pageSizeSelect.setAttribute("title",b),d.innerHTML=b}),a.element.appendChild(d),a.element.appendChild(a.pageSizeSelect),a.pageSizeSelect.addEventListener("change",function(b){a.setPageSize(a.pageSizeSelect.value=="true"||a.pageSizeSelect.value),a.setPage(1).then(function(){}).catch(function(){})})),a.element.appendChild(a.firstBut),a.element.appendChild(a.prevBut),a.element.appendChild(a.pagesElement),a.element.appendChild(a.nextBut),a.element.appendChild(a.lastBut),!a.table.options.paginationElement&&!e&&a.table.footerManager.append(a.element,a),a.mode=a.table.options.pagination,a.table.options.paginationSize?a.size=a.table.options.paginationSize:(b=document.createElement("div"),b.classList.add("tabulator-row"),b.style.visibility=e,c=document.createElement("div"),c.classList.add("tabulator-cell"),c.innerHTML="Page Row Test",b.appendChild(c),a.table.rowManager.getTableElement().appendChild(b),a.size=Math.floor(a.table.rowManager.getElement().clientHeight/b.offsetHeight),a.table.rowManager.getTableElement().removeChild(b)),a.count=a.table.options.paginationButtonCount,a.generatePageSizeSelectList()},m.prototype.initializeProgressive=function(a){this.initialize(!0),this.mode="progressive_"+a,this.progressiveLoad=!0},m.prototype.setDisplayIndex=function(a){this.displayIndex=a},m.prototype.getDisplayIndex=function(){return this.displayIndex},m.prototype.setMaxRows=function(a){a?this.max=this.size===!0?1:Math.ceil(a/this.size):this.max=1,this.page>this.max&&(this.page=this.max)},m.prototype.reset=function(a,b){return(this.mode=="local"||a)&&(this.page=1),b&&(this.initialLoad=!0),!0},m.prototype.setMaxPage=function(a){a=parseInt(a),this.max=a||1,this.page>this.max&&(this.page=this.max,this.trigger())},m.prototype.setPage=function(a){var b=this,c=this;switch(a){case"first":return this.setPage(1);break;case"prev":return this.previousPage();break;case"next":return this.nextPage();break;case"last":return this.setPage(this.max);break}return new Promise(function(e,d){a=parseInt(a),a>0&&a<=b.max||b.mode!=="local"?(b.page=a,b.trigger().then(function(){e()}).catch(function(){d()}),c.table.options.persistence&&c.table.modExists("persistence",!0)&&c.table.modules.persistence.config.page&&c.table.modules.persistence.save("page")):(console.warn("Pagination Error - Requested page is out of range of 1 - "+b.max+":",a),d())})},m.prototype.setPageToRow=function(b){var a=this;return new Promise(function(e,c){var f=a.table.rowManager.getDisplayRows(a.displayIndex-1),d=f.indexOf(b),g;d>-1?(g=a.size===!0?1:Math.ceil((d+1)/a.size),a.setPage(g).then(function(){e()}).catch(function(){c()})):(console.warn("Pagination Error - Requested row is not visible"),c())})},m.prototype.setPageSize=function(a){a!==!0&&(a=parseInt(a)),a>0&&(this.size=a),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.page&&this.table.modules.persistence.save("page")},m.prototype._setPageButtons=function(){for(var a=this,c=Math.floor((this.count-1)/2),d=Math.ceil((this.count-1)/2),e=this.max-this.page+c+1<this.count?this.max-this.count+1:Math.max(this.page-c,1),f=this.page<=d?Math.min(this.count,this.max):Math.min(this.page+d,this.max),b;a.pagesElement.firstChild;)a.pagesElement.removeChild(a.pagesElement.firstChild);a.page==1?(a.firstBut.disabled=!0,a.prevBut.disabled=!0):(a.firstBut.disabled=!1,a.prevBut.disabled=!1),a.page==a.max?(a.lastBut.disabled=!0,a.nextBut.disabled=!0):(a.lastBut.disabled=!1,a.nextBut.disabled=!1);for(b=e;b<=f;b++)b>0&&b<=a.max&&a.pagesElement.appendChild(a._generatePageButton(b));this.footerRedraw()},m.prototype._generatePageButton=function(b){var c=this,a=document.createElement("button");return a.classList.add("tabulator-page"),b==c.page&&a.classList.add("active"),a.setAttribute("type","button"),a.setAttribute("role","button"),c.table.modules.localize.bind("pagination|page_title",function(c){a.setAttribute("aria-label",c+" "+b),a.setAttribute("title",c+" "+b)}),a.setAttribute("data-page",b),a.textContent=b,a.addEventListener("click",function(a){c.setPage(b).then(function(){}).catch(function(){})}),a},m.prototype.previousPage=function(){var a=this;return new Promise(function(c,b){a.page>1?(a.page--,a.trigger().then(function(){c()}).catch(function(){b()}),a.table.options.persistence&&a.table.modExists("persistence",!0)&&a.table.modules.persistence.config.page&&a.table.modules.persistence.save("page")):(console.warn("Pagination Error - Previous page would be less than page 1:",0),b())})},m.prototype.nextPage=function(){var a=this;return new Promise(function(c,b){a.page<a.max?(a.page++,a.trigger().then(function(){c()}).catch(function(){b()}),a.table.options.persistence&&a.table.modExists("persistence",!0)&&a.table.modules.persistence.config.page&&a.table.modules.persistence.save("page")):(a.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+a.max+":",a.max+1),b())})},m.prototype.getPage=function(){return this.page},m.prototype.getPageMax=function(){return this.max},m.prototype.getPageSize=function(a){return this.size},m.prototype.getMode=function(){return this.mode},m.prototype.getRows=function(a){var d,b,e,c;if(this.mode=="local"){d=[],this.size===!0?(b=0,e=a.length):(b=this.size*(this.page-1),e=b+parseInt(this.size)),this._setPageButtons();for(c=b;c<e;c++)a[c]&&d.push(a[c]);return d}return this._setPageButtons(),a.slice(0)},m.prototype.trigger=function(){var a=this,b;return new Promise(function(c,d){switch(a.mode){case"local":b=a.table.rowManager.scrollLeft,a.table.rowManager.refreshActiveData("page"),a.table.rowManager.scrollHorizontal(b),a.table.options.pageLoaded.call(a.table,a.getPage()),c();break;case"remote":case"progressive_load":case"progressive_scroll":a.table.modules.ajax.blockActiveRequest(),a._getRemotePage().then(function(){c()}).catch(function(){d()});break;default:console.warn("Pagination Error - no such pagination mode:",a.mode),d()}})},m.prototype._getRemotePage=function(){var b=this,c=this,e,d;return new Promise(function(i,g){var f,h;c.table.modExists("ajax",!0)||g(),e=a.prototype.helpers.deepClone(c.table.modules.ajax.getParams()||{}),d=c.table.modules.ajax.getParams(),d[b.dataSentNames.page]=c.page,b.size&&(d[b.dataSentNames.size]=b.size),b.table.options.ajaxSorting&&b.table.modExists("sort")&&(f=c.table.modules.sort.getSort(),f.forEach(function(a){delete a.column}),d[b.dataSentNames.sorters]=f),b.table.options.ajaxFiltering&&b.table.modExists("filter")&&(h=c.table.modules.filter.getFilters(!0,!0),d[b.dataSentNames.filters]=h),c.table.modules.ajax.setParams(d),c.table.modules.ajax.sendRequest(b.progressiveLoad).then(function(a){c._parseRemoteData(a),i()}).catch(function(a){g()}),c.table.modules.ajax.setParams(e)})},m.prototype._parseRemoteData=function(a){var b=this,c,a,d;if(typeof a[this.dataReceivedNames.last_page]=="undefined"&&console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.last_page+"' property"),a[this.dataReceivedNames.data]){if(this.max=parseInt(a[this.dataReceivedNames.last_page])||1,this.progressiveLoad)switch(this.mode){case"progressive_load":this.page==1?this.table.rowManager.setData(a[this.dataReceivedNames.data],!1,this.initialLoad&&this.page==1):this.table.rowManager.addRows(a[this.dataReceivedNames.data]),this.page<this.max&&setTimeout(function(){b.nextPage().then(function(){}).catch(function(){})},b.table.options.ajaxProgressiveLoadDelay);break;case"progressive_scroll":a=this.table.rowManager.getData().concat(a[this.dataReceivedNames.data]),this.table.rowManager.setData(a,!0,this.initialLoad&&this.page==1),d=this.table.options.ajaxProgressiveLoadScrollMargin||this.table.rowManager.element.clientHeight*2,b.table.rowManager.element.scrollHeight<=b.table.rowManager.element.clientHeight+d&&b.nextPage().then(function(){}).catch(function(){});break}else c=this.table.rowManager.scrollLeft,this.table.rowManager.setData(a[this.dataReceivedNames.data],!1,this.initialLoad&&this.page==1),this.table.rowManager.scrollHorizontal(c),this.table.columnManager.scrollHorizontal(c),this.table.options.pageLoaded.call(this.table,this.getPage());this.initialLoad=!1}else console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.data+"' property")},m.prototype.footerRedraw=function(){var a=this.table.footerManager.element;Math.ceil(a.clientWidth)-a.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(a.clientWidth)-a.scrollWidth<0&&(this.pagesElement.style.display="none"))},m.prototype.paginationDataSentNames={page:"page",size:"size",sorters:"sorters",filters:"filters"},m.prototype.paginationDataReceivedNames={current_page:"current_page",last_page:"last_page",data:"data"},a.prototype.registerModule("page",m),x=function(a){this.table=a,this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1},x.prototype.localStorageTest=function(){var a="_tabulator_test";try{return window.localStorage.setItem(a,a),window.localStorage.removeItem(a),!0}catch(a){return!1}},x.prototype.initialize=function(){var b=this.table.options.persistenceMode,c=this.table.options.persistenceID,a;this.mode=b!==!0?b:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?typeof this.table.options.persistenceReaderFunc=="function"?this.readFunc=this.table.options.persistenceReaderFunc:this.readers[this.table.options.persistenceReaderFunc]?this.readFunc=this.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):this.readers[this.mode]?this.readFunc=this.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?typeof this.table.options.persistenceWriterFunc=="function"?this.writeFunc=this.table.options.persistenceWriterFunc:this.readers[this.table.options.persistenceWriterFunc]?this.writeFunc=this.readers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):this.writers[this.mode]?this.writeFunc=this.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(c||this.table.element.getAttribute("id")||""),this.config={sort:this.table.options.persistence===!0||this.table.options.persistence.sort,filter:this.table.options.persistence===!0||this.table.options.persistence.filter,group:this.table.options.persistence===!0||this.table.options.persistence.group,page:this.table.options.persistence===!0||this.table.options.persistence.page,columns:this.table.options.persistence===!0?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(a=this.retreiveData("page"),a&&(typeof a.paginationSize!="undefined"&&(this.config.page===!0||this.config.page.size)&&(this.table.options.paginationSize=a.paginationSize),typeof a.paginationInitialPage!="undefined"&&(this.config.page===!0||this.config.page.page)&&(this.table.options.paginationInitialPage=a.paginationInitialPage))),this.config.group&&(a=this.retreiveData("group"),a&&(typeof a.groupBy!="undefined"&&(this.config.group===!0||this.config.group.groupBy)&&(this.table.options.groupBy=a.groupBy),typeof a.groupStartOpen!="undefined"&&(this.config.group===!0||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=a.groupStartOpen),typeof a.groupHeader!="undefined"&&(this.config.group===!0||this.config.group.groupHeader)&&(this.table.options.groupHeader=a.groupHeader))),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns))},x.prototype.initializeColumn=function(d){var b=this,a,c;this.config.columns&&(this.defWatcherBlock=!0,a=d.getDefinition(),c=this.config.columns===!0?Object.keys(a):this.config.columns,c.forEach(function(d){var c=Object.getOwnPropertyDescriptor(a,d),e=a[d];c&&Object.defineProperty(a,d,{set:function(a){e=a,b.defWatcherBlock||b.save("columns"),c.set&&c.set(a)},get:function(){return c.get&&c.get(),e}})}),this.defWatcherBlock=!1)},x.prototype.load=function(c,b){var a=this.retreiveData(c);return b&&(a=a?this.mergeDefinition(b,a):b),a},x.prototype.retreiveData=function(a){return!!this.readFunc&&this.readFunc(this.id,a)},x.prototype.mergeDefinition=function(d,c){var a=this,b=[];return c=c||[],c.forEach(function(e,g){var c=a._findColumn(d,e),f;c&&(a.config.columns===!0||a.config.columns==void 0?(f=Object.keys(c),f.push("width")):f=a.config.columns,f.forEach(function(a){a!=="columns"&&typeof e[a]!="undefined"&&(c[a]=e[a])}),c.columns&&(c.columns=a.mergeDefinition(c.columns,e.columns)),b.push(c))}),d.forEach(function(d,e){var f=a._findColumn(c,d);f||(b.length>e?b.splice(e,0,d):b.push(d))}),b},x.prototype._findColumn=function(b,a){var c=a.columns?"group":a.field?"field":"object";return b.find(function(b){switch(c){case"group":return b.title===a.title&&b.columns.length===a.columns.length;break;case"field":return b.field===a.field;break;case"object":return b===a;break}})},x.prototype.save=function(b){var a={};switch(b){case"columns":a=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":a=this.table.modules.filter.getFilters();break;case"sort":a=this.validateSorters(this.table.modules.sort.getSort());break;case"group":a=this.getGroupConfig();break;case"page":a=this.getPageConfig();break}this.writeFunc&&this.writeFunc(this.id,b,a)},x.prototype.validateSorters=function(a){return a.forEach(function(a){a.column=a.field,delete a.field}),a},x.prototype.getGroupConfig=function(){var a={};return this.config.group&&((this.config.group===!0||this.config.group.groupBy)&&(a.groupBy=this.table.options.groupBy),(this.config.group===!0||this.config.group.groupStartOpen)&&(a.groupStartOpen=this.table.options.groupStartOpen),(this.config.group===!0||this.config.group.groupHeader)&&(a.groupHeader=this.table.options.groupHeader)),a},x.prototype.getPageConfig=function(){var a={};return this.config.page&&((this.config.page===!0||this.config.page.size)&&(a.paginationSize=this.table.modules.page.getPageSize()),(this.config.page===!0||this.config.page.page)&&(a.paginationInitialPage=this.table.modules.page.getPage())),a},x.prototype.parseColumns=function(c){var a=this,b=[],d=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return c.forEach(function(e){var c={},f=e.getDefinition(),g;e.isGroup?(c.title=f.title,c.columns=a.parseColumns(e.getColumns())):(c.field=e.getField(),a.config.columns===!0||a.config.columns==void 0?(g=Object.keys(f),g.push("width")):g=a.config.columns,g.forEach(function(a){switch(a){case"width":c.width=e.getWidth();break;case"visible":c.visible=e.visible;break;default:typeof f[a]!="function"&&d.indexOf(a)===-1&&(c[a]=f[a])}})),b.push(c)}),b},x.prototype.readers={local:function(b,c){var a=localStorage.getItem(b+"-"+c);return!!a&&JSON.parse(a)},cookie:function(g,f){var a=document.cookie,d=g+"-"+f,e=a.indexOf(d+"="),b,c;return e>-1&&(a=a.substr(e),b=a.indexOf(";"),b>-1&&(a=a.substr(0,b)),c=a.replace(d+"=","")),!!c&&JSON.parse(c)}},x.prototype.writers={local:function(a,b,c){localStorage.setItem(a+"-"+b,JSON.stringify(c))},cookie:function(b,c,d){var a=new Date;a.setDate(a.getDate()+1e4),document.cookie=b+"-"+c+"="+JSON.stringify(d)+"; expires="+a.toUTCString()}},a.prototype.registerModule("persistence",x),T=function(a){this.table=a,this.element=!1,this.manualBlock=!1},T.prototype.initialize=function(){window.addEventListener("beforeprint",this.replaceTable.bind(this)),window.addEventListener("afterprint",this.cleanup.bind(this))},T.prototype.replaceTable=function(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))},T.prototype.cleanup=function(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")},T.prototype.printFullscreen=function(i,e,g){var j=window.scrollX,h=window.scrollY,d=document.createElement("div"),a=document.createElement("div"),f=this.table.modules.export.genereateTable(typeof g!="undefined"?g:this.table.options.printConfig,typeof e!="undefined"?e:this.table.options.printStyled,i,"print"),b,c;this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(d.classList.add("tabulator-print-header"),b=typeof this.table.options.printHeader=="function"?this.table.options.printHeader.call(this.table):this.table.options.printHeader,typeof b=="string"?d.innerHTML=b:d.appendChild(b),this.element.appendChild(d)),this.element.appendChild(f),this.table.options.printFooter&&(a.classList.add("tabulator-print-footer"),c=typeof this.table.options.printFooter=="function"?this.table.options.printFooter.call(this.table):this.table.options.printFooter,typeof c=="string"?a.innerHTML=c:a.appendChild(c),this.element.appendChild(a)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,f),window.print(),this.cleanup(),window.scrollTo(j,h),this.manualBlock=!1},a.prototype.registerModule("print",T),L=function(a){this.table=a,this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0},L.prototype.watchData=function(b){var a=this,d,c;this.currentVersion++,c=this.currentVersion,a.unwatchData(),a.data=b,a.origFuncs.push=b.push,Object.defineProperty(a.data,"push",{enumerable:!1,configurable:!0,value:function(){var d=Array.from(arguments);return!a.blocked&&c===a.currentVersion&&d.forEach(function(b){a.table.rowManager.addRowActual(b,!1)}),a.origFuncs.push.apply(b,arguments)}}),a.origFuncs.unshift=b.unshift,Object.defineProperty(a.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var d=Array.from(arguments);return!a.blocked&&c===a.currentVersion&&d.forEach(function(b){a.table.rowManager.addRowActual(b,!0)}),a.origFuncs.unshift.apply(b,arguments)}}),a.origFuncs.shift=b.shift,Object.defineProperty(a.data,"shift",{enumerable:!1,configurable:!0,value:function(){var d;return!a.blocked&&c===a.currentVersion&&a.data.length&&(d=a.table.rowManager.getRowFromDataObject(a.data[0]),d&&d.deleteActual()),a.origFuncs.shift.call(b)}}),a.origFuncs.pop=b.pop,Object.defineProperty(a.data,"pop",{enumerable:!1,configurable:!0,value:function(){var d;return!a.blocked&&c===a.currentVersion&&a.data.length&&(d=a.table.rowManager.getRowFromDataObject(a.data[a.data.length-1]),d&&d.deleteActual()),a.origFuncs.pop.call(b)}}),a.origFuncs.splice=b.splice,Object.defineProperty(a.data,"splice",{enumerable:!1,configurable:!0,value:function(){var d=Array.from(arguments),f=d[0]<0?b.length+d[0]:d[0],g=d[1],e=!!d[2]&&d.slice(2),h,i;return!a.blocked&&c===a.currentVersion&&(e&&(h=!!b[f]&&a.table.rowManager.getRowFromDataObject(b[f]),h?e.forEach(function(b){a.table.rowManager.addRowActual(b,!0,h,!0)}):(e=e.slice().reverse(),e.forEach(function(b){a.table.rowManager.addRowActual(b,!0,!1,!0)}))),g!==0&&(i=b.slice(f,typeof d[1]=="undefined"?d[1]:f+g),i.forEach(function(c,d){var b=a.table.rowManager.getRowFromDataObject(c);b&&b.deleteActual(d!==i.length-1)})),(e||g!==0)&&a.table.rowManager.reRenderInPosition()),a.origFuncs.splice.apply(b,arguments)}})},L.prototype.unwatchData=function(){if(this.data!==!1)for(var a in this.origFuncs)Object.defineProperty(this.data,a,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})},L.prototype.watchRow=function(a){var b=a.getData(),c;this.blocked=!0;for(c in b)this.watchKey(a,b,c);this.table.options.dataTree&&this.watchTreeChildren(a),this.blocked=!1},L.prototype.watchTreeChildren=function(d){var e=this,a=d.getData()[this.table.options.dataTreeChildField],b={};function c(){e.table.modules.dataTree.initializeRow(d),e.table.modules.dataTree.layoutRow(d),e.table.rowManager.refreshActiveData("tree",!1,!0)}a&&(b.push=a.push,Object.defineProperty(a,"push",{enumerable:!1,configurable:!0,value:function(){var d=b.push.apply(a,arguments);return c(),d}}),b.unshift=a.unshift,Object.defineProperty(a,"unshift",{enumerable:!1,configurable:!0,value:function(){var d=b.unshift.apply(a,arguments);return c(),d}}),b.shift=a.shift,Object.defineProperty(a,"shift",{enumerable:!1,configurable:!0,value:function(){var d=b.shift.call(a);return c(),d}}),b.pop=a.pop,Object.defineProperty(a,"pop",{enumerable:!1,configurable:!0,value:function(){var d=b.pop.call(a);return c(),d}}),b.splice=a.splice,Object.defineProperty(a,"splice",{enumerable:!1,configurable:!0,value:function(){var d=b.splice.apply(a,arguments);return c(),d}}))},L.prototype.watchKey=function(f,c,a){var d=this,b=Object.getOwnPropertyDescriptor(c,a),e=c[a],g=this.currentVersion;Object.defineProperty(c,a,{set:function(c){if(e=c,!d.blocked&&g===d.currentVersion){var h={};h[a]=c,f.updateData(h)}b.set&&b.set(c)},get:function(){return b.get&&b.get(),e}})},L.prototype.unwatchRow=function(c){var a=c.getData(),b;for(b in a)Object.defineProperty(a,b,{value:a[b]})},L.prototype.block=function(){this.blocked=!0},L.prototype.unblock=function(){this.blocked=!1},a.prototype.registerModule("reactiveData",L),Y=function(a){this.table=a,this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null},Y.prototype.initializeColumn=function(h,b,e){var a=this,f=!1,g=this.table.options.resizableColumns,c,d,i,j;h==="header"&&(f=b.definition.formatter=="textarea"||b.definition.variableHeight,b.modules.resize={variableHeight:f}),(g===!0||g==h)&&(c=document.createElement("div"),c.className="tabulator-col-resize-handle",d=document.createElement("div"),d.className="tabulator-col-resize-handle prev",c.addEventListener("click",function(a){a.stopPropagation()}),i=function(e){var d=b.getLastColumn();d&&a._checkResizability(d)&&(a.startColumn=b,a._mouseDown(e,d,c))},c.addEventListener("mousedown",i),c.addEventListener("touchstart",i,{passive:!0}),c.addEventListener("dblclick",function(d){var c=b.getLastColumn();c&&a._checkResizability(c)&&(d.stopPropagation(),c.reinitializeWidth(!0))}),d.addEventListener("click",function(a){a.stopPropagation()}),j=function(g){var e,f,c;e=b.getFirstColumn(),e&&(f=a.table.columnManager.findColumnIndex(e),c=f>0&&a.table.columnManager.getColumnByIndex(f-1),c&&a._checkResizability(c)&&(a.startColumn=b,a._mouseDown(g,c,d)))},d.addEventListener("mousedown",j),d.addEventListener("touchstart",j,{passive:!0}),d.addEventListener("dblclick",function(f){var d,e,c;d=b.getFirstColumn(),d&&(e=a.table.columnManager.findColumnIndex(d),c=e>0&&a.table.columnManager.getColumnByIndex(e-1),c&&a._checkResizability(c)&&(f.stopPropagation(),c.reinitializeWidth(!0)))}),e.appendChild(c),e.appendChild(d))},Y.prototype._checkResizability=function(a){return typeof a.definition.resizable!="undefined"?a.definition.resizable:this.table.options.resizableColumns},Y.prototype._mouseDown=function(c,b,d){var a=this;a.table.element.classList.add("tabulator-block-select");function e(c){a.table.rtl?b.setWidth(a.startWidth-((typeof c.screenX=="undefined"?c.touches[0].screenX:c.screenX)-a.startX)):b.setWidth(a.startWidth+((typeof c.screenX=="undefined"?c.touches[0].screenX:c.screenX)-a.startX)),a.table.options.virtualDomHoz&&a.table.vdomHoz.reinitialize(!0),!a.table.browserSlow&&b.modules.resize&&b.modules.resize.variableHeight&&b.checkCellHeights()}function f(c){a.startColumn.modules.edit&&(a.startColumn.modules.edit.blocked=!1),a.table.browserSlow&&b.modules.resize&&b.modules.resize.variableHeight&&b.checkCellHeights(),document.body.removeEventListener("mouseup",f),document.body.removeEventListener("mousemove",e),d.removeEventListener("touchmove",e),d.removeEventListener("touchend",f),a.table.element.classList.remove("tabulator-block-select"),a.table.options.persistence&&a.table.modExists("persistence",!0)&&a.table.modules.persistence.config.columns&&a.table.modules.persistence.save("columns"),a.table.options.columnResized.call(a.table,b.getComponent())}c.stopPropagation(),a.startColumn.modules.edit&&(a.startColumn.modules.edit.blocked=!0),a.startX=typeof c.screenX=="undefined"?c.touches[0].screenX:c.screenX,a.startWidth=b.getWidth(),document.body.addEventListener("mousemove",e),document.body.addEventListener("mouseup",f),d.addEventListener("touchmove",e,{passive:!0}),d.addEventListener("touchend",f)},a.prototype.registerModule("resizeColumns",Y),aa=function(a){this.table=a,this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null},aa.prototype.initializeRow=function(d){var c=this,e=d.getElement(),a=document.createElement("div"),b,f,g;a.className="tabulator-row-resize-handle",b=document.createElement("div"),b.className="tabulator-row-resize-handle prev",a.addEventListener("click",function(a){a.stopPropagation()}),f=function(b){c.startRow=d,c._mouseDown(b,d,a)},a.addEventListener("mousedown",f),a.addEventListener("touchstart",f,{passive:!0}),b.addEventListener("click",function(a){a.stopPropagation()}),g=function(e){var a=c.table.rowManager.prevDisplayRow(d);a&&(c.startRow=a,c._mouseDown(e,a,b))},b.addEventListener("mousedown",g),b.addEventListener("touchstart",g,{passive:!0}),e.appendChild(a),e.appendChild(b)},aa.prototype._mouseDown=function(c,e,d){var a=this;a.table.element.classList.add("tabulator-block-select");function b(b){e.setHeight(a.startHeight+((typeof b.screenY=="undefined"?b.touches[0].screenY:b.screenY)-a.startY))}function f(c){document.body.removeEventListener("mouseup",b),document.body.removeEventListener("mousemove",b),d.removeEventListener("touchmove",b),d.removeEventListener("touchend",f),a.table.element.classList.remove("tabulator-block-select"),a.table.options.rowResized.call(this.table,e.getComponent())}c.stopPropagation(),a.startY=typeof c.screenY=="undefined"?c.touches[0].screenY:c.screenY,a.startHeight=e.getHeight(),document.body.addEventListener("mousemove",b),document.body.addEventListener("mouseup",f),d.addEventListener("touchmove",b,{passive:!0}),d.addEventListener("touchend",f)},a.prototype.registerModule("resizeRows",aa),_=function(a){this.table=a,this.binding=!1,this.observer=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1},_.prototype.initialize=function(d){var b=this,a=this.table,c;this.tableHeight=a.element.clientHeight,this.tableWidth=a.element.clientWidth,a.element.parentNode&&(this.containerHeight=a.element.parentNode.clientHeight,this.containerWidth=a.element.parentNode.clientWidth),typeof ResizeObserver!="undefined"&&a.rowManager.getRenderMode()==="virtual"?(this.autoResize=!0,this.observer=new ResizeObserver(function(e){var c,d;(!a.browserMobile||a.browserMobile&&!a.modules.edit.currentCell)&&(c=Math.floor(e[0].contentRect.height),d=Math.floor(e[0].contentRect.width),(b.tableHeight!=c||b.tableWidth!=d)&&(b.tableHeight=c,b.tableWidth=d,a.element.parentNode&&(b.containerHeight=a.element.parentNode.clientHeight,b.containerWidth=a.element.parentNode.clientWidth),a.options.virtualDomHoz&&a.vdomHoz.reinitialize(!0),a.redraw()))}),this.observer.observe(a.element),c=window.getComputedStyle(a.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(c.getPropertyValue("max-height")||c.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(function(e){var c,d;(!a.browserMobile||a.browserMobile&&!a.modules.edit.currentCell)&&(c=Math.floor(e[0].contentRect.height),d=Math.floor(e[0].contentRect.width),(b.containerHeight!=c||b.containerWidth!=d)&&(b.containerHeight=c,b.containerWidth=d,b.tableHeight=a.element.clientHeight,b.tableWidth=a.element.clientWidth),a.options.virtualDomHoz&&a.vdomHoz.reinitialize(!0),a.redraw())}),this.containerObserver.observe(this.table.element.parentNode))):(this.binding=function(){(!a.browserMobile||a.browserMobile&&!a.modules.edit.currentCell)&&(a.options.virtualDomHoz&&a.vdomHoz.reinitialize(!0),a.redraw())},window.addEventListener("resize",this.binding))},_.prototype.clearBindings=function(a){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)},a.prototype.registerModule("resizeTable",_),C=function(a){this.table=a,this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1},C.prototype.initialize=function(){var e=this,b=[],a,f,c,d,g;this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach(function(a,c){a.modules.responsive&&a.modules.responsive.order&&a.modules.responsive.visible&&(a.modules.responsive.index=c,b.push(a),!a.visible&&e.mode==="collapse"&&e.hiddenColumns.push(a))}),b=b.reverse(),b=b.sort(function(a,b){var c=b.modules.responsive.order-a.modules.responsive.order;return c||b.modules.responsive.index-a.modules.responsive.index}),this.columns=b,this.mode==="collapse"&&this.generateCollapsedContent();for(a=this.table.columnManager.columnsByIndex,f=Array.isArray(a),c=0,a=f?a:a[Symbol.iterator]();;){if(f){if(c>=a.length)break;d=a[c++]}else{if(c=a.next(),c.done)break;d=c.value}if(g=d,g.definition.formatter=="responsiveCollapse"){this.collapseHandleColumn=g;break}}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())},C.prototype.initializeColumn=function(b){var a=b.getDefinition();b.modules.responsive={order:typeof a.responsive=="undefined"?1:a.responsive,visible:a.visible!==!1}},C.prototype.initializeRow=function(b){var a;b.type!=="calc"&&(a=document.createElement("div"),a.classList.add("tabulator-responsive-collapse"),b.modules.responsiveLayout={element:a,open:this.collapseStartOpen},this.collapseStartOpen||(a.style.display="none"))},C.prototype.layoutRow=function(a){var b=a.getElement();a.modules.responsiveLayout&&(b.appendChild(a.modules.responsiveLayout.element),this.generateCollapsedRowContent(a))},C.prototype.updateColumnVisibility=function(a,b){var c;a.modules.responsive&&(a.modules.responsive.visible=b,this.initialize())},C.prototype.hideColumn=function(a){var b=this.hiddenColumns.length;a.hide(!1,!0),this.mode==="collapse"&&(this.hiddenColumns.unshift(a),this.generateCollapsedContent(),this.collapseHandleColumn&&!b&&this.collapseHandleColumn.show())},C.prototype.showColumn=function(a){var b;a.show(!1,!0),a.setWidth(a.getWidth()),this.mode==="collapse"&&(b=this.hiddenColumns.indexOf(a),b>-1&&this.hiddenColumns.splice(b,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())},C.prototype.update=function(){for(var a=this,b=!0,f,c,e,d;b;)f=a.table.modules.layout.getMode()=="fitColumns"?a.table.columnManager.getFlexBaseWidth():a.table.columnManager.getWidth(),c=(a.table.options.headerVisible?a.table.columnManager.element.clientWidth:a.table.element.clientWidth)-f,c<0?(e=a.columns[a.index],e?(a.hideColumn(e),a.index++):b=!1):(d=a.columns[a.index-1],d?c>0?c>=d.getWidth()?(a.showColumn(d),a.index--):b=!1:b=!1:b=!1),a.table.rowManager.activeRowsCount||a.table.rowManager.renderEmptyScroll()},C.prototype.generateCollapsedContent=function(){var a=this,b=this.table.rowManager.getDisplayRows();b.forEach(function(b){a.generateCollapsedRowContent(b)})},C.prototype.generateCollapsedRowContent=function(b){var a,c;if(b.modules.responsiveLayout){for(a=b.modules.responsiveLayout.element;a.firstChild;)a.removeChild(a.firstChild);c=this.collapseFormatter(this.generateCollapsedRowData(b)),c&&a.appendChild(c)}},C.prototype.generateCollapsedRowData=function(b){var c=this,d=b.getData(),a=[],e;return this.hiddenColumns.forEach(function(f){var g=f.getFieldValue(d);f.definition.title&&f.field&&(f.modules.format&&c.table.options.responsiveLayoutCollapseUseFormatters?(e={value:!1,data:{},getValue:function(){return g},getData:function(){return d},getElement:function(){return document.createElement("div")},getRow:function(){return b.getComponent()},getColumn:function(){return f.getComponent()}},a.push({field:f.field,title:f.definition.title,value:f.modules.format.formatter.call(c.table.modules.format,e,f.modules.format.params)})):a.push({field:f.field,title:f.definition.title,value:g}))}),a},C.prototype.formatCollapsedData=function(a){var b=document.createElement("table");return a.forEach(function(a){var c=document.createElement("tr"),f=document.createElement("td"),d=document.createElement("td"),g=document.createElement("strong"),e;f.appendChild(g),this.table.modules.localize.bind("columns|"+a.field,function(b){g.innerText=b||a.title}),a.value instanceof Node?(e=document.createElement("div"),e.appendChild(a.value),d.appendChild(e)):d.innerHTML=a.value,c.appendChild(f),c.appendChild(d),b.appendChild(c)},this),Object.keys(a).length?b:""},a.prototype.registerModule("responsiveLayout",C),w=function(a){this.table=a,this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null},w.prototype.clearSelectionData=function(a){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],a||this._rowSelectionChanged()},w.prototype.initializeRow=function(b){var a=this,c=b.getElement(),d=function b(){setTimeout(function(){a.selecting=!1},50),document.body.removeEventListener("mouseup",b)};b.modules.select={selected:!1},a.table.options.selectableCheck.call(this.table,b.getComponent())?(c.classList.add("tabulator-selectable"),c.classList.remove("tabulator-unselectable"),a.table.options.selectable&&a.table.options.selectable!="highlight"&&(a.table.options.selectableRangeMode==="click"?c.addEventListener("click",function(f){var d,e,g,h,i,c;f.shiftKey?(a.table._clearSelection(),a.lastClickedRow=a.lastClickedRow||b,d=a.table.rowManager.getDisplayRowIndex(a.lastClickedRow),e=a.table.rowManager.getDisplayRowIndex(b),g=d<=e?d:e,h=d>=e?d:e,i=a.table.rowManager.getDisplayRows().slice(0),c=i.splice(g,h-g+1),f.ctrlKey||f.metaKey?(c.forEach(function(c){c!==a.lastClickedRow&&(a.table.options.selectable!==!0&&!a.isRowSelected(b)?a.selectedRows.length<a.table.options.selectable&&a.toggleRow(c):a.toggleRow(c))}),a.lastClickedRow=b):(a.deselectRows(void 0,!0),a.table.options.selectable!==!0&&c.length>a.table.options.selectable&&(c=c.slice(0,a.table.options.selectable)),a.selectRows(c)),a.table._clearSelection()):f.ctrlKey||f.metaKey?(a.toggleRow(b),a.lastClickedRow=b):(a.deselectRows(void 0,!0),a.selectRows(b),a.lastClickedRow=b)}):(c.addEventListener("click",function(c){(!a.table.modExists("edit")||!a.table.modules.edit.getCurrentCell())&&a.table._clearSelection(),a.selecting||a.toggleRow(b)}),c.addEventListener("mousedown",function(c){if(c.shiftKey)return a.table._clearSelection(),a.selecting=!0,a.selectPrev=[],document.body.addEventListener("mouseup",d),document.body.addEventListener("keyup",d),a.toggleRow(b),!1}),c.addEventListener("mouseenter",function(c){a.selecting&&(a.table._clearSelection(),a.toggleRow(b),a.selectPrev[1]==b&&a.toggleRow(a.selectPrev[0]))}),c.addEventListener("mouseout",function(c){a.selecting&&(a.table._clearSelection(),a.selectPrev.unshift(b))})))):(c.classList.add("tabulator-unselectable"),c.classList.remove("tabulator-selectable"))},w.prototype.toggleRow=function(a){this.table.options.selectableCheck.call(this.table,a.getComponent())&&(a.modules.select&&a.modules.select.selected?this._deselectRow(a):this._selectRow(a))},w.prototype.selectRows=function(a){var c=this,d;switch(typeof a=="undefined"?"undefined":b(a)){case"undefined":this.table.rowManager.rows.forEach(function(a){c._selectRow(a,!0,!0)}),this._rowSelectionChanged();break;case"string":d=this.table.rowManager.findRow(a),d?this._selectRow(d,!0,!0):this.table.rowManager.getRows(a).forEach(function(a){c._selectRow(a,!0,!0)}),this._rowSelectionChanged();break;default:Array.isArray(a)?(a.forEach(function(a){c._selectRow(a,!0,!0)}),this._rowSelectionChanged()):this._selectRow(a,!1,!0);break}},w.prototype._selectRow=function(c,b,d){var e,a;if(!isNaN(this.table.options.selectable)&&this.table.options.selectable!==!0&&!d)if(this.selectedRows.length>=this.table.options.selectable)if(this.table.options.selectableRollingSelection)this._deselectRow(this.selectedRows[0]);else return!1;a=this.table.rowManager.findRow(c),a?this.selectedRows.indexOf(a)==-1&&(a.getElement().classList.add("tabulator-selected"),a.modules.select||(a.modules.select={}),a.modules.select.selected=!0,a.modules.select.checkboxEl&&(a.modules.select.checkboxEl.checked=!0),this.selectedRows.push(a),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(a,!0),b||this.table.options.rowSelected.call(this.table,a.getComponent()),this._rowSelectionChanged(b)):b||console.warn("Selection Error - No such row found, ignoring selection:"+c)},w.prototype.isRowSelected=function(a){return this.selectedRows.indexOf(a)!==-1},w.prototype.deselectRows=function(b,c){var a=this,d,e;if(typeof b=="undefined"){d=a.selectedRows.length;for(e=0;e<d;e++)a._deselectRow(a.selectedRows[0],!0);a._rowSelectionChanged(c)}else Array.isArray(b)?(b.forEach(function(b){a._deselectRow(b,!0)}),a._rowSelectionChanged(c)):a._deselectRow(b,c)},w.prototype._deselectRow=function(e,c){var b=this,a=b.table.rowManager.findRow(e),d;a?(d=b.selectedRows.findIndex(function(b){return b==a}),d>-1&&(a.getElement().classList.remove("tabulator-selected"),a.modules.select||(a.modules.select={}),a.modules.select.selected=!1,a.modules.select.checkboxEl&&(a.modules.select.checkboxEl.checked=!1),b.selectedRows.splice(d,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(a,!1),c||b.table.options.rowDeselected.call(this.table,a.getComponent()),b._rowSelectionChanged(c))):c||console.warn("Deselection Error - No such row found, ignoring selection:"+e)},w.prototype.getSelectedData=function(){var a=[];return this.selectedRows.forEach(function(b){a.push(b.getData())}),a},w.prototype.getSelectedRows=function(){var a=[];return this.selectedRows.forEach(function(b){a.push(b.getComponent())}),a},w.prototype._rowSelectionChanged=function(a){this.headerCheckboxElement&&(this.selectedRows.length===0?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),a||this.table.options.rowSelectionChanged.call(this.table,this.getSelectedData(),this.getSelectedRows())},w.prototype.registerRowSelectCheckbox=function(a,b){a._row.modules.select||(a._row.modules.select={}),a._row.modules.select.checkboxEl=b},w.prototype.registerHeaderSelectCheckbox=function(a){this.headerCheckboxElement=a},w.prototype.childRowSelection=function(j,l){var i=this.table.modules.dataTree.getChildren(j,!0),b,g,d,e,k,a,h,c,f,m;if(l)for(b=i,g=Array.isArray(b),d=0,b=g?b:b[Symbol.iterator]();;){if(g){if(d>=b.length)break;e=b[d++]}else{if(d=b.next(),d.done)break;e=d.value}k=e,this._selectRow(k,!0)}else for(a=i,h=Array.isArray(a),c=0,a=h?a:a[Symbol.iterator]();;){if(h){if(c>=a.length)break;f=a[c++]}else{if(c=a.next(),c.done)break;f=c.value}m=f,this._deselectRow(m,!0)}},a.prototype.registerModule("selectRow",w),F=function(a){this.table=a,this.sortList=[],this.changed=!1},F.prototype.initializeColumn=function(a,g){var c=this,e=!1,f,d;switch(b(a.definition.sorter)){case"string":c.sorters[a.definition.sorter]?e=c.sorters[a.definition.sorter]:console.warn("Sort Error - No such sorter found: ",a.definition.sorter);break;case"function":e=a.definition.sorter;break}a.modules.sort={sorter:e,dir:"none",params:a.definition.sorterParams||{},startingDir:a.definition.headerSortStartingDir||"asc",tristate:typeof a.definition.headerSortTristate!="undefined"?a.definition.headerSortTristate:this.table.options.headerSortTristate},(typeof a.definition.headerSort=="undefined"?this.table.options.headerSort!==!1:a.definition.headerSort!==!1)&&(f=a.getElement(),f.classList.add("tabulator-sortable"),d=document.createElement("div"),d.classList.add("tabulator-col-sorter"),b(this.table.options.headerSortElement)=="object"?d.appendChild(this.table.options.headerSortElement):d.innerHTML=this.table.options.headerSortElement,g.appendChild(d),a.modules.sort.element=d,f.addEventListener("click",function(f){var b="",d=[],e=!1;if(a.modules.sort){if(a.modules.sort.tristate)a.modules.sort.dir=="none"?b=a.modules.sort.startingDir:a.modules.sort.dir==a.modules.sort.startingDir?b=a.modules.sort.dir=="asc"?"desc":"asc":b="none";else switch(a.modules.sort.dir){case"asc":b="desc";break;case"desc":b="asc";break;default:b=a.modules.sort.startingDir}c.table.options.columnHeaderSortMulti&&(f.shiftKey||f.ctrlKey)?(d=c.getSort(),e=d.findIndex(function(b){return b.field===a.getField()}),e>-1?(d[e].dir=b,e!=d.length-1&&(e=d.splice(e,1)[0],b!="none"&&d.push(e))):b!="none"&&d.push({column:a,dir:b}),c.setSort(d)):b=="none"?c.clear():c.setSort(a,b),c.table.rowManager.sorterRefresh(!c.sortList.length)}}))},F.prototype.hasChanged=function(){var a=this.changed;return this.changed=!1,a},F.prototype.getSort=function(){var b=this,a=[];return b.sortList.forEach(function(b){b.column&&a.push({column:b.column.getComponent(),field:b.column.getField(),dir:b.dir})}),a},F.prototype.setSort=function(a,d){var b=this,c=[];Array.isArray(a)||(a=[{column:a,dir:d}]),a.forEach(function(a){var d;d=b.table.columnManager.findColumn(a.column),d?(a.column=d,c.push(a),b.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",a.column)}),b.sortList=c,this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.sort&&this.table.modules.persistence.save("sort")},F.prototype.clear=function(){this.setSort([])},F.prototype.findSorter=function(e){var d=this.table.rowManager.activeRows[0],c="string",f,a;if(d)if(d=d.getData(),f=e.getField(),f)switch(a=e.getFieldValue(d),typeof a=="undefined"?"undefined":b(a)){case"undefined":c="string";break;case"boolean":c="boolean";break;default:!isNaN(a)&&a!==""?c="number":a.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(c="alphanum");break}return this.sorters[c]},F.prototype.sort=function(c){var a=this,d=this.table.options.sortOrderReverse?a.sortList.slice().reverse():a.sortList,b=[],e=[],f;a.table.options.dataSorting&&a.table.options.dataSorting.call(a.table,a.getSort()),a.clearColumnHeaders(),a.table.options.ajaxSorting?d.forEach(function(b,c){a.setColumnHeader(b.column,b.dir)}):(d.forEach(function(c,e){var d=c.column.modules.sort;c.column&&d&&(d.sorter||(d.sorter=a.findSorter(c.column)),c.params=typeof d.params=="function"?d.params(c.column.getComponent(),c.dir):d.params,b.push(c)),a.setColumnHeader(c.column,c.dir)}),b.length&&a._sortItems(c,b)),a.table.options.dataSorted&&(c.forEach(function(a){e.push(a.getComponent())}),a.table.options.dataSorted.call(a.table,a.getSort(),e))},F.prototype.clearColumnHeaders=function(){this.table.columnManager.getRealColumns().forEach(function(a){a.modules.sort&&(a.modules.sort.dir="none",a.getElement().setAttribute("aria-sort","none"))})},F.prototype.setColumnHeader=function(a,b){a.modules.sort.dir=b,a.getElement().setAttribute("aria-sort",b)},F.prototype._sortItems=function(b,a){var c=this,d=a.length-1;b.sort(function(g,h){for(var e=d,b,f;e>=0;e--)if(f=a[e],b=c._sortRow(g,h,f.column,f.dir,f.params),b!==0)break;return b})},F.prototype._sortRow=function(a,b,c,d,i){var g=d=="asc"?a:b,h=d=="asc"?b:a,j,e,f;return a=c.getFieldValue(g.getData()),b=c.getFieldValue(h.getData()),a=typeof a!="undefined"?a:"",b=typeof b!="undefined"?b:"",e=g.getComponent(),f=h.getComponent(),c.modules.sort.sorter.call(this,a,b,e,f,c.getComponent(),d,i)},F.prototype.sorters={number:function(b,a,j,k,l,g,f){var h=f.alignEmptyValues,d=f.decimalSeparator,e=f.thousandSeparator,c=0;if(b=String(b),a=String(a),e&&(b=b.split(e).join(""),a=a.split(e).join("")),d&&(b=b.split(d).join("."),a=a.split(d).join(".")),b=parseFloat(b),a=parseFloat(a),isNaN(b))c=isNaN(a)?0:-1;else if(isNaN(a))c=1;else return b-a;return(h==="top"&&g==="desc"||h==="bottom"&&g==="asc")&&(c*=-1),c},string:function(g,d,k,l,i,f,a){var h=a.alignEmptyValues,c=0,e;if(g)if(d){switch(b(a.locale)){case"boolean":a.locale&&(e=this.table.modules.localize.getLocale());break;case"string":e=a.locale;break}return String(g).toLowerCase().localeCompare(String(d).toLowerCase(),e)}else c=1;else c=d?-1:0;return(h==="top"&&f==="desc"||h==="bottom"&&f==="asc")&&(c*=-1),c},date:function(g,c,d,e,f,b,a){return a.format||(a.format="DD/MM/YYYY"),this.sorters.datetime.call(this,g,c,d,e,f,b,a)},time:function(g,c,d,e,f,b,a){return a.format||(a.format="HH:mm"),this.sorters.datetime.call(this,g,c,d,e,f,b,a)},datetime:function(b,a,j,k,h,d,f){var g=f.format||"DD/MM/YYYY HH:mm:ss",e=f.alignEmptyValues,c=0;if(typeof moment!="undefined"){if(b=moment(b,g),a=moment(a,g),b.isValid())if(a.isValid())return b-a;else c=1;else c=a.isValid()?-1:0;return(e==="top"&&d==="desc"||e==="bottom"&&d==="asc")&&(c*=-1),c}console.error("Sort Error - 'datetime' sorter is dependant on moment.js")},boolean:function(a,b,j,f,g,h,i){var d=a===!0||a==="true"||a==="True"||a===1?1:0,c=b===!0||b==="true"||b==="True"||b===1?1:0;return d-c},array:function(c,a,m,l,k,g,h){var d=0,f=0,j=h.type||"length",b=h.alignEmptyValues,e=0;function i(a){switch(j){case"length":return a.length;break;case"sum":return a.reduce(function(a,b){return a+b});break;case"max":return Math.max.apply(null,a);break;case"min":return Math.min.apply(null,a);break;case"avg":return a.reduce(function(a,b){return a+b})/a.length;break}}if(Array.isArray(c))if(Array.isArray(a))return d=c?i(c):0,f=a?i(a):0,d-f;else b=1;else b=Array.isArray(a)?-1:0;return(b==="top"&&g==="desc"||b==="bottom"&&g==="asc")&&(e*=-1),e},exists:function(a,b,j,f,g,h,i){var d=typeof a=="undefined"?0:1,c=typeof b=="undefined"?0:1;return d-c},alphanum:function(f,e,o,q,p,j,n){var a,b,d,c,h=0,i,m=/(\d+)|(\D+)/g,k=/\d/,l=n.alignEmptyValues,g=0;if(!f&&f!==0)g=!e&&e!==0?0:-1;else if(!e&&e!==0)g=1;else{if(isFinite(f)&&isFinite(e))return f-e;if(a=String(f).toLowerCase(),b=String(e).toLowerCase(),a===b)return 0;if(!(k.test(a)&&k.test(b)))return a>b?1:-1;for(a=a.match(m),b=b.match(m),i=a.length>b.length?b.length:a.length;h<i;)if(d=a[h],c=b[h++],d!==c)return isFinite(d)&&isFinite(c)?(d.charAt(0)==="0"&&(d="."+d),c.charAt(0)==="0"&&(c="."+c),d-c):d>c?1:-1;return a.length>b.length}return(l==="top"&&j==="desc"||l==="bottom"&&j==="asc")&&(g*=-1),g}},a.prototype.registerModule("sort",F),O=function(a){this.table=a,this.invalidCells=[]},O.prototype.initializeColumn=function(b){var d=this,c=[],a;b.definition.validator&&(Array.isArray(b.definition.validator)?b.definition.validator.forEach(function(b){a=d._extractValidator(b),a&&c.push(a)}):(a=this._extractValidator(b.definition.validator),a&&c.push(a)),b.modules.validate=!!c.length&&c)},O.prototype._extractValidator=function(a){var d,e,c;switch(typeof a=="undefined"?"undefined":b(a)){case"string":return c=a.indexOf(":"),c>-1?(d=a.substring(0,c),e=a.substring(c+1)):d=a,this._buildValidator(d,e);break;case"function":return this._buildValidator(a);break;case"object":return this._buildValidator(a.type,a.parameters);break}},O.prototype._buildValidator=function(a,c){var b=typeof a=="function"?a:this.validators[a];return b?{type:typeof a=="function"?"function":a,func:b,params:c}:(console.warn("Validator Setup Error - No matching validator found:",a),!1)},O.prototype.validate=function(d,a,e){var f=this,b=[],c=this.invalidCells.indexOf(a);return d&&d.forEach(function(c){c.func.call(f,a.getComponent(),e,c.params)||b.push({type:c.type,parameters:c.params})}),b=!b.length||b,a.modules.validate||(a.modules.validate={}),b===!0?(a.modules.validate.invalid=!1,a.getElement().classList.remove("tabulator-validation-fail"),c>-1&&this.invalidCells.splice(c,1)):(a.modules.validate.invalid=!0,this.table.options.validationMode!=="manual"&&a.getElement().classList.add("tabulator-validation-fail"),c==-1&&this.invalidCells.push(a)),b},O.prototype.getInvalidCells=function(){var a=[];return this.invalidCells.forEach(function(b){a.push(b.getComponent())}),a},O.prototype.clearValidation=function(a){var b;a.modules.validate&&a.modules.validate.invalid&&(a.getElement().classList.remove("tabulator-validation-fail"),a.modules.validate.invalid=!1,b=this.invalidCells.indexOf(a),b>-1&&this.invalidCells.splice(b,1))},O.prototype.validators={integer:function(c,a,d){return!!(a===""||a===null||typeof a=="undefined")||(a=Number(a),typeof a=="number"&&isFinite(a)&&Math.floor(a)===a)},float:function(c,a,d){return!!(a===""||a===null||typeof a=="undefined")||(a=Number(a),typeof a=="number"&&isFinite(a)&&a%1!==0)},numeric:function(c,a,d){return!!(a===""||a===null||typeof a=="undefined")||!isNaN(a)},string:function(c,a,d){return!!(a===""||a===null||typeof a=="undefined")||isNaN(a)},max:function(d,a,b){return!!(a===""||a===null||typeof a=="undefined")||parseFloat(a)<=b},min:function(d,a,b){return!!(a===""||a===null||typeof a=="undefined")||parseFloat(a)>=b},starts:function(d,a,b){return!!(a===""||a===null||typeof a=="undefined")||String(a).toLowerCase().startsWith(String(b).toLowerCase())},ends:function(d,a,b){return!!(a===""||a===null||typeof a=="undefined")||String(a).toLowerCase().endsWith(String(b).toLowerCase())},minLength:function(d,a,b){return!!(a===""||a===null||typeof a=="undefined")||String(a).length>=b},maxLength:function(d,a,b){return!!(a===""||a===null||typeof a=="undefined")||String(a).length<=b},in:function(d,a,b){return!!(a===""||a===null||typeof a=="undefined")||(typeof b=="string"&&(b=b.split("|")),a===""||b.indexOf(a)>-1)},regex:function(e,a,b){if(a===""||a===null||typeof a=="undefined")return!0;var c=new RegExp(b);return c.test(a)},unique:function(d,a,f){var b,e,c;return!!(a===""||a===null||typeof a=="undefined")||(b=!0,e=d.getData(),c=d.getColumn()._getSelf(),this.table.rowManager.rows.forEach(function(f){var d=f.getData();d!==e&&a==c.getFieldValue(d)&&(b=!1)}),b)},required:function(c,a,d){return a!==""&&a!==null&&typeof a!="undefined"}},a.prototype.registerModule("validate",O),al=a;function am(){return window.innerWidth>=1024?"fitColumns":"fitData"}function an(a){return a.includes("Set")?"Set":void 0}function ao(b,c){const a=[];for(const d of b){if(d==="Set #"||d==="Price Estimate"||d==="Notes")continue;a.push(ap(d,c))}return a}function ap(a,b){switch(a){case"Set":return{title:a,field:a,headerTooltip:"The set that the card belongs to",responsive:100,widthGrow:1,visible:P(a,b),headerFilter:"select",headerFilterParams:{values:!0,sortValuesList:"asc"}};case"Card #":return{title:"#",field:a,headerTooltip:"The card's number",responsive:0,widthGrow:.5,visible:P(a,b),headerFilter:"input"};case"Card":return{title:a,field:a,headerTooltip:"The card's name",responsive:0,widthGrow:3,visible:P(a,b),headerFilter:"input"};case"Type":case"Subtype":case"Colour":case"Side":case"Civilization":case"Nationality":case"Zone":case"Border":case"Phase":case"World":case"Pantheon":case"School":case"Faction":return{title:a,field:a,headerTooltip:"The type or catagory of the card",responsive:50,widthGrow:1,visible:P(a,b),headerFilter:"select",headerFilterParams:{values:!0,sortValuesList:"asc"}};case"Rarity":return{title:a,field:a,headerTooltip:"The rarity of the card",responsive:10,widthGrow:1,visible:P(a,b),headerFilter:"select",headerFilterParams:{values:!0,sortValuesList:"asc"}};case"Col":return{title:"Have",field:a,headerTooltip:"If I have the card or not",responsive:0,widthGrow:.5,visible:P(a,b),headerFilter:"tickCross",formatter:"tickCross",hozAlign:"center",mutator:a=>{switch(a){case"x":case"X":case"XX":case"XXX":case"XXXX":case"b":case"B":return!0;case"o":case"O":case"0":return!1;default:return null}}};case"Dup":return{title:"Stock",field:a,headerTooltip:"The number of cards I have available to trade",responsive:0,widthGrow:.5,visible:P(a,b)};case"Cube":return{title:a,field:a,headerTooltip:"The number of cards I have in my playing cube",responsive:0,widthGrow:.5,visible:P(a,b)}}}function P(a,b){return!b.hide.includes(a)}ac="list";function at(){const a=new URLSearchParams(window.location.search);return ad(a.get(ac))}function ad(a){switch(a){default:case"want":return{value:"want",filter:[{field:"Col",type:"=",value:!1}],hide:["Col","Dup"]};case"trade":return{value:"trade",filter:[{field:"Dup",type:">",value:0}],hide:["Col"]};case"have":return{value:"have",filter:[{field:"Col",type:"=",value:!0}],hide:["Col","Dup"]};case"all":return{value:"all",filter:[],hide:[]}}}function aF(a,b){document.querySelectorAll("#filter input").forEach(c=>{c.addEventListener("change",()=>aw(a,c.value)),c.checked=c.value===b.value,c.disabled=!1})}function aw(a,c){const b=ad(c);a.clearFilter(!1),b.filter!==null&&a.setFilter(b.filter),ax(a,b),ay(b),a.redraw()}function ax(a,b){a.getColumns().forEach(a=>{const c=a.getDefinition().field;b.hide.includes(c)?a.hide():a.show()})}function ay(b){const a=new URLSearchParams(window.location.search);a.set(ac,b.value);const c=window.location.pathname+"?"+a.toString();history.replaceState(null,"",c)}function az(b){const a=document.getElementById("download");a.addEventListener("click",()=>{b.download("csv",aA())}),a.disabled=!1}function aA(){const a=document.getElementById("game-name").innerText,b=document.querySelector("#filter input:checked + label").innerText;return`Crash Dive - ${b} List (${a}).csv`}W=document.getElementById("table"),aC=W.dataset.url,(0,ag.parse)(aC,{download:!0,header:!0,complete:a=>{if(a.errors.length===0)try{ak(W,a)}catch{aD(W)}else aE(W)}});function aD(a){a.innerHTML='<p id="error-message">There has been an error reading the card list from Google Sheets.<br>Please try again later.</p>'}function aE(a){a.innerHTML='<p id="error-message">There has been an error downloading the card list from Google Sheets.<br>Please try again.</p>'}function ak(d,a){const b=at(),c=new al(d,{data:a.data,height:"100%",layout:am(),responsiveLayout:"hide",headerFilterPlaceholder:"Filter",placeholder:"No Results",initialFilter:b.filter,groupBy:an(a.meta.fields),groupToggleElement:"header",columns:ao(a.meta.fields,b)});aF(c,b),az(c)}})()